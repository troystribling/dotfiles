"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class MarkerStore {
    constructor() {
        this.markers = new Map();
    }
    clear() {
        this.markers.forEach((bubble) => bubble.destroy());
        this.markers.clear();
    }
    clearOnRow(row) {
        let destroyed = false;
        this.markers.forEach((bubble, key) => {
            const { start, end } = bubble.marker.getBufferRange();
            if (start.row <= row && row <= end.row) {
                this.delete(key);
                destroyed = true;
            }
        });
        return destroyed;
    }
    new(bubble) {
        this.markers.set(bubble.marker.id, bubble);
    }
    delete(key) {
        const bubble = this.markers.get(key);
        if (bubble) {
            bubble.destroy();
        }
        this.markers.delete(key);
    }
}
exports.default = MarkerStore;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFya2Vycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9zdG9yZS9tYXJrZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsTUFBcUIsV0FBVztJQUFoQztRQUNFLFlBQU8sR0FBNEIsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQStCL0MsQ0FBQztJQTdCQyxLQUFLO1FBQ0gsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFrQixFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxVQUFVLENBQUMsR0FBVztRQUNwQixJQUFJLFNBQVMsR0FBRyxLQUFLLENBQUM7UUFDdEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFrQixFQUFFLEdBQVcsRUFBRSxFQUFFO1lBQ3ZELE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUV0RCxJQUFJLEtBQUssQ0FBQyxHQUFHLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFO2dCQUN0QyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNqQixTQUFTLEdBQUcsSUFBSSxDQUFDO2FBQ2xCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLFNBQVMsQ0FBQztJQUNuQixDQUFDO0lBRUQsR0FBRyxDQUFDLE1BQWtCO1FBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRCxNQUFNLENBQUMsR0FBVztRQUNoQixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNyQyxJQUFJLE1BQU0sRUFBRTtZQUNWLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUNsQjtRQUNELElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzNCLENBQUM7Q0FDRjtBQWhDRCw4QkFnQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSBSZXN1bHRWaWV3IGZyb20gXCIuLi9jb21wb25lbnRzL3Jlc3VsdC12aWV3XCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXJrZXJTdG9yZSB7XG4gIG1hcmtlcnM6IE1hcDxudW1iZXIsIFJlc3VsdFZpZXc+ID0gbmV3IE1hcCgpO1xuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMubWFya2Vycy5mb3JFYWNoKChidWJibGU6IFJlc3VsdFZpZXcpID0+IGJ1YmJsZS5kZXN0cm95KCkpO1xuICAgIHRoaXMubWFya2Vycy5jbGVhcigpO1xuICB9XG5cbiAgY2xlYXJPblJvdyhyb3c6IG51bWJlcikge1xuICAgIGxldCBkZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLm1hcmtlcnMuZm9yRWFjaCgoYnViYmxlOiBSZXN1bHRWaWV3LCBrZXk6IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSBidWJibGUubWFya2VyLmdldEJ1ZmZlclJhbmdlKCk7XG5cbiAgICAgIGlmIChzdGFydC5yb3cgPD0gcm93ICYmIHJvdyA8PSBlbmQucm93KSB7XG4gICAgICAgIHRoaXMuZGVsZXRlKGtleSk7XG4gICAgICAgIGRlc3Ryb3llZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlc3Ryb3llZDtcbiAgfVxuXG4gIG5ldyhidWJibGU6IFJlc3VsdFZpZXcpIHtcbiAgICB0aGlzLm1hcmtlcnMuc2V0KGJ1YmJsZS5tYXJrZXIuaWQsIGJ1YmJsZSk7XG4gIH1cblxuICBkZWxldGUoa2V5OiBudW1iZXIpIHtcbiAgICBjb25zdCBidWJibGUgPSB0aGlzLm1hcmtlcnMuZ2V0KGtleSk7XG4gICAgaWYgKGJ1YmJsZSkge1xuICAgICAgYnViYmxlLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgdGhpcy5tYXJrZXJzLmRlbGV0ZShrZXkpO1xuICB9XG59XG4iXX0=