{"version":3,"file":"activitymonitor.js","sourceRoot":"","sources":["../../../../coreutils/src/activitymonitor.ts"],"names":[],"mappings":";AAAA,0CAA0C;AAC1C,2DAA2D;;AAM3D,iDAE6B;AAG7B;;GAEG;AACH;IAEE;;OAEG;IACH,yBAAY,OAA+C;QA0DnD,WAAM,GAAG,CAAC,CAAC,CAAC;QACZ,aAAQ,GAAG,CAAC,CAAC,CAAC;QAGd,gBAAW,GAAG,KAAK,CAAC;QACpB,qBAAgB,GAAG,IAAI,kBAAM,CAAiD,IAAI,CAAC,CAAC;QA9D1F,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAClD,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC;IAC1C,CAAC;IAKD,sBAAI,4CAAe;QAHnB;;WAEG;aACH;YACE,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;QAC/B,CAAC;;;OAAA;IAKD,sBAAI,oCAAO;QAHX;;WAEG;aACH;YACE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACvB,CAAC;aACD,UAAY,KAAa;YACvB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACxB,CAAC;;;OAHA;IAWD,sBAAI,uCAAU;QANd;;;;;WAKG;aACH;YACE,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;QAC1B,CAAC;;;OAAA;IAED;;OAEG;IACH,iCAAO,GAAP;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;YACrB,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,kBAAM,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IACzB,CAAC;IAED;;OAEG;IACK,wCAAc,GAAtB,UAAuB,MAAc,EAAE,IAAU;QAAjD,iBAUC;QATC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC1B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC;YAC9B,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC;gBACzB,MAAM,EAAE,KAAI,CAAC,OAAO;gBACpB,IAAI,EAAE,KAAI,CAAC,KAAK;aACjB,CAAC,CAAC;QACL,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IACpB,CAAC;IAQH,sBAAC;AAAD,CAAC,AArED,IAqEC;AApEK,0CAAe","sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport {\n  IDisposable\n} from '@phosphor/disposable';\n\nimport {\n  ISignal, Signal\n} from '@phosphor/signaling';\n\n\n/**\n * A class that monitors activity on a signal.\n */\nexport\nclass ActivityMonitor<Sender, Args> implements IDisposable {\n  /**\n   * Construct a new activity monitor.\n   */\n  constructor(options: ActivityMonitor.IOptions<Sender, Args>) {\n    options.signal.connect(this._onSignalFired, this);\n    this._timeout = options.timeout || 1000;\n  }\n\n  /**\n   * A signal emitted when activity has ceased.\n   */\n  get activityStopped(): ISignal<this, ActivityMonitor.IArguments<Sender, Args>> {\n    return this._activityStopped;\n  }\n\n  /**\n   * The timeout associated with the monitor, in milliseconds.\n   */\n  get timeout(): number {\n    return this._timeout;\n  }\n  set timeout(value: number) {\n    this._timeout = value;\n  }\n\n  /**\n   * Test whether the monitor has been disposed.\n   *\n   * #### Notes\n   * This is a read-only property.\n   */\n  get isDisposed(): boolean {\n    return this._isDisposed;\n  }\n\n  /**\n   * Dispose of the resources used by the activity monitor.\n   */\n  dispose(): void {\n    if (this._isDisposed) {\n      return;\n    }\n    this._isDisposed = true;\n    Signal.clearData(this);\n  }\n\n  /**\n   * A signal handler for the monitored signal.\n   */\n  private _onSignalFired(sender: Sender, args: Args): void {\n    clearTimeout(this._timer);\n    this._sender = sender;\n    this._args = args;\n    this._timer = window.setTimeout(() => {\n      this._activityStopped.emit({\n        sender: this._sender,\n        args: this._args\n      });\n    }, this._timeout);\n  }\n\n  private _timer = -1;\n  private _timeout = -1;\n  private _sender: Sender;\n  private _args: Args;\n  private _isDisposed = false;\n  private _activityStopped = new Signal<this, ActivityMonitor.IArguments<Sender, Args>>(this);\n}\n\n\n/**\n * The namespace for `ActivityMonitor` statics.\n */\nexport\nnamespace ActivityMonitor {\n  /**\n   * The options used to construct a new `ActivityMonitor`.\n   */\n  export\n  interface IOptions<Sender, Args> {\n    /**\n     * The signal to monitor.\n     */\n    signal: ISignal<Sender, Args>;\n\n    /**\n     * The activity timeout in milliseconds.\n     *\n     * The default is 1 second.\n     */\n    timeout?: number;\n  }\n\n  /**\n   * The argument object for an activity timeout.\n   *\n   */\n  export\n  interface IArguments<Sender, Args> {\n    /**\n     * The most recent sender object.\n     */\n    sender: Sender;\n\n    /**\n     * The most recent argument object.\n     */\n    args: Args;\n  }\n}\n"]}