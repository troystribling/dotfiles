// https://d3js.org/d3-array/ v2.2.0 Copyright 2019 Mike Bostock
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";function n(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function r(t){var r;return 1===t.length&&(r=t,t=function(t,o){return n(r(t),o)}),{left:function(n,r,o,e){for(null==o&&(o=0),null==e&&(e=n.length);o<e;){var f=o+e>>>1;t(n[f],r)<0?o=f+1:e=f}return o},right:function(n,r,o,e){for(null==o&&(o=0),null==e&&(e=n.length);o<e;){var f=o+e>>>1;t(n[f],r)>0?e=f:o=f+1}return o}}}var o=r(n),e=o.right,f=o.left;function u(t){return 0|t.length}function l(t){return!(t>0)}function i(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function c(t,n){let r,o=0,e=0,f=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(f+=(r=n-e)*(n-(e+=r/++o)));else{let u=-1;for(let l of t)null!=(l=n(l,++u,t))&&(l=+l)>=l&&(f+=(r=l-e)*(l-(e+=r/++o)))}if(o>1)return f/(o-1)}function a(t,n){const r=c(t,n);return r?Math.sqrt(r):r}function s(t,n){let r,o;if(void 0===n)for(const n of t)null!=n&&(void 0===r?n>=n&&(r=o=n):(r>n&&(r=n),o<n&&(o=n)));else{let e=-1;for(let f of t)null!=(f=n(f,++e,t))&&(void 0===r?f>=f&&(r=o=f):(r>f&&(r=f),o<f&&(o=f)))}return[r,o]}function h(t){return t}function d(t,n,r,o){return function t(e,f){if(f>=o.length)return r(e);const u=new Map,l=o[f++];let i=-1;for(const t of e){const n=l(t,++i,e),r=u.get(n);r?r.push(t):u.set(n,[t])}for(const[n,r]of u)u.set(n,t(r,f));return n(u)}(t,0)}var v=Array.prototype,p=v.slice,M=v.map;function g(t){return function(){return t}}function y(t,n,r){t=+t,n=+n,r=(e=arguments.length)<2?(n=t,t=0,1):e<3?1:+r;for(var o=-1,e=0|Math.max(0,Math.ceil((n-t)/r)),f=new Array(e);++o<e;)f[o]=t+o*r;return f}var m=Math.sqrt(50),A=Math.sqrt(10),x=Math.sqrt(2);function w(t,n,r){var o=(n-t)/Math.max(0,r),e=Math.floor(Math.log(o)/Math.LN10),f=o/Math.pow(10,e);return e>=0?(f>=m?10:f>=A?5:f>=x?2:1)*Math.pow(10,e):-Math.pow(10,-e)/(f>=m?10:f>=A?5:f>=x?2:1)}function b(t,n,r){var o=Math.abs(n-t)/Math.max(0,r),e=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),f=o/e;return f>=m?e*=10:f>=A?e*=5:f>=x&&(e*=2),n<t?-e:e}function N(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function q(){var t=h,n=s,r=N;function o(o){Array.isArray(o)||(o=Array.from(o));var f,u,l=o.length,i=new Array(l);for(f=0;f<l;++f)i[f]=t(o[f],f,o);var c=n(i),a=c[0],s=c[1],h=r(i,a,s);Array.isArray(h)||(h=b(a,s,h),h=y(Math.ceil(a/h)*h,s,h));for(var d=h.length;h[0]<=a;)h.shift(),--d;for(;h[d-1]>s;)h.pop(),--d;var v,p=new Array(d+1);for(f=0;f<=d;++f)(v=p[f]=[]).x0=f>0?h[f-1]:a,v.x1=f<d?h[f]:s;for(f=0;f<l;++f)a<=(u=i[f])&&u<=s&&p[e(h,u,0,d)].push(o[f]);return p}return o.value=function(n){return arguments.length?(t="function"==typeof n?n:g(n),o):t},o.domain=function(t){return arguments.length?(n="function"==typeof t?t:g([t[0],t[1]]),o):n},o.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?g(p.call(t)):g(t),o):r},o}function k(t){return null===t?NaN:+t}function I(t,n,r=k){if(o=t.length){if((n=+n)<=0||o<2)return+r(t[0],0,t);if(n>=1)return+r(t[o-1],o-1,t);var o,e=(o-1)*n,f=Math.floor(e),u=+r(t[f],f,t);return u+(+r(t[f+1],f+1,t)-u)*(e-f)}}function L(t,r,o=0,e=t.length-1,f=n){for(;e>o;){if(e-o>600){const n=e-o+1,u=r-o+1,l=Math.log(n),i=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*i*(n-i)/n)*(u-n/2<0?-1:1);L(t,r,Math.max(o,Math.floor(r-u*i/n+c)),Math.min(e,Math.floor(r+(n-u)*i/n+c)),f)}const n=t[r];let u=o,l=e;for(j(t,o,r),f(t[e],n)>0&&j(t,o,e);u<l;){for(j(t,u,l),++u,--l;f(t[u],n)<0;)++u;for(;f(t[l],n)>0;)--l}0===f(t[o],n)?j(t,o,l):j(t,++l,e),l<=r&&(o=l+1),r<=l&&(e=l-1)}return t}function j(t,n,r){const o=t[n];t[n]=t[r],t[r]=o}function F(t,n){let r;if(void 0===n)for(const n of t)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let o=-1;for(let e of t)null!=(e=n(e,++o,t))&&(r>e||void 0===r&&e>=e)&&(r=e)}return r}function S(t,r=n){let o,e=-1,f=-1;if(1===r.length)for(const u of t){++f;const t=r(u);(e<0?0===n(t,t):n(t,o)<0)&&(o=t,e=f)}else for(const n of t)++f,(e<0?0===r(n,n):r(n,o)<0)&&(o=n,e=f);return e}function _(t){if(!(e=t.length))return[];for(var n=-1,r=F(t,z),o=new Array(r);++n<r;)for(var e,f=-1,u=o[n]=new Array(e);++f<e;)u[f]=t[f][n];return o}function z(t){return t.length}t.bisect=e,t.bisectRight=e,t.bisectLeft=f,t.ascending=n,t.bisector=r,t.count=function(t,n){let r=0;if(void 0===n)for(const n of t)null!=n&&n>=n&&++r;else{let o=-1;for(let e of t)null!=(e=n(e,++o,t))&&e>=e&&++r}return r},t.cross=function(...t){const n="function"==typeof t[t.length-1]&&function(t){return n=>t(...n)}(t.pop()),r=(t=t.map(i)).map(u),o=t.length-1,e=new Array(o+1).fill(0),f=[];if(o<0||r.some(l))return f;for(;;){f.push(e.map((n,r)=>t[r][n]));let u=o;for(;++e[u]===r[u];){if(0===u)return n?f.map(n):f;e[u--]=0}}},t.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=a,t.extent=s,t.group=function(t,...n){return d(t,h,h,n)},t.groups=function(t,...n){return d(t,Array.from,h,n)},t.rollup=function(t,n,...r){return d(t,h,n,r)},t.rollups=function(t,n,...r){return d(t,Array.from,n,r)},t.bin=q,t.histogram=q,t.thresholdFreedmanDiaconis=function(t,r,o){return t=M.call(t,k).sort(n),Math.ceil((o-r)/(2*(I(t,.75)-I(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,n,r){return Math.ceil((r-n)/(3.5*a(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=N,t.max=function(t,n){let r;if(void 0===n)for(const n of t)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let o=-1;for(let e of t)null!=(e=n(e,++o,t))&&(r<e||void 0===r&&e>=e)&&(r=e)}return r},t.maxIndex=function(t,n){let r,o=-1,e=-1;if(void 0===n)for(const n of t)++e,null!=n&&(r<n||void 0===r&&n>=n)&&(r=n,o=e);else for(let f of t)null!=(f=n(f,++e,t))&&(r<f||void 0===r&&f>=f)&&(r=f,o=e);return o},t.mean=function(t,n){let r=0,o=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++r,o+=n);else{let e=-1;for(let f of t)null!=(f=n(f,++e,t))&&(f=+f)>=f&&(++r,o+=f)}if(r)return o/r},t.median=function(t,n){if(!(t=Float64Array.from(function*(t,n){if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let r=-1;for(let o of t)null!=(o=n(o,++r,t))&&(o=+o)>=o&&(yield o)}}(t,n))).length)return;const r=t.length,o=r>>1;return L(t,o-1,0),0==(1&r)&&L(t,o,o),I(t,.5)},t.merge=function(t){return Array.from(function*(t){for(const n of t)yield*n}(t))},t.min=F,t.minIndex=function(t,n){let r,o=-1,e=-1;if(void 0===n)for(const n of t)++e,null!=n&&(r>n||void 0===r&&n>=n)&&(r=n,o=e);else for(let f of t)null!=(f=n(f,++e,t))&&(r>f||void 0===r&&f>=f)&&(r=f,o=e);return o},t.pairs=function(t,n=function(t,n){return[t,n]}){const r=[];let o,e=!1;for(const f of t)e&&r.push(n(o,f)),o=f,e=!0;return r},t.permute=function(t,n){return Array.from(n,n=>t[n])},t.quantile=I,t.quickselect=L,t.range=y,t.least=function(t,r=n){let o,e=!1;if(1===r.length){let f;for(const u of t){const t=r(u);(e?n(t,f)<0:0===n(t,t))&&(o=u,f=t,e=!0)}}else for(const n of t)(e?r(n,o)<0:0===r(n,n))&&(o=n,e=!0);return o},t.leastIndex=S,t.scan=function(t,n){const r=S(t,n);return r<0?void 0:r},t.shuffle=function(t,n=0,r=t.length){for(var o,e,f=r-(n=+n);f;)e=Math.random()*f--|0,o=t[f+n],t[f+n]=t[e+n],t[e+n]=o;return t},t.sum=function(t,n){let r=0;if(void 0===n)for(let n of t)(n=+n)&&(r+=n);else{let o=-1;for(let e of t)(e=+n(e,++o,t))&&(r+=e)}return r},t.ticks=function(t,n,r){var o,e,f,u,l=-1;if(r=+r,(t=+t)==(n=+n)&&r>0)return[t];if((o=n<t)&&(e=t,t=n,n=e),0===(u=w(t,n,r))||!isFinite(u))return[];if(u>0)for(t=Math.ceil(t/u),n=Math.floor(n/u),f=new Array(e=Math.ceil(n-t+1));++l<e;)f[l]=(t+l)*u;else for(t=Math.floor(t*u),n=Math.ceil(n*u),f=new Array(e=Math.ceil(t-n+1));++l<e;)f[l]=(t-l)/u;return o&&f.reverse(),f},t.tickIncrement=w,t.tickStep=b,t.transpose=_,t.variance=c,t.zip=function(){return _(arguments)},Object.defineProperty(t,"__esModule",{value:!0})});
