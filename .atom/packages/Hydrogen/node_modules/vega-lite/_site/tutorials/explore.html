<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <link rel="shortcut icon" href="https://vega.github.io/favicon.ico"/>
    <meta name="description" content="Vega-Lite - a high-level grammar for statistical graphics. Vega-Lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.
Vega-Lite specifications consist of simple mappings of variables in a data set to visual encoding channels such as x, y, color, and size. These mappings are then translated into detailed visualization specifications in the form of Vega specification language. Vega-Lite produces default values for visualization components (e.g., scales, axes, and legends) in the output Vega specification using a rule-based approach, but users can explicit specify these properties to override default values.">

    <script src="/vega-lite/bower_components/d3/d3.min.js"></script>
    <script src="/vega-lite/bower_components/vega/vega.min.js"></script>
    <script src="/vega-lite/vega-lite.min.js"></script>
    <script src="/vega-lite/bower_components/vega-embed/vega-embed.js"></script>
    <script src="/vega-lite/bower_components/highlightjs/highlight.pack.js"></script>

    <script>
      var BASEURL = "/vega-lite";
    </script>

    <title> Vega-Lite: Exploring Data </title>
    <link rel="stylesheet" href="/vega-lite/site/static/syntax.css">
    <link rel="stylesheet" href="/vega-lite/bower_components/highlightjs/styles/github.css">
    <link rel="stylesheet" href="/vega-lite/bower_components/octicons/build/octicons.css">
    <link rel="stylesheet" href="/vega-lite/site/static/main.css">
  </head>
  <body>
    <div class="fill">
  <header>
    <nav class="page-centered">
      <a class="vl-title" href="/vega-lite/">Vega-Lite</a>
      <div class="vl-links">
        <div class="primary-links">
          <a href="/vega-lite/tutorials/getting_started.html" class="active">Tutorials</a>
          <a href="/vega-lite/usage/embed.html" >Usage</a>
          <a href="/vega-lite/docs/" >Documentation</a>
          <a href="/vega-lite/examples/" >Examples</a>
        </div>
        <div class="secondary-links">
          <a href="https://www.github.com/vega/vega-lite" target="_blank">GitHub</a>
          <a href="https://vega.github.io/vega-editor/?mode=vega-lite" target="_blank">Try Online</a>
        </div>
      </div>
    </nav>
  </header>

  <section>
    


<div class="sub-nav">
  <nav class="page-centered">
    
    <a 
        href="/vega-lite/tutorials/getting_started.html" title="">Getting Started
    </a>
    
    <a class="active"
        href="/vega-lite/tutorials/explore.html" title="">Exploring Data
    </a>
    
  </nav>
</div>


<div class="page-centered page-main">
  

  <section class="page-content">
    <h1>Exploring Data</h1>

    <p>In this tutorial, you’ll learn a few more techniques for creating visualizations in Vega-Lite. If you are not familiar with Vega-Lite, please read the <a href="/tutorials/getting_started.html">getting started tutorial</a> first.</p>

<p>For this tutorial, we will create visualizations to explore weather data for Seattle, taken from <a href="https://www.ncdc.noaa.gov/cdo-web/">NOAA</a>. The <a href="/data/seattle-weather.csv">dataset</a> is a <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV file</a> with columns for the temperature (in Celsius), precipitation (in centimeter), wind (in meter/second), and weather type. We have one row for each day from January 1st, 2012 to December 31st, 2015.</p>

<p>To load the CSV file with Vega-Lite, we need to provide a URL and set the format type in the data section of the specification.</p>

<div class="language-json suppress-error highlighter-rouge"><pre class="highlight"><code><span class="s2">"data"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data/seattle-weather.csv"</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Let’s start by looking at the precipitation. Precipitation is a quantitative variable. Let’s use a tick mark to show the distribution of precipitation.</p>

<div class="vl-example">
{
  "data": {"url": "data/seattle-weather.csv"},
  "mark": "tick",
  "encoding": {
    "x": {"field": "precipitation", "type": "quantitative"}
  }
}
</div>

<p>It looks as though precipitation is skewed towards lower values; that is, when it rains, it usually doesn’t rain very much. To better see this, we can create a histogram of the precipitation data. For this, we have to add an encoding channel for <code class="highlighter-rouge">y</code> that uses a special field <code class="highlighter-rouge">*</code> that is aggregated with <code class="highlighter-rouge">count</code>. It is difficult to see patterns across continuous variables. You can therefore discretize temperature values by setting <code class="highlighter-rouge">"bin": true</code>.</p>

<div class="vl-example">
{
  "data": {"url": "data/seattle-weather.csv"},
  "mark": "bar",
  "encoding": {
    "x": {
      "bin": true,
      "field": "precipitation",
      "type": "quantitative"
      },
    "y": {
      "aggregate": "count",
      "field": "*",
      "type": "quantitative"
    }
  }
}
</div>

<p>Next, let’s look at how precipitation in Seattle changes throughout the year. Vega-Lite natively supports dates and discretization of dates when we set the type to <code class="highlighter-rouge">temporal</code>. For example, in the following plot, we sum up the precipitation for each month. To discretize the data into months, we set <code class="highlighter-rouge">"timeUnit": "month"</code>.</p>

<div class="vl-example">
{
  "data": {"url": "data/seattle-weather.csv"},
  "mark": "line",
  "encoding": {
    "x": {
      "timeUnit": "month",
      "field": "date",
      "type": "temporal"
    },
    "y": {
      "aggregate": "mean",
      "field": "precipitation",
      "type": "quantitative"
    }
  }
}
</div>

<p>This chart shows that in Seattle the precipitation in the winter is, on average, much higher than summer. You can now create similar charts for the other variables on your own!</p>

<p>When looking at precipitation and temperature, we might want to aggregate by year and month (<code class="highlighter-rouge">yearmonth</code>) rather than just month. This allows us to see seasonal trends but for each year separately. You can find more about <a href="/vega-lite/docs/timeUnit.html">time units in the documentation</a>. We can also set the <code class="highlighter-rouge">aggregate</code> to <code class="highlighter-rouge">max</code> in order to see the maximum temperature in each month.</p>

<div class="vl-example">
{
  "data": {"url": "data/seattle-weather.csv"},
  "mark": "line",
  "encoding": {
    "x": {
      "timeUnit": "yearmonth",
      "field": "date",
      "type": "temporal"
    },
    "y": {
      "aggregate": "max",
      "field": "temp_max",
      "type": "quantitative"
    }
  },
  "config": {
    "unit": { "width": 300 }
  }
}
</div>

<p>In this chart, it looks as though the maximum temperature is increasing from year to year. To look closer into this, let’s create a chart that shows the mean of the maximum daily temperatures.</p>

<div class="vl-example">
{
  "data": {"url": "data/seattle-weather.csv"},
  "mark": "line",
  "encoding": {
    "x": {
      "timeUnit": "year",
      "field": "date",
      "type": "temporal"
    },
    "y": {
      "aggregate": "mean",
      "field": "temp_max",
      "type": "quantitative"
    }
  }
}
</div>

<p>And yes, this chart shows that it is in fact increasing. You can observe a similar change for the minimum daily temperatures. Considering minimum and maximum temperatures, you might wonder how the variability of the temperatures changes throughout the year. For this, we have to add a computation to derive a new field.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="s2">"transform"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"calculate"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"temp_range"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"expr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"datum.temp_max - datum.temp_min"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>We can use the new field <code class="highlighter-rouge">temp_range</code> just like any other field. You can find more <a href="/vega-lite/docs/transform.html">data transformation operations in the docs</a>.</p>

<div class="vl-example">
{
  "data": {"url": "data/seattle-weather.csv"},
  "transform": {
    "calculate": [
      {
        "field": "temp_range",
        "expr": "datum.temp_max - datum.temp_min"
      }
    ]
  },
  "mark": "line",
  "encoding": {
    "x": {
      "timeUnit": "month",
      "field": "date",
      "type": "temporal"

    },
    "y": {
      "aggregate": "mean",
      "field": "temp_range",
      "type": "quantitative"
    }
  }
}
</div>

<p>For the last visualization in this tutorial, we will explore the <code class="highlighter-rouge">weather</code> field. We might wish to know how different kinds of weather (e.g. sunny days or rainy days) are distributed throughout the year. To answer this, we discretize the <code class="highlighter-rouge">date</code> by month and then count the number of records on the y-Axis. We then break down the bars by the weather type by adding a color channel with nominal data. When a field is mapped to color for a bar mark, Vega-Lite automatically stacks the bars atop eachother.
<!-- TODO: link to stacking config once we finish moving it --></p>

<div class="vl-example">
{
  "data": {"url": "data/seattle-weather.csv"},
  "mark": "bar",
  "encoding": {
    "x": {
      "timeUnit": "month",
      "field": "date",
      "type": "temporal"
    },
    "y": {
      "aggregate": "count",
      "field": "*",
      "type": "quantitative"
    },
    "color": {
      "field": "weather",
      "type": "nominal"
    }
  }
}
</div>

<p>However, the default color palette’s semantics might not match our expectation. For example, we probably do not expect “sun” (sunny) to be purple. We can further tune the chart by providing a color <a href="/vega-lite/docs/scale.html#range">scale range</a> that maps the values from the <code class="highlighter-rouge">weather</code> field to meaningful colors. In addition, we can customize the <a href="/vega-lite/docs/axis.html">axis</a> and <a href="/vega-lite/docs/legend.html">legend</a> titles.</p>

<div class="vl-example" data-name="stacked_bar_weather"></div>

<p>This is the end of this tutorial where you learned different ways to discretize and aggregate data, derive new fields, and customize your charts. You can find more visualizations in the <a href="/vega-lite/examples/gallery.html">gallery</a>. If you want to further customize your charts, please read the <a href="/vega-lite/docs/">documentation</a>.</p>


  </section>
</div>

  </section>
</div>

<footer>
  <div class="page-centered">
    <span>
      <a href="https://github.com/vega/vega-lite/edit/master/site/tutorials/explore.md">Edit this page</a> and submit a pull request!
    </span>
    <span class="fill"></span>
    <a href="http://idl.cs.washington.edu" title="UW Interactive Data Lab" class="idl-logo"><img src="/vega-lite/site/static/idl-logo.png"/></a>
  </div>
</footer>

    <script src="/vega-lite/site/static/main.js"></script>
    <script>
      // Google Analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44428446-6', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
