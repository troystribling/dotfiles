var _languageclient = require('../lib/languageclient');

var ls = _interopRequireWildcard(_languageclient);

var _logger = require('../lib/logger');

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _chai = require('chai');

var _helpers = require('./helpers.js');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

describe('LanguageClientConnection', () => {
  beforeEach(() => {
    global.sinon = _sinon2.default.sandbox.create();
  });
  afterEach(() => {
    global.sinon.restore();
  });

  it('listens to the RPC connection it is given', () => {
    const rpc = (0, _helpers.createSpyConnection)();

    new ls.LanguageClientConnection(rpc, new _logger.NullLogger());
    (0, _chai.expect)(rpc.listen.called).equals(true);
  });

  it('disposes of the connection when it is disposed', () => {
    const rpc = (0, _helpers.createSpyConnection)();
    const lc = new ls.LanguageClientConnection(rpc, new _logger.NullLogger());
    (0, _chai.expect)(rpc.dispose.called).equals(false);
    lc.dispose();
    (0, _chai.expect)(rpc.dispose.called).equals(true);
  });

  describe('send requests', () => {
    const textDocumentPositionParams = {
      textDocument: { uri: 'file:///1/z80.asm' },
      position: { line: 24, character: 32 }
    };
    let lc;

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.spy(lc, '_sendRequest');
    });

    it('sends a request for initialize', async () => {
      const params = { capabilities: {} };
      await lc.initialize(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('initialize');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for shutdown', async () => {
      await lc.shutdown();

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('shutdown');
    });

    it('sends a request for completion', async () => {
      await lc.completion(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/completion');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for completionItemResolve', async () => {
      const completionItem = { label: 'abc' };
      await lc.completionItemResolve(completionItem);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('completionItem/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(completionItem);
    });

    it('sends a request for hover', async () => {
      await lc.hover(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/hover');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for signatureHelp', async () => {
      await lc.signatureHelp(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/signatureHelp');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for gotoDefinition', async () => {
      await lc.gotoDefinition(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/definition');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for findReferences', async () => {
      await lc.findReferences(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/references');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for documentHighlight', async () => {
      await lc.documentHighlight(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentHighlight');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for documentSymbol', async () => {
      await lc.documentSymbol(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentSymbol');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for workspaceSymbol', async () => {
      const params = { query: 'something' };
      await lc.workspaceSymbol(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('workspace/symbol');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for codeAction', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        },
        context: { diagnostics: [] }
      };
      await lc.codeAction(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/codeAction');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for codeLens', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument
      };
      await lc.codeLens(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/codeLens');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for codeLensResolve', async () => {
      const params = {
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        }
      };
      await lc.codeLensResolve(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('codeLens/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentLink', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument
      };
      await lc.documentLink(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentLink');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentLinkResolve', async () => {
      const params = {
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        },
        target: 'abc.def.ghi'
      };
      await lc.documentLinkResolve(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('documentLink/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentFormatting', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      await lc.documentFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/formatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentRangeFormatting', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        },
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      await lc.documentRangeFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/rangeFormatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentOnTypeFormatting', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        position: { line: 1, character: 1 },
        ch: '}',
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      await lc.documentOnTypeFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/onTypeFormatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for rename', async () => {
      const params = {
        textDocument: { uri: 'file:///a/b.txt' },
        position: { line: 1, character: 2 },
        newName: 'abstractConstructorFactory'
      };
      await lc.rename(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/rename');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });
  });

  describe('send notifications', () => {
    const textDocumentItem = {
      uri: 'file:///best/bits.js',
      languageId: 'javascript',
      text: 'function a() { return "b"; };',
      version: 1
    };
    const versionedTextDocumentIdentifier = {
      uri: 'file:///best/bits.js',
      languageId: 'javascript',
      text: 'function a() { return "b"; };',
      version: 1
    };

    let lc;

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.stub(lc, '_sendNotification');
    });

    it('exit sends notification', () => {
      lc.exit();

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('exit');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args.length).equals(1);
    });

    it('initialized sends notification', () => {
      lc.initialized();

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('initialized');
      const expected = {};
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).to.deep.equal(expected);
    });

    it('didChangeConfiguration sends notification', () => {
      const params = {
        settings: { a: { b: 'c' } }
      };
      lc.didChangeConfiguration(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('workspace/didChangeConfiguration');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didOpenTextDocument sends notification', () => {
      const params = {
        textDocument: textDocumentItem
      };
      lc.didOpenTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didOpen');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didChangeTextDocument sends notification', () => {
      const params = {
        textDocument: versionedTextDocumentIdentifier,
        contentChanges: []
      };
      lc.didChangeTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didChange');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didCloseTextDocument sends notification', () => {
      const params = {
        textDocument: textDocumentItem
      };
      lc.didCloseTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didClose');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didSaveTextDocument sends notification', () => {
      const params = {
        textDocument: textDocumentItem
      };
      lc.didSaveTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didSave');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didChangeWatchedFiles sends notification', () => {
      const params = { changes: [] };
      lc.didChangeWatchedFiles(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('workspace/didChangeWatchedFiles');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });
  });

  describe('notification methods', () => {
    let lc;
    const eventMap = {};

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.stub(lc, '_onNotification').callsFake((message, callback) => {
        eventMap[message.method] = callback;
      });
    });

    it('onShowMessage calls back on window/showMessage', () => {
      let called = false;
      lc.onShowMessage(() => {
        called = true;
      });
      eventMap['window/showMessage']();
      (0, _chai.expect)(called).equals(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3QvbGFuZ3VhZ2VjbGllbnQudGVzdC5qcyJdLCJuYW1lcyI6WyJscyIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImdsb2JhbCIsInNpbm9uIiwic2FuZGJveCIsImNyZWF0ZSIsImFmdGVyRWFjaCIsInJlc3RvcmUiLCJpdCIsInJwYyIsIkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbiIsImxpc3RlbiIsImNhbGxlZCIsImVxdWFscyIsImxjIiwiZGlzcG9zZSIsInRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zIiwidGV4dERvY3VtZW50IiwidXJpIiwicG9zaXRpb24iLCJsaW5lIiwiY2hhcmFjdGVyIiwic3B5IiwicGFyYW1zIiwiY2FwYWJpbGl0aWVzIiwiaW5pdGlhbGl6ZSIsIl9zZW5kUmVxdWVzdCIsImdldENhbGwiLCJhcmdzIiwic2h1dGRvd24iLCJjb21wbGV0aW9uIiwiY29tcGxldGlvbkl0ZW0iLCJsYWJlbCIsImNvbXBsZXRpb25JdGVtUmVzb2x2ZSIsImhvdmVyIiwic2lnbmF0dXJlSGVscCIsImdvdG9EZWZpbml0aW9uIiwiZmluZFJlZmVyZW5jZXMiLCJkb2N1bWVudEhpZ2hsaWdodCIsImRvY3VtZW50U3ltYm9sIiwicXVlcnkiLCJ3b3Jrc3BhY2VTeW1ib2wiLCJyYW5nZSIsInN0YXJ0IiwiZW5kIiwiY29udGV4dCIsImRpYWdub3N0aWNzIiwiY29kZUFjdGlvbiIsImNvZGVMZW5zIiwiY29kZUxlbnNSZXNvbHZlIiwiZG9jdW1lbnRMaW5rIiwidGFyZ2V0IiwiZG9jdW1lbnRMaW5rUmVzb2x2ZSIsIm9wdGlvbnMiLCJ0YWJTaXplIiwiaW5zZXJ0U3BhY2VzIiwic29tZVZhbHVlIiwiZG9jdW1lbnRGb3JtYXR0aW5nIiwiZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmciLCJjaCIsImRvY3VtZW50T25UeXBlRm9ybWF0dGluZyIsIm5ld05hbWUiLCJyZW5hbWUiLCJ0ZXh0RG9jdW1lbnRJdGVtIiwibGFuZ3VhZ2VJZCIsInRleHQiLCJ2ZXJzaW9uIiwidmVyc2lvbmVkVGV4dERvY3VtZW50SWRlbnRpZmllciIsInN0dWIiLCJleGl0IiwiX3NlbmROb3RpZmljYXRpb24iLCJsZW5ndGgiLCJpbml0aWFsaXplZCIsImV4cGVjdGVkIiwidG8iLCJkZWVwIiwiZXF1YWwiLCJzZXR0aW5ncyIsImEiLCJiIiwiZGlkQ2hhbmdlQ29uZmlndXJhdGlvbiIsImRpZE9wZW5UZXh0RG9jdW1lbnQiLCJjb250ZW50Q2hhbmdlcyIsImRpZENoYW5nZVRleHREb2N1bWVudCIsImRpZENsb3NlVGV4dERvY3VtZW50IiwiZGlkU2F2ZVRleHREb2N1bWVudCIsImNoYW5nZXMiLCJkaWRDaGFuZ2VXYXRjaGVkRmlsZXMiLCJldmVudE1hcCIsImNhbGxzRmFrZSIsIm1lc3NhZ2UiLCJjYWxsYmFjayIsIm1ldGhvZCIsIm9uU2hvd01lc3NhZ2UiXSwibWFwcGluZ3MiOiJBQUVBOztJQUFZQSxFOztBQUNaOztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBQyxTQUFTLDBCQUFULEVBQXFDLE1BQU07QUFDekNDLGFBQVcsTUFBTTtBQUNmQyxXQUFPQyxLQUFQLEdBQWUsZ0JBQU1DLE9BQU4sQ0FBY0MsTUFBZCxFQUFmO0FBQ0QsR0FGRDtBQUdBQyxZQUFVLE1BQU07QUFDZEosV0FBT0MsS0FBUCxDQUFhSSxPQUFiO0FBQ0QsR0FGRDs7QUFJQUMsS0FBRywyQ0FBSCxFQUFnRCxNQUFNO0FBQ3BELFVBQU1DLE1BQU0sbUNBQVo7O0FBRUEsUUFBSVYsR0FBR1csd0JBQVAsQ0FBZ0NELEdBQWhDLEVBQXFDLHdCQUFyQztBQUNBLHNCQUFPQSxJQUFJRSxNQUFKLENBQVdDLE1BQWxCLEVBQTBCQyxNQUExQixDQUFpQyxJQUFqQztBQUNELEdBTEQ7O0FBT0FMLEtBQUcsZ0RBQUgsRUFBcUQsTUFBTTtBQUN6RCxVQUFNQyxNQUFNLG1DQUFaO0FBQ0EsVUFBTUssS0FBSyxJQUFJZixHQUFHVyx3QkFBUCxDQUFnQ0QsR0FBaEMsRUFBcUMsd0JBQXJDLENBQVg7QUFD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QWpCLElBQTJCRCxRQUEzQjtBQUNELE9BRkQ7QUFHRCxLQUxEOztBQU9BbkYsT0FBRyxnREFBSCxFQUFxRCxNQUFNO0FBQ3pELFVBQUlJLFNBQVMsS0FBYjtBQUNBRSxTQUFHK0UsYUFBSCxDQUFpQixNQUFNO0FBQ3JCakYsaUJBQVMsSUFBVDtBQUNELE9BRkQ7QUFHQTRFLGVBQVMsb0JBQVQ7QUFDQSx3QkFBTzVFLE1BQVAsRUFBZUMsTUFBZixDQUFzQixJQUF0QjtBQUNELEtBUEQ7QUFRRCxHQW5CRDtBQW9CRCxDQXBYRCIsImZpbGUiOiJsYW5ndWFnZWNsaWVudC50ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcclxuXHJcbmltcG9ydCAqIGFzIGxzIGZyb20gJy4uL2xpYi9sYW5ndWFnZWNsaWVudCc7XHJcbmltcG9ydCB7TnVsbExvZ2dlcn0gZnJvbSAnLi4vbGliL2xvZ2dlcic7XHJcbmltcG9ydCBzaW5vbiBmcm9tICdzaW5vbic7XHJcbmltcG9ydCB7ZXhwZWN0fSBmcm9tICdjaGFpJztcclxuaW1wb3J0IHtjcmVhdGVTcHlDb25uZWN0aW9ufSBmcm9tICcuL2hlbHBlcnMuanMnO1xyXG5cclxuZGVzY3JpYmUoJ0xhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbicsICgpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGdsb2JhbC5zaW5vbiA9IHNpbm9uLnNhbmRib3guY3JlYXRlKCk7XHJcbiAgfSk7XHJcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgIGdsb2JhbC5zaW5vbi5yZXN0b3JlKCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdsaXN0ZW5zIHRvIHRoZSBSUEMgY29ubmVjdGlvbiBpdCBpcyBnaXZlbicsICgpID0+IHtcclxuICAgIGNvbnN0IHJwYyA9IGNyZWF0ZVNweUNvbm5lY3Rpb24oKTtcclxuXHJcbiAgICBuZXcgbHMuTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uKHJwYywgbmV3IE51bGxMb2dnZXIoKSk7XHJcbiAgICBleHBlY3QocnBjLmxpc3Rlbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2Rpc3Bvc2VzIG9mIHRoZSBjb25uZWN0aW9uIHdoZW4gaXQgaXMgZGlzcG9zZWQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBycGMgPSBjcmVhdGVTcHlDb25uZWN0aW9uKCk7XHJcbiAgICBjb25zdCBsYyA9IG5ldyBscy5MYW5ndWFnZUNsaWVudENvbm5lY3Rpb24ocnBjLCBuZXcgTnVsbExvZ2dlcigpKTtcclxuICAgIGV4cGVjdChycGMuZGlzcG9zZS5jYWxsZWQpLmVxdWFscyhmYWxzZSk7XHJcbiAgICBsYy5kaXNwb3NlKCk7XHJcbiAgICBleHBlY3QocnBjLmRpc3Bvc2UuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzZW5kIHJlcXVlc3RzJywgKCkgPT4ge1xyXG4gICAgY29uc3QgdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXM6IGxzLlRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zID0ge1xyXG4gICAgICB0ZXh0RG9jdW1lbnQ6IHt1cmk6ICdmaWxlOi8vLzEvejgwLmFzbSd9LFxyXG4gICAgICBwb3NpdGlvbjoge2xpbmU6IDI0LCBjaGFyYWN0ZXI6IDMyfSxcclxuICAgIH07XHJcbiAgICBsZXQgbGM7XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIGxjID0gbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihjcmVhdGVTcHlDb25uZWN0aW9uKCksIG5ldyBOdWxsTG9nZ2VyKCkpO1xyXG4gICAgICBzaW5vbi5zcHkobGMsICdfc2VuZFJlcXVlc3QnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGluaXRpYWxpemUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuSW5pdGlhbGl6ZVBhcmFtcyA9IHtjYXBhYmlsaXRpZXM6IHt9fTtcclxuICAgICAgYXdhaXQgbGMuaW5pdGlhbGl6ZShwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnaW5pdGlhbGl6ZScpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBzaHV0ZG93bicsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbGMuc2h1dGRvd24oKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3NodXRkb3duJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBjb21wbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBsYy5jb21wbGV0aW9uKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9jb21wbGV0aW9uJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgY29tcGxldGlvbkl0ZW1SZXNvbHZlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb21wbGV0aW9uSXRlbTogbHMuQ29tcGxldGlvbkl0ZW0gPSB7bGFiZWw6ICdhYmMnfTtcclxuICAgICAgYXdhaXQgbGMuY29tcGxldGlvbkl0ZW1SZXNvbHZlKGNvbXBsZXRpb25JdGVtKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ2NvbXBsZXRpb25JdGVtL3Jlc29sdmUnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhjb21wbGV0aW9uSXRlbSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBob3ZlcicsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbGMuaG92ZXIodGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2hvdmVyJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3Igc2lnbmF0dXJlSGVscCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbGMuc2lnbmF0dXJlSGVscCh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvc2lnbmF0dXJlSGVscCcpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGdvdG9EZWZpbml0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBsYy5nb3RvRGVmaW5pdGlvbih0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvZGVmaW5pdGlvbicpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGZpbmRSZWZlcmVuY2VzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBsYy5maW5kUmVmZXJlbmNlcyh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvcmVmZXJlbmNlcycpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50SGlnaGxpZ2h0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBsYy5kb2N1bWVudEhpZ2hsaWdodCh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvZG9jdW1lbnRIaWdobGlnaHQnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBkb2N1bWVudFN5bWJvbCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbGMuZG9jdW1lbnRTeW1ib2wodGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RvY3VtZW50U3ltYm9sJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3Igd29ya3NwYWNlU3ltYm9sJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLldvcmtzcGFjZVN5bWJvbFBhcmFtcyA9IHtxdWVyeTogJ3NvbWV0aGluZyd9O1xyXG4gICAgICBhd2FpdCBsYy53b3Jrc3BhY2VTeW1ib2wocGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3dvcmtzcGFjZS9zeW1ib2wnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgY29kZUFjdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5Db2RlQWN0aW9uUGFyYW1zID0ge1xyXG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxyXG4gICAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgICBzdGFydDoge2xpbmU6IDEsIGNoYXJhY3RlcjogMX0sXHJcbiAgICAgICAgICBlbmQ6IHtsaW5lOiAyNCwgY2hhcmFjdGVyOiAzMn0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250ZXh0OiB7ZGlhZ25vc3RpY3M6IFtdfSxcclxuICAgICAgfTtcclxuICAgICAgYXdhaXQgbGMuY29kZUFjdGlvbihwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2NvZGVBY3Rpb24nKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgY29kZUxlbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuQ29kZUxlbnNQYXJhbXMgPSB7XHJcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcy50ZXh0RG9jdW1lbnQsXHJcbiAgICAgIH07XHJcbiAgICAgIGF3YWl0IGxjLmNvZGVMZW5zKHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvY29kZUxlbnMnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgY29kZUxlbnNSZXNvbHZlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkNvZGVMZW5zID0ge1xyXG4gICAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgICBzdGFydDoge2xpbmU6IDEsIGNoYXJhY3RlcjogMX0sXHJcbiAgICAgICAgICBlbmQ6IHtsaW5lOiAyNCwgY2hhcmFjdGVyOiAzMn0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgICAgYXdhaXQgbGMuY29kZUxlbnNSZXNvbHZlKHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCdjb2RlTGVucy9yZXNvbHZlJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50TGluaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5Eb2N1bWVudExpbmtQYXJhbXMgPSB7XHJcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcy50ZXh0RG9jdW1lbnQsXHJcbiAgICAgIH07XHJcbiAgICAgIGF3YWl0IGxjLmRvY3VtZW50TGluayhwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RvY3VtZW50TGluaycpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBkb2N1bWVudExpbmtSZXNvbHZlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRvY3VtZW50TGluayA9IHtcclxuICAgICAgICByYW5nZToge1xyXG4gICAgICAgICAgc3RhcnQ6IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDF9LFxyXG4gICAgICAgICAgZW5kOiB7bGluZTogMjQsIGNoYXJhY3RlcjogMzJ9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGFyZ2V0OiAnYWJjLmRlZi5naGknLFxyXG4gICAgICB9O1xyXG4gICAgICBhd2FpdCBsYy5kb2N1bWVudExpbmtSZXNvbHZlKHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCdkb2N1bWVudExpbmsvcmVzb2x2ZScpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBkb2N1bWVudEZvcm1hdHRpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRG9jdW1lbnRGb3JtYXR0aW5nUGFyYW1zID0ge1xyXG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxyXG4gICAgICAgIG9wdGlvbnM6IHt0YWJTaXplOiA2LCBpbnNlcnRTcGFjZXM6IHRydWUsIHNvbWVWYWx1ZTogJ29wdGlvbmFsJ30sXHJcbiAgICAgIH07XHJcbiAgICAgIGF3YWl0IGxjLmRvY3VtZW50Rm9ybWF0dGluZyhwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2Zvcm1hdHRpbmcnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdQYXJhbXMgPSB7XHJcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcy50ZXh0RG9jdW1lbnQsXHJcbiAgICAgICAgcmFuZ2U6IHtcclxuICAgICAgICAgIHN0YXJ0OiB7bGluZTogMSwgY2hhcmFjdGVyOiAxfSxcclxuICAgICAgICAgIGVuZDoge2xpbmU6IDI0LCBjaGFyYWN0ZXI6IDMyfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9wdGlvbnM6IHt0YWJTaXplOiA2LCBpbnNlcnRTcGFjZXM6IHRydWUsIHNvbWVWYWx1ZTogJ29wdGlvbmFsJ30sXHJcbiAgICAgIH07XHJcbiAgICAgIGF3YWl0IGxjLmRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nKHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvcmFuZ2VGb3JtYXR0aW5nJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50T25UeXBlRm9ybWF0dGluZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5Eb2N1bWVudE9uVHlwZUZvcm1hdHRpbmdQYXJhbXMgPSB7XHJcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcy50ZXh0RG9jdW1lbnQsXHJcbiAgICAgICAgcG9zaXRpb246IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDF9LFxyXG4gICAgICAgIGNoOiAnfScsXHJcbiAgICAgICAgb3B0aW9uczoge3RhYlNpemU6IDYsIGluc2VydFNwYWNlczogdHJ1ZSwgc29tZVZhbHVlOiAnb3B0aW9uYWwnfSxcclxuICAgICAgfTtcclxuICAgICAgYXdhaXQgbGMuZG9jdW1lbnRPblR5cGVGb3JtYXR0aW5nKHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvb25UeXBlRm9ybWF0dGluZycpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciByZW5hbWUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuUmVuYW1lUGFyYW1zID0ge1xyXG4gICAgICAgIHRleHREb2N1bWVudDoge3VyaTogJ2ZpbGU6Ly8vYS9iLnR4dCd9LFxyXG4gICAgICAgIHBvc2l0aW9uOiB7bGluZTogMSwgY2hhcmFjdGVyOiAyfSxcclxuICAgICAgICBuZXdOYW1lOiAnYWJzdHJhY3RDb25zdHJ1Y3RvckZhY3RvcnknLFxyXG4gICAgICB9O1xyXG4gICAgICBhd2FpdCBsYy5yZW5hbWUocGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9yZW5hbWUnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdzZW5kIG5vdGlmaWNhdGlvbnMnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB0ZXh0RG9jdW1lbnRJdGVtOiBscy5UZXh0RG9jdW1lbnRJdGVtID0ge1xyXG4gICAgICB1cmk6ICdmaWxlOi8vL2Jlc3QvYml0cy5qcycsXHJcbiAgICAgIGxhbmd1YWdlSWQ6ICdqYXZhc2NyaXB0JyxcclxuICAgICAgdGV4dDogJ2Z1bmN0aW9uIGEoKSB7IHJldHVybiBcImJcIjsgfTsnLFxyXG4gICAgICB2ZXJzaW9uOiAxLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXI6IGxzLlZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIgPSB7XHJcbiAgICAgIHVyaTogJ2ZpbGU6Ly8vYmVzdC9iaXRzLmpzJyxcclxuICAgICAgbGFuZ3VhZ2VJZDogJ2phdmFzY3JpcHQnLFxyXG4gICAgICB0ZXh0OiAnZnVuY3Rpb24gYSgpIHsgcmV0dXJuIFwiYlwiOyB9OycsXHJcbiAgICAgIHZlcnNpb246IDEsXHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBsYztcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbGMgPSBuZXcgbHMuTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uKGNyZWF0ZVNweUNvbm5lY3Rpb24oKSwgbmV3IE51bGxMb2dnZXIoKSk7XHJcbiAgICAgIHNpbm9uLnN0dWIobGMsICdfc2VuZE5vdGlmaWNhdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2V4aXQgc2VuZHMgbm90aWZpY2F0aW9uJywgKCkgPT4ge1xyXG4gICAgICBsYy5leGl0KCk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnZXhpdCcpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzLmxlbmd0aCkuZXF1YWxzKDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2luaXRpYWxpemVkIHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcclxuICAgICAgbGMuaW5pdGlhbGl6ZWQoKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCdpbml0aWFsaXplZCcpO1xyXG4gICAgICBjb25zdCBleHBlY3RlZDogbHMuSW5pdGlhbGl6ZWRQYXJhbXMgPSB7fTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkudG8uZGVlcC5lcXVhbChleHBlY3RlZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGlkQ2hhbmdlQ29uZmlndXJhdGlvbiBzZW5kcyBub3RpZmljYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRGlkQ2hhbmdlQ29uZmlndXJhdGlvblBhcmFtcyA9IHtcclxuICAgICAgICBzZXR0aW5nczoge2E6IHtiOiAnYyd9fSxcclxuICAgICAgfTtcclxuICAgICAgbGMuZGlkQ2hhbmdlQ29uZmlndXJhdGlvbihwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3dvcmtzcGFjZS9kaWRDaGFuZ2VDb25maWd1cmF0aW9uJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RpZE9wZW5UZXh0RG9jdW1lbnQgc2VuZHMgbm90aWZpY2F0aW9uJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRpZE9wZW5UZXh0RG9jdW1lbnRQYXJhbXMgPSB7XHJcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRJdGVtLFxyXG4gICAgICB9O1xyXG4gICAgICBsYy5kaWRPcGVuVGV4dERvY3VtZW50KHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RpZE9wZW4nKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGlkQ2hhbmdlVGV4dERvY3VtZW50IHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5EaWRDaGFuZ2VUZXh0RG9jdW1lbnRQYXJhbXMgPSB7XHJcbiAgICAgICAgdGV4dERvY3VtZW50OiB2ZXJzaW9uZWRUZXh0RG9jdW1lbnRJZGVudGlmaWVyLFxyXG4gICAgICAgIGNvbnRlbnRDaGFuZ2VzOiBbXSxcclxuICAgICAgfTtcclxuICAgICAgbGMuZGlkQ2hhbmdlVGV4dERvY3VtZW50KHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RpZENoYW5nZScpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkaWRDbG9zZVRleHREb2N1bWVudCBzZW5kcyBub3RpZmljYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRGlkQ2xvc2VUZXh0RG9jdW1lbnRQYXJhbXMgPSB7XHJcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRJdGVtLFxyXG4gICAgICB9O1xyXG4gICAgICBsYy5kaWRDbG9zZVRleHREb2N1bWVudChwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9kaWRDbG9zZScpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkaWRTYXZlVGV4dERvY3VtZW50IHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5EaWRTYXZlVGV4dERvY3VtZW50UGFyYW1zID0ge1xyXG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50SXRlbSxcclxuICAgICAgfTtcclxuICAgICAgbGMuZGlkU2F2ZVRleHREb2N1bWVudChwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9kaWRTYXZlJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RpZENoYW5nZVdhdGNoZWRGaWxlcyBzZW5kcyBub3RpZmljYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRGlkQ2hhbmdlV2F0Y2hlZEZpbGVzUGFyYW1zID0ge2NoYW5nZXM6IFtdfTtcclxuICAgICAgbGMuZGlkQ2hhbmdlV2F0Y2hlZEZpbGVzKHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnd29ya3NwYWNlL2RpZENoYW5nZVdhdGNoZWRGaWxlcycpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnbm90aWZpY2F0aW9uIG1ldGhvZHMnLCAoKSA9PiB7XHJcbiAgICBsZXQgbGM7XHJcbiAgICBjb25zdCBldmVudE1hcCA9IHt9O1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBsYyA9IG5ldyBscy5MYW5ndWFnZUNsaWVudENvbm5lY3Rpb24oY3JlYXRlU3B5Q29ubmVjdGlvbigpLCBuZXcgTnVsbExvZ2dlcigpKTtcclxuICAgICAgc2lub24uc3R1YihsYywgJ19vbk5vdGlmaWNhdGlvbicpLmNhbGxzRmFrZSgobWVzc2FnZSwgY2FsbGJhY2spID0+IHtcclxuICAgICAgICBldmVudE1hcFttZXNzYWdlLm1ldGhvZF0gPSBjYWxsYmFjaztcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnb25TaG93TWVzc2FnZSBjYWxscyBiYWNrIG9uIHdpbmRvdy9zaG93TWVzc2FnZScsICgpID0+IHtcclxuICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xyXG4gICAgICBsYy5vblNob3dNZXNzYWdlKCgpID0+IHtcclxuICAgICAgICBjYWxsZWQgPSB0cnVlO1xyXG4gICAgICB9KTtcclxuICAgICAgZXZlbnRNYXBbJ3dpbmRvdy9zaG93TWVzc2FnZSddKCk7XHJcbiAgICAgIGV4cGVjdChjYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl19