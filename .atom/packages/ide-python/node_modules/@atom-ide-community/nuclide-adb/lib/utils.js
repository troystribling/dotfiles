"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getAdbServiceByNuclideUri = getAdbServiceByNuclideUri;

var _nuclideUri = _interopRequireDefault(require("@atom-ide-community/nuclide-commons/nuclideUri"));

var AdbServiceLocal = _interopRequireWildcard(require("./AdbService"));

var _nullthrows = _interopRequireDefault(require("nullthrows"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
let rpcService;
atom.packages.serviceHub.consume('nuclide-rpc-services', '0.0.0', provider => {
  rpcService = provider;
});

function getAdbServiceByNuclideUri(uri) {
  if (rpcService == null && !_nuclideUri.default.isRemote(uri)) {
    return AdbServiceLocal;
  } // nuclide-rpc-services should be available at this point.
  // If it isn't, throw an error.


  return (0, _nullthrows.default)(rpcService).getServiceByNuclideUri('AdbService', uri);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL251Y2xpZGUvbnVjbGlkZS1hZGIvbGliL3V0aWxzLmpzIl0sIm5hbWVzIjpbInJwY1NlcnZpY2UiLCJhdG9tIiwicGFja2FnZXMiLCJzZXJ2aWNlSHViIiwiY29uc3VtZSIsInByb3ZpZGVyIiwiZ2V0QWRiU2VydmljZUJ5TnVjbGlkZVVyaSIsInVyaSIsIm51Y2xpZGVVcmkiLCJpc1JlbW90ZSIsIkFkYlNlcnZpY2VMb2NhbCIsImdldFNlcnZpY2VCeU51Y2xpZGVVcmkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFjQTs7QUFHQTs7QUFDQTs7Ozs7Ozs7QUFsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVBLElBQUlBLFVBQUo7QUFDQUMsSUFBSSxDQUFDQyxRQUFMLENBQWNDLFVBQWQsQ0FBeUJDLE9BQXpCLENBQWlDLHNCQUFqQyxFQUF5RCxPQUF6RCxFQUFrRUMsUUFBUSxJQUFJO0FBQzVFTCxFQUFBQSxVQUFVLEdBQUdLLFFBQWI7QUFDRCxDQUZEOztBQUlPLFNBQVNDLHlCQUFULENBQW1DQyxHQUFuQyxFQUFnRTtBQUNyRSxNQUFJUCxVQUFVLElBQUksSUFBZCxJQUFzQixDQUFDUSxvQkFBV0MsUUFBWCxDQUFvQkYsR0FBcEIsQ0FBM0IsRUFBcUQ7QUFDbkQsV0FBT0csZUFBUDtBQUNELEdBSG9FLENBSXJFO0FBQ0E7OztBQUNBLFNBQU8seUJBQVdWLFVBQVgsRUFBdUJXLHNCQUF2QixDQUE4QyxZQUE5QyxFQUE0REosR0FBNUQsQ0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxyXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcclxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XHJcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxyXG4gKlxyXG4gKiBAZmxvd1xyXG4gKiBAZm9ybWF0XHJcbiAqL1xyXG5cclxuaW1wb3J0IHR5cGUge051Y2xpZGVVcml9IGZyb20gJ0BhdG9tLWlkZS1jb21tdW5pdHkvbnVjbGlkZS1jb21tb25zL251Y2xpZGVVcmknO1xyXG5cclxuaW1wb3J0IG51Y2xpZGVVcmkgZnJvbSAnQGF0b20taWRlLWNvbW11bml0eS9udWNsaWRlLWNvbW1vbnMvbnVjbGlkZVVyaSc7XHJcbmltcG9ydCB0eXBlb2YgKiBhcyBBZGJTZXJ2aWNlIGZyb20gJy4vQWRiU2VydmljZSc7XHJcblxyXG5pbXBvcnQgKiBhcyBBZGJTZXJ2aWNlTG9jYWwgZnJvbSAnLi9BZGJTZXJ2aWNlJztcclxuaW1wb3J0IG51bGx0aHJvd3MgZnJvbSAnbnVsbHRocm93cyc7XHJcblxyXG5sZXQgcnBjU2VydmljZTogP251Y2xpZGUkUnBjU2VydmljZTtcclxuYXRvbS5wYWNrYWdlcy5zZXJ2aWNlSHViLmNvbnN1bWUoJ251Y2xpZGUtcnBjLXNlcnZpY2VzJywgJzAuMC4wJywgcHJvdmlkZXIgPT4ge1xyXG4gIHJwY1NlcnZpY2UgPSBwcm92aWRlcjtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRiU2VydmljZUJ5TnVjbGlkZVVyaSh1cmk6IE51Y2xpZGVVcmkpOiBBZGJTZXJ2aWNlIHtcclxuICBpZiAocnBjU2VydmljZSA9PSBudWxsICYmICFudWNsaWRlVXJpLmlzUmVtb3RlKHVyaSkpIHtcclxuICAgIHJldHVybiBBZGJTZXJ2aWNlTG9jYWw7XHJcbiAgfVxyXG4gIC8vIG51Y2xpZGUtcnBjLXNlcnZpY2VzIHNob3VsZCBiZSBhdmFpbGFibGUgYXQgdGhpcyBwb2ludC5cclxuICAvLyBJZiBpdCBpc24ndCwgdGhyb3cgYW4gZXJyb3IuXHJcbiAgcmV0dXJuIG51bGx0aHJvd3MocnBjU2VydmljZSkuZ2V0U2VydmljZUJ5TnVjbGlkZVVyaSgnQWRiU2VydmljZScsIHVyaSk7XHJcbn1cclxuIl19