"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = consumeFirstProvider;

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

/**
 * The module formerly known as "service-hub-plus". Provides a workaround for
 * https://github.com/atom/service-hub/issues/6
 */
function consumeFirstProvider(keyPath, version = '0.0.0') {
  return new Promise((resolve, reject) => {
    const subscription = atom.packages.serviceHub.consume(keyPath, version, provider => {
      process.nextTick(() => {
        resolve(provider);
        subscription.dispose();
      });
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zLWF0b20vY29uc3VtZUZpcnN0UHJvdmlkZXIuanMiXSwibmFtZXMiOlsiY29uc3VtZUZpcnN0UHJvdmlkZXIiLCJrZXlQYXRoIiwidmVyc2lvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic3Vic2NyaXB0aW9uIiwiYXRvbSIsInBhY2thZ2VzIiwic2VydmljZUh1YiIsImNvbnN1bWUiLCJwcm92aWRlciIsInByb2Nlc3MiLCJuZXh0VGljayIsImRpc3Bvc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRWUsU0FBU0Esb0JBQVQsQ0FDYkMsT0FEYSxFQUViQyxPQUFlLEdBQUcsT0FGTCxFQUdDO0FBQ2QsU0FBTyxJQUFJQyxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQ3RDLFVBQU1DLFlBQVksR0FBR0MsSUFBSSxDQUFDQyxRQUFMLENBQWNDLFVBQWQsQ0FBeUJDLE9BQXpCLENBQ25CVCxPQURtQixFQUVuQkMsT0FGbUIsRUFHbkJTLFFBQVEsSUFBSTtBQUNWQyxNQUFBQSxPQUFPLENBQUNDLFFBQVIsQ0FBaUIsTUFBTTtBQUNyQlQsUUFBQUEsT0FBTyxDQUFDTyxRQUFELENBQVA7QUFDQUwsUUFBQUEsWUFBWSxDQUFDUSxPQUFiO0FBQ0QsT0FIRDtBQUlELEtBUmtCLENBQXJCO0FBVUQsR0FYTSxDQUFQO0FBWUQiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXHJcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxyXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcclxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXHJcbiAqXHJcbiAqIEBmbG93XHJcbiAqIEBmb3JtYXRcclxuICovXHJcblxyXG4vKipcclxuICogVGhlIG1vZHVsZSBmb3JtZXJseSBrbm93biBhcyBcInNlcnZpY2UtaHViLXBsdXNcIi4gUHJvdmlkZXMgYSB3b3JrYXJvdW5kIGZvclxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYXRvbS9zZXJ2aWNlLWh1Yi9pc3N1ZXMvNlxyXG4gKi9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbnN1bWVGaXJzdFByb3ZpZGVyKFxyXG4gIGtleVBhdGg6IHN0cmluZyxcclxuICB2ZXJzaW9uOiBzdHJpbmcgPSAnMC4wLjAnLFxyXG4pOiBQcm9taXNlPGFueT4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhdG9tLnBhY2thZ2VzLnNlcnZpY2VIdWIuY29uc3VtZShcclxuICAgICAga2V5UGF0aCxcclxuICAgICAgdmVyc2lvbixcclxuICAgICAgcHJvdmlkZXIgPT4ge1xyXG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZShwcm92aWRlcik7XHJcbiAgICAgICAgICBzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgKTtcclxuICB9KTtcclxufVxyXG4iXX0=