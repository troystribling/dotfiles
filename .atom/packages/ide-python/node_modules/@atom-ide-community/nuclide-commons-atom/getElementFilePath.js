"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getElementFilePath;

var _textEditor = require("./text-editor");

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
function getElementFilePath(element, fallbackToActiveTextEditor = false) {
  let el = element;

  while (el != null) {
    if (el.dataset != null && el.dataset.path != null) {
      return el.dataset.path;
    } // $FlowFixMe(>=0.68.0) Flow suppress (T27187857)


    if (typeof el.getModel === 'function') {
      const model = el.getModel();

      if ((0, _textEditor.isValidTextEditor)(model)) {
        const path = model.getPath();

        if (path != null) {
          return path;
        }
      }
    }

    el = el.parentElement;
  }

  if (fallbackToActiveTextEditor) {
    const editor = atom.workspace.getActiveTextEditor();

    if (editor != null) {
      return editor.getPath();
    }
  }

  return null;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zLWF0b20vZ2V0RWxlbWVudEZpbGVQYXRoLmpzIl0sIm5hbWVzIjpbImdldEVsZW1lbnRGaWxlUGF0aCIsImVsZW1lbnQiLCJmYWxsYmFja1RvQWN0aXZlVGV4dEVkaXRvciIsImVsIiwiZGF0YXNldCIsInBhdGgiLCJnZXRNb2RlbCIsIm1vZGVsIiwiZ2V0UGF0aCIsInBhcmVudEVsZW1lbnQiLCJlZGl0b3IiLCJhdG9tIiwid29ya3NwYWNlIiwiZ2V0QWN0aXZlVGV4dEVkaXRvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQWNBOztBQWRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNZSxTQUFTQSxrQkFBVCxDQUNiQyxPQURhLEVBRWJDLDBCQUFtQyxHQUFHLEtBRnpCLEVBR0E7QUFDYixNQUFJQyxFQUFFLEdBQUdGLE9BQVQ7O0FBQ0EsU0FBT0UsRUFBRSxJQUFJLElBQWIsRUFBbUI7QUFDakIsUUFBSUEsRUFBRSxDQUFDQyxPQUFILElBQWMsSUFBZCxJQUFzQkQsRUFBRSxDQUFDQyxPQUFILENBQVdDLElBQVgsSUFBbUIsSUFBN0MsRUFBbUQ7QUFDakQsYUFBUUYsRUFBRSxDQUFDQyxPQUFKLENBQWtCQyxJQUF6QjtBQUNELEtBSGdCLENBSWpCOzs7QUFDQSxRQUFJLE9BQU9GLEVBQUUsQ0FBQ0csUUFBVixLQUF1QixVQUEzQixFQUF1QztBQUNyQyxZQUFNQyxLQUFLLEdBQUdKLEVBQUUsQ0FBQ0csUUFBSCxFQUFkOztBQUNBLFVBQUksbUNBQWtCQyxLQUFsQixDQUFKLEVBQThCO0FBQzVCLGNBQU1GLElBQUksR0FBR0UsS0FBSyxDQUFDQyxPQUFOLEVBQWI7O0FBQ0EsWUFBSUgsSUFBSSxJQUFJLElBQVosRUFBa0I7QUFDaEIsaUJBQU9BLElBQVA7QUFDRDtBQUNGO0FBQ0Y7O0FBQ0RGLElBQUFBLEVBQUUsR0FBR0EsRUFBRSxDQUFDTSxhQUFSO0FBQ0Q7O0FBQ0QsTUFBSVAsMEJBQUosRUFBZ0M7QUFDOUIsVUFBTVEsTUFBTSxHQUFHQyxJQUFJLENBQUNDLFNBQUwsQ0FBZUMsbUJBQWYsRUFBZjs7QUFDQSxRQUFJSCxNQUFNLElBQUksSUFBZCxFQUFvQjtBQUNsQixhQUFPQSxNQUFNLENBQUNGLE9BQVAsRUFBUDtBQUNEO0FBQ0Y7O0FBQ0QsU0FBTyxJQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXHJcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxyXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcclxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXHJcbiAqXHJcbiAqIEBmbG93XHJcbiAqIEBmb3JtYXRcclxuICovXHJcblxyXG5pbXBvcnQgdHlwZSB7TnVjbGlkZVVyaX0gZnJvbSAnQGF0b20taWRlLWNvbW11bml0eS9udWNsaWRlLWNvbW1vbnMvbnVjbGlkZVVyaSc7XHJcblxyXG5pbXBvcnQge2lzVmFsaWRUZXh0RWRpdG9yfSBmcm9tICcuL3RleHQtZWRpdG9yJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEVsZW1lbnRGaWxlUGF0aChcclxuICBlbGVtZW50OiA/SFRNTEVsZW1lbnQsXHJcbiAgZmFsbGJhY2tUb0FjdGl2ZVRleHRFZGl0b3I6IGJvb2xlYW4gPSBmYWxzZSxcclxuKTogP051Y2xpZGVVcmkge1xyXG4gIGxldCBlbCA9IGVsZW1lbnQ7XHJcbiAgd2hpbGUgKGVsICE9IG51bGwpIHtcclxuICAgIGlmIChlbC5kYXRhc2V0ICE9IG51bGwgJiYgZWwuZGF0YXNldC5wYXRoICE9IG51bGwpIHtcclxuICAgICAgcmV0dXJuIChlbC5kYXRhc2V0OiBhbnkpLnBhdGg7XHJcbiAgICB9XHJcbiAgICAvLyAkRmxvd0ZpeE1lKD49MC42OC4wKSBGbG93IHN1cHByZXNzIChUMjcxODc4NTcpXHJcbiAgICBpZiAodHlwZW9mIGVsLmdldE1vZGVsID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGNvbnN0IG1vZGVsID0gZWwuZ2V0TW9kZWwoKTtcclxuICAgICAgaWYgKGlzVmFsaWRUZXh0RWRpdG9yKG1vZGVsKSkge1xyXG4gICAgICAgIGNvbnN0IHBhdGggPSBtb2RlbC5nZXRQYXRoKCk7XHJcbiAgICAgICAgaWYgKHBhdGggIT0gbnVsbCkge1xyXG4gICAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XHJcbiAgfVxyXG4gIGlmIChmYWxsYmFja1RvQWN0aXZlVGV4dEVkaXRvcikge1xyXG4gICAgY29uc3QgZWRpdG9yID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpO1xyXG4gICAgaWYgKGVkaXRvciAhPSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBlZGl0b3IuZ2V0UGF0aCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG4iXX0=