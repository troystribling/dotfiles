"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _escapeStringRegexp = _interopRequireDefault(require("escape-string-regexp"));

var React = _interopRequireWildcard(require("react"));

var _UniversalDisposable = _interopRequireDefault(require("@atom-ide-community/nuclide-commons/UniversalDisposable"));

var _AtomInput = require("./AtomInput");

var _Button = require("./Button");

var _ButtonGroup = require("./ButtonGroup");

var _AutoSizer = _interopRequireDefault(require("react-virtualized/dist/commonjs/AutoSizer"));

var _InfiniteLoader = _interopRequireDefault(require("react-virtualized/dist/commonjs/InfiniteLoader"));

var _List = _interopRequireDefault(require("react-virtualized/dist/commonjs/List"));

var _CellMeasurer = require("react-virtualized/dist/commonjs/CellMeasurer");

var _FileResultsComponent = _interopRequireDefault(require("./FileResultsComponent"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

/* global performance, requestAnimationFrame */
// no-unused-state rule does not understand usages in callback-style setState.

/* eslint-disable react/no-unused-state */
const RENDER_BUFFER = 10;
const OPEN_ALL_PROMPT_LIMIT = 25;

/**
 * Uses react-virtualized to display a lazily-rendered view of the search results.
 */
class ScrollableResults extends React.Component {
  // _loadMoreRows may be called multiple times by different parts of the
  // render lifecycle. Share it as a variable rather than in `state` so that
  // _loadMoreRows can be idempotent.
  constructor(_props) {
    super(_props);
    this.disposables = void 0;
    this._listRef = void 0;
    this._measurementCache = void 0;
    this._loaderRef = void 0;
    this._loadedFiles = [];
    this._greppedIndex = 0;
    this._shownResults = [];

    this._onToggle = (path, index) => {
      this.setState(({
        collapsed
      }) => {
        const newCollapsed = new Map(collapsed);
        newCollapsed.set(path, !collapsed.get(path));
        return {
          collapsed: newCollapsed
        };
      }, () => this._remeasure(index));
    };

    this._onGrepChange = grep => {
      // Smart-case: make it case sensitive if a capital letter is supplied.
      const flags = grep.toLocaleLowerCase() === grep ? 'i' : undefined;
      let grepRe = null;

      try {
        grepRe = grep === '' ? null : new RegExp(grep, flags);
      } catch (e) {
        grepRe = new RegExp((0, _escapeStringRegexp.default)(grep), flags);
      }

      this._greppedIndex = 0;
      this._shownResults = grepRe == null ? this._loadedFiles : [];
      this.setState({
        grep: grepRe
      }, () => this._refreshLoader());
    };

    this._invertGrep = () => {
      this._greppedIndex = 0;
      this._shownResults = this.state.grep == null ? this._loadedFiles : [];
      this.setState(({
        grepInvert
      }) => ({
        grepInvert: !grepInvert
      }), () => this._refreshLoader());
    };

    this._collapseAll = () => {
      this.setState({
        collapsed: new Map(this._loadedFiles.map(f => [f.path, true])),
        collapseNew: true
      }, () => this._remeasure());
    };

    this._expandAll = () => {
      // This can only expand the height, so don't reflow.
      this.setState({
        collapsed: new Map(),
        collapseNew: false
      }, () => this._remeasure());
    };

    this._openAll = async () => {
      await this._loadUpToIndex(this.props.fileResultsCount - 1);

      this._openAllLoadedResults();
    };

    this._loadUpToIndex = async untilIndex => {
      const currentLoaded = this._loadedFiles.length;
      const newResults = await this.props.loadResults(currentLoaded, untilIndex - currentLoaded + 1);

      if (this._loadedFiles.length !== currentLoaded) {
        // It's possible that another call to _loadUpToIndex completed first
        // if `_openAll` competes with  `_loadMoreRows`.
        // In this case just retry the request.
        return this._loadUpToIndex(untilIndex);
      } else {
        this._loadedFiles.push(...newResults);

        this.setState(({
          collapsed,
          collapseNew
        }) => ({
          collapsed: newResults.reduce((accumulator, newResult) => accumulator.set(newResult.path, collapseNew), new Map(collapsed))
        }));
        return newResults;
      }
    };

    this._openAllLoadedResults = () => {
      const files = this._loadedFiles.map(file => {
        if (this.state.grep == null) {
          return {
            path: file.path,
            row: file.groups[0].matches[0].start.row,
            column: file.groups[0].matches[0].start.column
          };
        }

        const grepResults = file.applyGrep(this.state.grep, this.state.grepInvert);

        if (grepResults == null) {
          return null;
        } // Groups may be [] if only the path matched an inverted filter.


        if (grepResults.pathMatch != null || grepResults.groups.length === 0) {
          return {
            path: file.path,
            row: undefined,
            column: undefined
          };
        }

        return {
          path: file.path,
          row: grepResults.groups[0].matches[0].start.row,
          column: grepResults.groups[0].matches[0].start.column
        };
      }).filter(Boolean);

      if (files.length > OPEN_ALL_PROMPT_LIMIT) {
        if (atom.confirm({
          message: `This will open ${files.length} files. Are you sure?`,
          buttons: ['OK', 'Cancel']
        }) !== 0) {
          return;
        }
      } // Open the first match for every file.


      files.forEach(file => {
        this.props.onClick(file.path, file.row, file.column);
      });
    };

    this._setListRef = list => {
      this._listRef = list;
    };

    this._setLoaderRef = loader => {
      this._loaderRef = loader;
    };

    this._isRowLoaded = ({
      index
    }) => {
      return index < this._shownResults.length;
    };

    this._loadMoreRows = async ({
      stopIndex
    }) => {
      const {
        grep,
        grepInvert
      } = this.state;

      if (grep == null) {
        const newResults = await this._loadUpToIndex(stopIndex);

        this._shownResults.push(...newResults); // Trigger a re-render (since we mutated shownResults directly.)


        this.forceUpdate();
        return;
      }

      const yieldAnimationFrame = async () => {
        await new Promise(requestAnimationFrame); // Due to the 'await' it's possible that another grep started.
        // Return false so that the caller can stop.

        return !this.disposables.disposed && this.state.grep === grep && this.state.grepInvert === grepInvert;
      };

      let startTime = performance.now();

      while (this._greppedIndex < this.props.fileResultsCount && this._shownResults.length < stopIndex + 1) {
        if (this._loadedFiles.length <= this._greppedIndex) {
          // eslint-disable-next-line no-await-in-loop
          await this._loadUpToIndex(this._greppedIndex + RENDER_BUFFER);
        }

        const currentFile = this._loadedFiles[this._greppedIndex];
        const fileResults = currentFile.applyGrep(grep, grepInvert);
        this._greppedIndex++;

        if (fileResults != null) {
          // Copying this list is too expensive, so just mutate it.
          this._shownResults.push(fileResults);
        } // Yield the event loop if we've spent too long grepping results (10ms).


        if (performance.now() - startTime > 10) {
          // eslint-disable-next-line no-await-in-loop
          if (!(await yieldAnimationFrame())) {
            return;
          }

          startTime = performance.now();
        }
      } // Always yield the event loop at least once per loadMoreRows() call.
      // (since InfiniteLoader may end up chaining them.)


      if (!(await yieldAnimationFrame())) {
        return;
      } // Trigger a re-render (since we mutated shownResults directly.)


      this.forceUpdate();
    };

    this._renderRow = props => {
      const {
        key,
        parent,
        index,
        style
      } = props;

      if (!this._isRowLoaded(props)) {
        return null;
      }

      const fileResults = this._shownResults[index];
      return /*#__PURE__*/React.createElement(_CellMeasurer.CellMeasurer, {
        cache: this._measurementCache,
        columnIndex: 0,
        key: key,
        parent: parent,
        rowIndex: index
      }, /*#__PURE__*/React.createElement("div", {
        style: style,
        className: "scrollable-search-results-item"
      }, index === 0 && /*#__PURE__*/React.createElement("div", {
        className: "scrollable-search-results-summary"
      }, this._getSummaryText()), /*#__PURE__*/React.createElement(_FileResultsComponent.default, {
        fileResults: fileResults,
        collapsed: this.state.collapsed.get(fileResults.path) === true,
        onClick: this.props.onClick,
        onToggle: path => this._onToggle(path, index)
      })));
    };

    this.state = {
      collapsed: new Map(),
      collapseNew: false,
      grep: null,
      grepInvert: false
    };
    this.disposables = new _UniversalDisposable.default();
    this._measurementCache = new _CellMeasurer.CellMeasurerCache();
  }

  componentWillUnmount() {
    this.disposables.dispose();
  }

  _getSummaryText() {
    if (this.state.grep != null) {
      return `Only showing results ${this.state.grepInvert ? 'not' : ''} matching regex: ` + this.state.grep.source;
    }

    if (this.props.exceededByteLimit) {
      return /*#__PURE__*/React.createElement("span", {
        className: "warning"
      }, "Results exceeded byte-size limit. Only displaying the first", ' ', this.props.count, " results.");
    }

    return `${this.props.count} result(s) found in ${this.props.fileResultsCount} file(s).`;
  }

  _refreshLoader() {
    if (this._loaderRef != null) {
      this._loaderRef.resetLoadMoreRowsCache(true);
    }

    this._remeasure();
  }

  _remeasure(index) {
    if (this._listRef != null) {
      this._listRef.recomputeRowHeights(index);
    }

    if (index == null) {
      this._measurementCache.clearAll();
    } else {
      this._measurementCache.clear(index);
    }
  }

  _getRowCount() {
    if (this.state.grep == null) {
      return this.props.fileResultsCount;
    } // We don't know how many results there will be.
    // Tell InfiniteLoader we have RENDER_BUFFER more, so that
    // it will try to load at least that many more rows.


    return this._shownResults.length + RENDER_BUFFER;
  }

  render() {
    const rowCount = this._getRowCount();

    return /*#__PURE__*/React.createElement("div", {
      className: "scrollable-search-results-wrapper"
    }, /*#__PURE__*/React.createElement("div", {
      className: "scrollable-search-results-controls"
    }, this.props.controlsVisible ? /*#__PURE__*/React.createElement("div", {
      className: "scrollable-search-results-controls-form"
    }, /*#__PURE__*/React.createElement("div", {
      style: {
        flex: 1
      },
      className: "scrollable-controls-block"
    }, /*#__PURE__*/React.createElement("div", {
      className: "scrollable-controls-label"
    }, "Filter:"), /*#__PURE__*/React.createElement(_AtomInput.AtomInput, {
      autofocus: true,
      size: "sm",
      initialValue: this.state.grep != null ? this.state.grep.source : '',
      onDidChange: this._onGrepChange,
      placeholderText: "Additional grep filter..."
    }), /*#__PURE__*/React.createElement(_Button.Button, {
      className: "scrollable-search-results-controls-button",
      selected: this.state.grepInvert,
      onClick: this._invertGrep
    }, "Invert")), /*#__PURE__*/React.createElement("div", {
      className: "scrollable-controls-block"
    }, /*#__PURE__*/React.createElement(_ButtonGroup.ButtonGroup, null, /*#__PURE__*/React.createElement(_Button.Button, {
      onClick: this._collapseAll
    }, "Collapse All"), /*#__PURE__*/React.createElement(_Button.Button, {
      onClick: this._expandAll
    }, "Expand All")), /*#__PURE__*/React.createElement(_Button.Button, {
      className: "scrollable-search-results-controls-button",
      onClick: this._openAll
    }, "Open All"), this.props.extraControls != null ? this.props.extraControls(this.state) : null), /*#__PURE__*/React.createElement(_Button.Button, {
      className: "scrollable-search-results-controls-toggle icon icon-chevron-up",
      onClick: this.props.onToggleControls,
      tooltip: {
        title: 'Hide Controls',
        delay: 100
      }
    })) : /*#__PURE__*/React.createElement(_Button.Button, {
      className: "scrollable-search-results-controls-toggle-hidden icon icon-chevron-down",
      onClick: this.props.onToggleControls
    })), /*#__PURE__*/React.createElement("div", {
      // Magic incantations to make interior text copyable.
      className: "scrollable-search-results native-key-bindings",
      tabIndex: -1,
      style: {
        WebkitUserSelect: 'text'
      }
    }, /*#__PURE__*/React.createElement(_InfiniteLoader.default, {
      ref: this._setLoaderRef,
      isRowLoaded: this._isRowLoaded,
      loadMoreRows: this._loadMoreRows,
      rowCount: rowCount
    }, ({
      onRowsRendered,
      registerChild
    }) => /*#__PURE__*/React.createElement(_AutoSizer.default, null, ({
      width,
      height
    }) => /*#__PURE__*/React.createElement(_List.default // eslint-disable-next-line nuclide-internal/jsx-simple-callback-refs
    , {
      ref: list => {
        this._setListRef(list);

        registerChild(list);
      },
      onRowsRendered: onRowsRendered,
      overscanRowCount: RENDER_BUFFER,
      rowCount: rowCount,
      rowHeight: this._measurementCache.rowHeight,
      rowRenderer: this._renderRow,
      width: width,
      height: height
    })))));
  }

}

exports.default = ScrollableResults;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zLXVpL1Njcm9sbGFibGVSZXN1bHRzLmpzIl0sIm5hbWVzIjpbIlJFTkRFUl9CVUZGRVIiLCJPUEVOX0FMTF9QUk9NUFRfTElNSVQiLCJTY3JvbGxhYmxlUmVzdWx0cyIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsImRpc3Bvc2FibGVzIiwiX2xpc3RSZWYiLCJfbWVhc3VyZW1lbnRDYWNoZSIsIl9sb2FkZXJSZWYiLCJfbG9hZGVkRmlsZXMiLCJfZ3JlcHBlZEluZGV4IiwiX3Nob3duUmVzdWx0cyIsIl9vblRvZ2dsZSIsInBhdGgiLCJpbmRleCIsInNldFN0YXRlIiwiY29sbGFwc2VkIiwibmV3Q29sbGFwc2VkIiwiTWFwIiwic2V0IiwiZ2V0IiwiX3JlbWVhc3VyZSIsIl9vbkdyZXBDaGFuZ2UiLCJncmVwIiwiZmxhZ3MiLCJ0b0xvY2FsZUxvd2VyQ2FzZSIsInVuZGVmaW5lZCIsImdyZXBSZSIsIlJlZ0V4cCIsImUiLCJfcmVmcmVzaExvYWRlciIsIl9pbnZlcnRHcmVwIiwic3RhdGUiLCJncmVwSW52ZXJ0IiwiX2NvbGxhcHNlQWxsIiwibWFwIiwiZiIsImNvbGxhcHNlTmV3IiwiX2V4cGFuZEFsbCIsIl9vcGVuQWxsIiwiX2xvYWRVcFRvSW5kZXgiLCJmaWxlUmVzdWx0c0NvdW50IiwiX29wZW5BbGxMb2FkZWRSZXN1bHRzIiwidW50aWxJbmRleCIsImN1cnJlbnRMb2FkZWQiLCJsZW5ndGgiLCJuZXdSZXN1bHRzIiwibG9hZFJlc3VsdHMiLCJwdXNoIiwicmVkdWNlIiwiYWNjdW11bGF0b3IiLCJuZXdSZXN1bHQiLCJmaWxlcyIsImZpbGUiLCJyb3ciLCJncm91cHMiLCJtYXRjaGVzIiwic3RhcnQiLCJjb2x1bW4iLCJncmVwUmVzdWx0cyIsImFwcGx5R3JlcCIsInBhdGhNYXRjaCIsImZpbHRlciIsIkJvb2xlYW4iLCJhdG9tIiwiY29uZmlybSIsIm1lc3NhZ2UiLCJidXR0b25zIiwiZm9yRWFjaCIsIm9uQ2xpY2siLCJfc2V0TGlzdFJlZiIsImxpc3QiLCJfc2V0TG9hZGVyUmVmIiwibG9hZGVyIiwiX2lzUm93TG9hZGVkIiwiX2xvYWRNb3JlUm93cyIsInN0b3BJbmRleCIsImZvcmNlVXBkYXRlIiwieWllbGRBbmltYXRpb25GcmFtZSIsIlByb21pc2UiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJkaXNwb3NlZCIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwiY3VycmVudEZpbGUiLCJmaWxlUmVzdWx0cyIsIl9yZW5kZXJSb3ciLCJrZXkiLCJwYXJlbnQiLCJzdHlsZSIsIl9nZXRTdW1tYXJ5VGV4dCIsIlVuaXZlcnNhbERpc3Bvc2FibGUiLCJDZWxsTWVhc3VyZXJDYWNoZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiZGlzcG9zZSIsInNvdXJjZSIsImV4Y2VlZGVkQnl0ZUxpbWl0IiwiY291bnQiLCJyZXNldExvYWRNb3JlUm93c0NhY2hlIiwicmVjb21wdXRlUm93SGVpZ2h0cyIsImNsZWFyQWxsIiwiY2xlYXIiLCJfZ2V0Um93Q291bnQiLCJyZW5kZXIiLCJyb3dDb3VudCIsImNvbnRyb2xzVmlzaWJsZSIsImZsZXgiLCJleHRyYUNvbnRyb2xzIiwib25Ub2dnbGVDb250cm9scyIsInRpdGxlIiwiZGVsYXkiLCJXZWJraXRVc2VyU2VsZWN0Iiwib25Sb3dzUmVuZGVyZWQiLCJyZWdpc3RlckNoaWxkIiwid2lkdGgiLCJoZWlnaHQiLCJyb3dIZWlnaHQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFnQkE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBSUE7Ozs7Ozs7O0FBN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFtQkE7O0FBQ0E7QUFFQSxNQUFNQSxhQUFhLEdBQUcsRUFBdEI7QUFDQSxNQUFNQyxxQkFBcUIsR0FB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bkgsYUFQcEI7QUFRRSxNQUFBLFFBQVEsRUFBRTJHLFFBUlo7QUFTRSxNQUFBLFNBQVMsRUFBRSxLQUFLbEcsaUJBQUwsQ0FBdUI4RyxTQVRwQztBQVVFLE1BQUEsV0FBVyxFQUFFLEtBQUs5QixVQVZwQjtBQVdFLE1BQUEsS0FBSyxFQUFFNEIsS0FYVDtBQVlFLE1BQUEsTUFBTSxFQUFFQztBQVpWLE1BRkosQ0FOSixDQUxGLENBakRGLENBREY7QUFvRkQ7O0FBMVkwRSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cclxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXHJcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxyXG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cclxuICpcclxuICogQGZsb3dcclxuICogQGZvcm1hdFxyXG4gKi9cclxuXHJcbi8qIGdsb2JhbCBwZXJmb3JtYW5jZSwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lICovXHJcblxyXG5pbXBvcnQgdHlwZSB7RmlsZVJlc3VsdHN9IGZyb20gJ0BhdG9tLWlkZS1jb21tdW5pdHkvbnVjbGlkZS1jb21tb25zL0ZpbGVSZXN1bHRzJztcclxuXHJcbmltcG9ydCBlc2NhcGVTdHJpbmdSZWdleHAgZnJvbSAnZXNjYXBlLXN0cmluZy1yZWdleHAnO1xyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBVbml2ZXJzYWxEaXNwb3NhYmxlIGZyb20gJ0BhdG9tLWlkZS1jb21tdW5pdHkvbnVjbGlkZS1jb21tb25zL1VuaXZlcnNhbERpc3Bvc2FibGUnO1xyXG5pbXBvcnQge0F0b21JbnB1dH0gZnJvbSAnLi9BdG9tSW5wdXQnO1xyXG5pbXBvcnQge0J1dHRvbn0gZnJvbSAnLi9CdXR0b24nO1xyXG5pbXBvcnQge0J1dHRvbkdyb3VwfSBmcm9tICcuL0J1dHRvbkdyb3VwJztcclxuaW1wb3J0IEF1dG9TaXplciBmcm9tICdyZWFjdC12aXJ0dWFsaXplZC9kaXN0L2NvbW1vbmpzL0F1dG9TaXplcic7XHJcbmltcG9ydCBJbmZpbml0ZUxvYWRlciBmcm9tICdyZWFjdC12aXJ0dWFsaXplZC9kaXN0L2NvbW1vbmpzL0luZmluaXRlTG9hZGVyJztcclxuaW1wb3J0IExpc3QgZnJvbSAncmVhY3QtdmlydHVhbGl6ZWQvZGlzdC9jb21tb25qcy9MaXN0JztcclxuaW1wb3J0IHtcclxuICBDZWxsTWVhc3VyZXIsXHJcbiAgQ2VsbE1lYXN1cmVyQ2FjaGUsXHJcbn0gZnJvbSAncmVhY3QtdmlydHVhbGl6ZWQvZGlzdC9jb21tb25qcy9DZWxsTWVhc3VyZXInO1xyXG5pbXBvcnQgRmlsZVJlc3VsdHNDb21wb25lbnQgZnJvbSAnLi9GaWxlUmVzdWx0c0NvbXBvbmVudCc7XHJcblxyXG4vLyBuby11bnVzZWQtc3RhdGUgcnVsZSBkb2VzIG5vdCB1bmRlcnN0YW5kIHVzYWdlcyBpbiBjYWxsYmFjay1zdHlsZSBzZXRTdGF0ZS5cclxuLyogZXNsaW50LWRpc2FibGUgcmVhY3Qvbm8tdW51c2VkLXN0YXRlICovXHJcblxyXG5jb25zdCBSRU5ERVJfQlVGRkVSID0gMTA7XHJcbmNvbnN0IE9QRU5fQUxMX1BST01QVF9MSU1JVCA9IDI1O1xyXG5cclxudHlwZSBQcm9wcyA9IHtcclxuICBjb3VudDogbnVtYmVyLFxyXG4gIGZpbGVSZXN1bHRzQ291bnQ6IG51bWJlcixcclxuICBleGNlZWRlZEJ5dGVMaW1pdDogYm9vbGVhbixcclxuICBsb2FkUmVzdWx0czogKG9mZnNldDogbnVtYmVyLCBsaW1pdDogbnVtYmVyKSA9PiBQcm9taXNlPEFycmF5PEZpbGVSZXN1bHRzPj4sXHJcbiAgY29udHJvbHNWaXNpYmxlOiBib29sZWFuLFxyXG4gIG9uQ2xpY2s6IChwYXRoOiBzdHJpbmcsIGxpbmU/OiBudW1iZXIsIGNvbHVtbj86IG51bWJlcikgPT4gbWl4ZWQsXHJcbiAgb25Ub2dnbGVDb250cm9sczogKCkgPT4gbWl4ZWQsXHJcbiAgZXh0cmFDb250cm9scz86IFN0YXRlID0+IFJlYWN0Lk5vZGUsXHJcbn07XHJcblxyXG50eXBlIFN0YXRlID0ge1xyXG4gIGNvbGxhcHNlZDogTWFwPHN0cmluZywgYm9vbGVhbj4sXHJcbiAgY29sbGFwc2VOZXc6IGJvb2xlYW4sXHJcbiAgZ3JlcDogP1JlZ0V4cCxcclxuICBncmVwSW52ZXJ0OiBib29sZWFuLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFVzZXMgcmVhY3QtdmlydHVhbGl6ZWQgdG8gZGlzcGxheSBhIGxhemlseS1yZW5kZXJlZCB2aWV3IG9mIHRoZSBzZWFyY2ggcmVzdWx0cy5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjcm9sbGFibGVSZXN1bHRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gIGRpc3Bvc2FibGVzOiBVbml2ZXJzYWxEaXNwb3NhYmxlO1xyXG4gIF9saXN0UmVmOiA/TGlzdDtcclxuICBfbWVhc3VyZW1lbnRDYWNoZTogQ2VsbE1lYXN1cmVyQ2FjaGU7XHJcbiAgX2xvYWRlclJlZjogP0luZmluaXRlTG9hZGVyO1xyXG4gIF9sb2FkZWRGaWxlczogQXJyYXk8RmlsZVJlc3VsdHM+ID0gW107XHJcblxyXG4gIC8vIF9sb2FkTW9yZVJvd3MgbWF5IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyBieSBkaWZmZXJlbnQgcGFydHMgb2YgdGhlXHJcbiAgLy8gcmVuZGVyIGxpZmVjeWNsZS4gU2hhcmUgaXQgYXMgYSB2YXJpYWJsZSByYXRoZXIgdGhhbiBpbiBgc3RhdGVgIHNvIHRoYXRcclxuICAvLyBfbG9hZE1vcmVSb3dzIGNhbiBiZSBpZGVtcG90ZW50LlxyXG4gIF9ncmVwcGVkSW5kZXg6IG51bWJlciA9IDA7XHJcbiAgX3Nob3duUmVzdWx0czogQXJyYXk8RmlsZVJlc3VsdHM+ID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgY29sbGFwc2VkOiBuZXcgTWFwKCksXHJcbiAgICAgIGNvbGxhcHNlTmV3OiBmYWxzZSxcclxuICAgICAgZ3JlcDogbnVsbCxcclxuICAgICAgZ3JlcEludmVydDogZmFsc2UsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5kaXNwb3NhYmxlcyA9IG5ldyBVbml2ZXJzYWxEaXNwb3NhYmxlKCk7XHJcbiAgICB0aGlzLl9tZWFzdXJlbWVudENhY2hlID0gbmV3IENlbGxNZWFzdXJlckNhY2hlKCk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIHRoaXMuZGlzcG9zYWJsZXMuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX29uVG9nZ2xlID0gKHBhdGg6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgKHtjb2xsYXBzZWR9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3Q29sbGFwc2VkID0gbmV3IE1hcChjb2xsYXBzZWQpO1xyXG4gICAgICAgIG5ld0NvbGxhcHNlZC5zZXQocGF0aCwgIWNvbGxhcHNlZC5nZXQocGF0aCkpO1xyXG4gICAgICAgIHJldHVybiB7Y29sbGFwc2VkOiBuZXdDb2xsYXBzZWR9O1xyXG4gICAgICB9LFxyXG4gICAgICAoKSA9PiB0aGlzLl9yZW1lYXN1cmUoaW5kZXgpLFxyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICBfb25HcmVwQ2hhbmdlID0gKGdyZXA6IHN0cmluZykgPT4ge1xyXG4gICAgLy8gU21hcnQtY2FzZTogbWFrZSBpdCBjYXNlIHNlbnNpdGl2ZSBpZiBhIGNhcGl0YWwgbGV0dGVyIGlzIHN1cHBsaWVkLlxyXG4gICAgY29uc3QgZmxhZ3MgPSBncmVwLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IGdyZXAgPyAnaScgOiB1bmRlZmluZWQ7XHJcbiAgICBsZXQgZ3JlcFJlID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGdyZXBSZSA9IGdyZXAgPT09ICcnID8gbnVsbCA6IG5ldyBSZWdFeHAoZ3JlcCwgZmxhZ3MpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBncmVwUmUgPSBuZXcgUmVnRXhwKGVzY2FwZVN0cmluZ1JlZ2V4cChncmVwKSwgZmxhZ3MpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZ3JlcHBlZEluZGV4ID0gMDtcclxuICAgIHRoaXMuX3Nob3duUmVzdWx0cyA9IGdyZXBSZSA9PSBudWxsID8gdGhpcy5fbG9hZGVkRmlsZXMgOiBbXTtcclxuICAgIHRoaXMuc2V0U3RhdGUoe2dyZXA6IGdyZXBSZX0sICgpID0+IHRoaXMuX3JlZnJlc2hMb2FkZXIoKSk7XHJcbiAgfTtcclxuXHJcbiAgX2ludmVydEdyZXAgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9ncmVwcGVkSW5kZXggPSAwO1xyXG4gICAgdGhpcy5fc2hvd25SZXN1bHRzID0gdGhpcy5zdGF0ZS5ncmVwID09IG51bGwgPyB0aGlzLl9sb2FkZWRGaWxlcyA6IFtdO1xyXG4gICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgKHtncmVwSW52ZXJ0fSkgPT4gKHtncmVwSW52ZXJ0OiAhZ3JlcEludmVydH0pLFxyXG4gICAgICAoKSA9PiB0aGlzLl9yZWZyZXNoTG9hZGVyKCksXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIF9jb2xsYXBzZUFsbCA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgIHtcclxuICAgICAgICBjb2xsYXBzZWQ6IG5ldyBNYXAodGhpcy5fbG9hZGVkRmlsZXMubWFwKGYgPT4gW2YucGF0aCwgdHJ1ZV0pKSxcclxuICAgICAgICBjb2xsYXBzZU5ldzogdHJ1ZSxcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4gdGhpcy5fcmVtZWFzdXJlKCksXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIF9leHBhbmRBbGwgPSAoKSA9PiB7XHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGV4cGFuZCB0aGUgaGVpZ2h0LCBzbyBkb24ndCByZWZsb3cuXHJcbiAgICB0aGlzLnNldFN0YXRlKHtjb2xsYXBzZWQ6IG5ldyBNYXAoKSwgY29sbGFwc2VOZXc6IGZhbHNlfSwgKCkgPT5cclxuICAgICAgdGhpcy5fcmVtZWFzdXJlKCksXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIF9vcGVuQWxsID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgdGhpcy5fbG9hZFVwVG9JbmRleCh0aGlzLnByb3BzLmZpbGVSZXN1bHRzQ291bnQgLSAxKTtcclxuICAgIHRoaXMuX29wZW5BbGxMb2FkZWRSZXN1bHRzKCk7XHJcbiAgfTtcclxuXHJcbiAgX2xvYWRVcFRvSW5kZXggPSBhc3luYyAodW50aWxJbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50TG9hZGVkID0gdGhpcy5fbG9hZGVkRmlsZXMubGVuZ3RoO1xyXG4gICAgY29uc3QgbmV3UmVzdWx0cyA9IGF3YWl0IHRoaXMucHJvcHMubG9hZFJlc3VsdHMoXHJcbiAgICAgIGN1cnJlbnRMb2FkZWQsXHJcbiAgICAgIHVudGlsSW5kZXggLSBjdXJyZW50TG9hZGVkICsgMSxcclxuICAgICk7XHJcbiAgICBpZiAodGhpcy5fbG9hZGVkRmlsZXMubGVuZ3RoICE9PSBjdXJyZW50TG9hZGVkKSB7XHJcbiAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCBhbm90aGVyIGNhbGwgdG8gX2xvYWRVcFRvSW5kZXggY29tcGxldGVkIGZpcnN0XHJcbiAgICAgIC8vIGlmIGBfb3BlbkFsbGAgY29tcGV0ZXMgd2l0aCAgYF9sb2FkTW9yZVJvd3NgLlxyXG4gICAgICAvLyBJbiB0aGlzIGNhc2UganVzdCByZXRyeSB0aGUgcmVxdWVzdC5cclxuICAgICAgcmV0dXJuIHRoaXMuX2xvYWRVcFRvSW5kZXgodW50aWxJbmRleCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9sb2FkZWRGaWxlcy5wdXNoKC4uLm5ld1Jlc3VsdHMpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKCh7Y29sbGFwc2VkLCBjb2xsYXBzZU5ld30pID0+ICh7XHJcbiAgICAgICAgY29sbGFwc2VkOiBuZXdSZXN1bHRzLnJlZHVjZShcclxuICAgICAgICAgIChhY2N1bXVsYXRvciwgbmV3UmVzdWx0KSA9PlxyXG4gICAgICAgICAgICBhY2N1bXVsYXRvci5zZXQobmV3UmVzdWx0LnBhdGgsIGNvbGxhcHNlTmV3KSxcclxuICAgICAgICAgIG5ldyBNYXAoY29sbGFwc2VkKSxcclxuICAgICAgICApLFxyXG4gICAgICB9KSk7XHJcbiAgICAgIHJldHVybiBuZXdSZXN1bHRzO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9vcGVuQWxsTG9hZGVkUmVzdWx0cyA9ICgpID0+IHtcclxuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5fbG9hZGVkRmlsZXNcclxuICAgICAgLm1hcChmaWxlID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5ncmVwID09IG51bGwpIHtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcclxuICAgICAgICAgICAgcm93OiBmaWxlLmdyb3Vwc1swXS5tYXRjaGVzWzBdLnN0YXJ0LnJvdyxcclxuICAgICAgICAgICAgY29sdW1uOiBmaWxlLmdyb3Vwc1swXS5tYXRjaGVzWzBdLnN0YXJ0LmNvbHVtbixcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGdyZXBSZXN1bHRzID0gZmlsZS5hcHBseUdyZXAoXHJcbiAgICAgICAgICB0aGlzLnN0YXRlLmdyZXAsXHJcbiAgICAgICAgICB0aGlzLnN0YXRlLmdyZXBJbnZlcnQsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAoZ3JlcFJlc3VsdHMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEdyb3VwcyBtYXkgYmUgW10gaWYgb25seSB0aGUgcGF0aCBtYXRjaGVkIGFuIGludmVydGVkIGZpbHRlci5cclxuICAgICAgICBpZiAoZ3JlcFJlc3VsdHMucGF0aE1hdGNoICE9IG51bGwgfHwgZ3JlcFJlc3VsdHMuZ3JvdXBzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxyXG4gICAgICAgICAgICByb3c6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgY29sdW1uOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxyXG4gICAgICAgICAgcm93OiBncmVwUmVzdWx0cy5ncm91cHNbMF0ubWF0Y2hlc1swXS5zdGFydC5yb3csXHJcbiAgICAgICAgICBjb2x1bW46IGdyZXBSZXN1bHRzLmdyb3Vwc1swXS5tYXRjaGVzWzBdLnN0YXJ0LmNvbHVtbixcclxuICAgICAgICB9O1xyXG4gICAgICB9KVxyXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xyXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA+IE9QRU5fQUxMX1BST01QVF9MSU1JVCkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgYXRvbS5jb25maXJtKHtcclxuICAgICAgICAgIG1lc3NhZ2U6IGBUaGlzIHdpbGwgb3BlbiAke2ZpbGVzLmxlbmd0aH0gZmlsZXMuIEFyZSB5b3Ugc3VyZT9gLFxyXG4gICAgICAgICAgYnV0dG9uczogWydPSycsICdDYW5jZWwnXSxcclxuICAgICAgICB9KSAhPT0gMFxyXG4gICAgICApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIE9wZW4gdGhlIGZpcnN0IG1hdGNoIGZvciBldmVyeSBmaWxlLlxyXG4gICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcclxuICAgICAgdGhpcy5wcm9wcy5vbkNsaWNrKGZpbGUucGF0aCwgZmlsZS5yb3csIGZpbGUuY29sdW1uKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF9nZXRTdW1tYXJ5VGV4dCgpIHtcclxuICAgIGlmICh0aGlzLnN0YXRlLmdyZXAgIT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIGBPbmx5IHNob3dpbmcgcmVzdWx0cyAke1xyXG4gICAgICAgICAgdGhpcy5zdGF0ZS5ncmVwSW52ZXJ0ID8gJ25vdCcgOiAnJ1xyXG4gICAgICAgIH0gbWF0Y2hpbmcgcmVnZXg6IGAgKyB0aGlzLnN0YXRlLmdyZXAuc291cmNlXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wcm9wcy5leGNlZWRlZEJ5dGVMaW1pdCkge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIndhcm5pbmdcIj5cclxuICAgICAgICAgIFJlc3VsdHMgZXhjZWVkZWQgYnl0ZS1zaXplIGxpbWl0LiBPbmx5IGRpc3BsYXlpbmcgdGhlIGZpcnN0eycgJ31cclxuICAgICAgICAgIHt0aGlzLnByb3BzLmNvdW50fSByZXN1bHRzLlxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBgJHt0aGlzLnByb3BzLmNvdW50fSByZXN1bHQocykgZm91bmQgaW4gJHtcclxuICAgICAgdGhpcy5wcm9wcy5maWxlUmVzdWx0c0NvdW50XHJcbiAgICB9IGZpbGUocykuYDtcclxuICB9XHJcblxyXG4gIF9zZXRMaXN0UmVmID0gKGxpc3Q6ID9MaXN0KSA9PiB7XHJcbiAgICB0aGlzLl9saXN0UmVmID0gbGlzdDtcclxuICB9O1xyXG5cclxuICBfc2V0TG9hZGVyUmVmID0gKGxvYWRlcjogP0luZmluaXRlTG9hZGVyKSA9PiB7XHJcbiAgICB0aGlzLl9sb2FkZXJSZWYgPSBsb2FkZXI7XHJcbiAgfTtcclxuXHJcbiAgX3JlZnJlc2hMb2FkZXIoKSB7XHJcbiAgICBpZiAodGhpcy5fbG9hZGVyUmVmICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5fbG9hZGVyUmVmLnJlc2V0TG9hZE1vcmVSb3dzQ2FjaGUodHJ1ZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9yZW1lYXN1cmUoKTtcclxuICB9XHJcblxyXG4gIF9yZW1lYXN1cmUoaW5kZXg/OiBudW1iZXIpIHtcclxuICAgIGlmICh0aGlzLl9saXN0UmVmICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5fbGlzdFJlZi5yZWNvbXB1dGVSb3dIZWlnaHRzKGluZGV4KTtcclxuICAgIH1cclxuICAgIGlmIChpbmRleCA9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuX21lYXN1cmVtZW50Q2FjaGUuY2xlYXJBbGwoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX21lYXN1cmVtZW50Q2FjaGUuY2xlYXIoaW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2lzUm93TG9hZGVkID0gKHtpbmRleH06IHtpbmRleDogbnVtYmVyfSkgPT4ge1xyXG4gICAgcmV0dXJuIGluZGV4IDwgdGhpcy5fc2hvd25SZXN1bHRzLmxlbmd0aDtcclxuICB9O1xyXG5cclxuICAvLyBGYWxzZSBwb3NpdGl2ZSAtLSBgc3RvcEluZGV4YCBpcyB1c2VkIGhlcmUsIGFuZCB0aGlzIGlzbid0IGEgY29tcG9uZW50LlxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9uby11bnVzZWQtcHJvcC10eXBlc1xyXG4gIF9sb2FkTW9yZVJvd3MgPSBhc3luYyAoe3N0b3BJbmRleH06IHtzdG9wSW5kZXg6IG51bWJlcn0pID0+IHtcclxuICAgIGNvbnN0IHtncmVwLCBncmVwSW52ZXJ0fSA9IHRoaXMuc3RhdGU7XHJcbiAgICBpZiAoZ3JlcCA9PSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IG5ld1Jlc3VsdHMgPSBhd2FpdCB0aGlzLl9sb2FkVXBUb0luZGV4KHN0b3BJbmRleCk7XHJcbiAgICAgIHRoaXMuX3Nob3duUmVzdWx0cy5wdXNoKC4uLm5ld1Jlc3VsdHMpO1xyXG4gICAgICAvLyBUcmlnZ2VyIGEgcmUtcmVuZGVyIChzaW5jZSB3ZSBtdXRhdGVkIHNob3duUmVzdWx0cyBkaXJlY3RseS4pXHJcbiAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeWllbGRBbmltYXRpb25GcmFtZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVxdWVzdEFuaW1hdGlvbkZyYW1lKTtcclxuICAgICAgLy8gRHVlIHRvIHRoZSAnYXdhaXQnIGl0J3MgcG9zc2libGUgdGhhdCBhbm90aGVyIGdyZXAgc3RhcnRlZC5cclxuICAgICAgLy8gUmV0dXJuIGZhbHNlIHNvIHRoYXQgdGhlIGNhbGxlciBjYW4gc3RvcC5cclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICAhdGhpcy5kaXNwb3NhYmxlcy5kaXNwb3NlZCAmJlxyXG4gICAgICAgIHRoaXMuc3RhdGUuZ3JlcCA9PT0gZ3JlcCAmJlxyXG4gICAgICAgIHRoaXMuc3RhdGUuZ3JlcEludmVydCA9PT0gZ3JlcEludmVydFxyXG4gICAgICApO1xyXG4gICAgfTtcclxuICAgIGxldCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgIHdoaWxlIChcclxuICAgICAgdGhpcy5fZ3JlcHBlZEluZGV4IDwgdGhpcy5wcm9wcy5maWxlUmVzdWx0c0NvdW50ICYmXHJcbiAgICAgIHRoaXMuX3Nob3duUmVzdWx0cy5sZW5ndGggPCBzdG9wSW5kZXggKyAxXHJcbiAgICApIHtcclxuICAgICAgaWYgKHRoaXMuX2xvYWRlZEZpbGVzLmxlbmd0aCA8PSB0aGlzLl9ncmVwcGVkSW5kZXgpIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXdhaXQtaW4tbG9vcFxyXG4gICAgICAgIGF3YWl0IHRoaXMuX2xvYWRVcFRvSW5kZXgodGhpcy5fZ3JlcHBlZEluZGV4ICsgUkVOREVSX0JVRkZFUik7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgY3VycmVudEZpbGUgPSB0aGlzLl9sb2FkZWRGaWxlc1t0aGlzLl9ncmVwcGVkSW5kZXhdO1xyXG4gICAgICBjb25zdCBmaWxlUmVzdWx0cyA9IGN1cnJlbnRGaWxlLmFwcGx5R3JlcChncmVwLCBncmVwSW52ZXJ0KTtcclxuICAgICAgdGhpcy5fZ3JlcHBlZEluZGV4Kys7XHJcbiAgICAgIGlmIChmaWxlUmVzdWx0cyAhPSBudWxsKSB7XHJcbiAgICAgICAgLy8gQ29weWluZyB0aGlzIGxpc3QgaXMgdG9vIGV4cGVuc2l2ZSwgc28ganVzdCBtdXRhdGUgaXQuXHJcbiAgICAgICAgdGhpcy5fc2hvd25SZXN1bHRzLnB1c2goZmlsZVJlc3VsdHMpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFlpZWxkIHRoZSBldmVudCBsb29wIGlmIHdlJ3ZlIHNwZW50IHRvbyBsb25nIGdyZXBwaW5nIHJlc3VsdHMgKDEwbXMpLlxyXG4gICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUgPiAxMCkge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hd2FpdC1pbi1sb29wXHJcbiAgICAgICAgaWYgKCEoYXdhaXQgeWllbGRBbmltYXRpb25GcmFtZSgpKSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQWx3YXlzIHlpZWxkIHRoZSBldmVudCBsb29wIGF0IGxlYXN0IG9uY2UgcGVyIGxvYWRNb3JlUm93cygpIGNhbGwuXHJcbiAgICAvLyAoc2luY2UgSW5maW5pdGVMb2FkZXIgbWF5IGVuZCB1cCBjaGFpbmluZyB0aGVtLilcclxuICAgIGlmICghKGF3YWl0IHlpZWxkQW5pbWF0aW9uRnJhbWUoKSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gVHJpZ2dlciBhIHJlLXJlbmRlciAoc2luY2Ugd2UgbXV0YXRlZCBzaG93blJlc3VsdHMgZGlyZWN0bHkuKVxyXG4gICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gIH07XHJcblxyXG4gIF9nZXRSb3dDb3VudCgpIHtcclxuICAgIGlmICh0aGlzLnN0YXRlLmdyZXAgPT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5maWxlUmVzdWx0c0NvdW50O1xyXG4gICAgfVxyXG4gICAgLy8gV2UgZG9uJ3Qga25vdyBob3cgbWFueSByZXN1bHRzIHRoZXJlIHdpbGwgYmUuXHJcbiAgICAvLyBUZWxsIEluZmluaXRlTG9hZGVyIHdlIGhhdmUgUkVOREVSX0JVRkZFUiBtb3JlLCBzbyB0aGF0XHJcbiAgICAvLyBpdCB3aWxsIHRyeSB0byBsb2FkIGF0IGxlYXN0IHRoYXQgbWFueSBtb3JlIHJvd3MuXHJcbiAgICByZXR1cm4gdGhpcy5fc2hvd25SZXN1bHRzLmxlbmd0aCArIFJFTkRFUl9CVUZGRVI7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyUm93ID0gKHByb3BzOiB7XHJcbiAgICBpbmRleDogbnVtYmVyLFxyXG4gICAga2V5OiBudW1iZXIsXHJcbiAgICBwYXJlbnQ6IFJlYWN0Lk5vZGUsXHJcbiAgICBzdHlsZTogT2JqZWN0LFxyXG4gIH0pID0+IHtcclxuICAgIGNvbnN0IHtrZXksIHBhcmVudCwgaW5kZXgsIHN0eWxlfSA9IHByb3BzO1xyXG4gICAgaWYgKCF0aGlzLl9pc1Jvd0xvYWRlZChwcm9wcykpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmaWxlUmVzdWx0cyA9IHRoaXMuX3Nob3duUmVzdWx0c1tpbmRleF07XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8Q2VsbE1lYXN1cmVyXHJcbiAgICAgICAgY2FjaGU9e3RoaXMuX21lYXN1cmVtZW50Q2FjaGV9XHJcbiAgICAgICAgY29sdW1uSW5kZXg9ezB9XHJcbiAgICAgICAga2V5PXtrZXl9XHJcbiAgICAgICAgcGFyZW50PXtwYXJlbnR9XHJcbiAgICAgICAgcm93SW5kZXg9e2luZGV4fT5cclxuICAgICAgICA8ZGl2IHN0eWxlPXtzdHlsZX0gY2xhc3NOYW1lPVwic2Nyb2xsYWJsZS1zZWFyY2gtcmVzdWx0cy1pdGVtXCI+XHJcbiAgICAgICAgICB7aW5kZXggPT09IDAgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNjcm9sbGFibGUtc2VhcmNoLXJlc3VsdHMtc3VtbWFyeVwiPlxyXG4gICAgICAgICAgICAgIHt0aGlzLl9nZXRTdW1tYXJ5VGV4dCgpfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgICA8RmlsZVJlc3VsdHNDb21wb25lbnRcclxuICAgICAgICAgICAgZmlsZVJlc3VsdHM9e2ZpbGVSZXN1bHRzfVxyXG4gICAgICAgICAgICBjb2xsYXBzZWQ9e3RoaXMuc3RhdGUuY29sbGFwc2VkLmdldChmaWxlUmVzdWx0cy5wYXRoKSA9PT0gdHJ1ZX1cclxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsaWNrfVxyXG4gICAgICAgICAgICBvblRvZ2dsZT17cGF0aCA9PiB0aGlzLl9vblRvZ2dsZShwYXRoLCBpbmRleCl9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L0NlbGxNZWFzdXJlcj5cclxuICAgICk7XHJcbiAgfTtcclxuXHJcbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xyXG4gICAgY29uc3Qgcm93Q291bnQgPSB0aGlzLl9nZXRSb3dDb3VudCgpO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzY3JvbGxhYmxlLXNlYXJjaC1yZXN1bHRzLXdyYXBwZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNjcm9sbGFibGUtc2VhcmNoLXJlc3VsdHMtY29udHJvbHNcIj5cclxuICAgICAgICAgIHt0aGlzLnByb3BzLmNvbnRyb2xzVmlzaWJsZSA/IChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzY3JvbGxhYmxlLXNlYXJjaC1yZXN1bHRzLWNvbnRyb2xzLWZvcm1cIj5cclxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxleDogMX19IGNsYXNzTmFtZT1cInNjcm9sbGFibGUtY29udHJvbHMtYmxvY2tcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2Nyb2xsYWJsZS1jb250cm9scy1sYWJlbFwiPkZpbHRlcjo8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxBdG9tSW5wdXRcclxuICAgICAgICAgICAgICAgICAgYXV0b2ZvY3VzPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxyXG4gICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWU9e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZ3JlcCAhPSBudWxsID8gdGhpcy5zdGF0ZS5ncmVwLnNvdXJjZSA6ICcnXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgb25EaWRDaGFuZ2U9e3RoaXMuX29uR3JlcENoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXJUZXh0PVwiQWRkaXRpb25hbCBncmVwIGZpbHRlci4uLlwiXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzY3JvbGxhYmxlLXNlYXJjaC1yZXN1bHRzLWNvbnRyb2xzLWJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPXt0aGlzLnN0YXRlLmdyZXBJbnZlcnR9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX2ludmVydEdyZXB9PlxyXG4gICAgICAgICAgICAgICAgICBJbnZlcnRcclxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2Nyb2xsYWJsZS1jb250cm9scy1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgPEJ1dHRvbkdyb3VwPlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3RoaXMuX2NvbGxhcHNlQWxsfT5Db2xsYXBzZSBBbGw8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXt0aGlzLl9leHBhbmRBbGx9PkV4cGFuZCBBbGw8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvQnV0dG9uR3JvdXA+XHJcbiAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNjcm9sbGFibGUtc2VhcmNoLXJlc3VsdHMtY29udHJvbHMtYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb3BlbkFsbH0+XHJcbiAgICAgICAgICAgICAgICAgIE9wZW4gQWxsXHJcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmV4dHJhQ29udHJvbHMgIT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICA/IHRoaXMucHJvcHMuZXh0cmFDb250cm9scyh0aGlzLnN0YXRlKVxyXG4gICAgICAgICAgICAgICAgICA6IG51bGx9XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2Nyb2xsYWJsZS1zZWFyY2gtcmVzdWx0cy1jb250cm9scy10b2dnbGUgaWNvbiBpY29uLWNoZXZyb24tdXBcIlxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5vblRvZ2dsZUNvbnRyb2xzfVxyXG4gICAgICAgICAgICAgICAgdG9vbHRpcD17e3RpdGxlOiAnSGlkZSBDb250cm9scycsIGRlbGF5OiAxMDB9fVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNjcm9sbGFibGUtc2VhcmNoLXJlc3VsdHMtY29udHJvbHMtdG9nZ2xlLWhpZGRlbiBpY29uIGljb24tY2hldnJvbi1kb3duXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uVG9nZ2xlQ29udHJvbHN9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIC8vIE1hZ2ljIGluY2FudGF0aW9ucyB0byBtYWtlIGludGVyaW9yIHRleHQgY29weWFibGUuXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzY3JvbGxhYmxlLXNlYXJjaC1yZXN1bHRzIG5hdGl2ZS1rZXktYmluZGluZ3NcIlxyXG4gICAgICAgICAgdGFiSW5kZXg9ey0xfVxyXG4gICAgICAgICAgc3R5bGU9e3tXZWJraXRVc2VyU2VsZWN0OiAndGV4dCd9fT5cclxuICAgICAgICAgIDxJbmZpbml0ZUxvYWRlclxyXG4gICAgICAgICAgICByZWY9e3RoaXMuX3NldExvYWRlclJlZn1cclxuICAgICAgICAgICAgaXNSb3dMb2FkZWQ9e3RoaXMuX2lzUm93TG9hZGVkfVxyXG4gICAgICAgICAgICBsb2FkTW9yZVJvd3M9e3RoaXMuX2xvYWRNb3JlUm93c31cclxuICAgICAgICAgICAgcm93Q291bnQ9e3Jvd0NvdW50fT5cclxuICAgICAgICAgICAgeyh7b25Sb3dzUmVuZGVyZWQsIHJlZ2lzdGVyQ2hpbGR9KSA9PiAoXHJcbiAgICAgICAgICAgICAgPEF1dG9TaXplcj5cclxuICAgICAgICAgICAgICAgIHsoe3dpZHRoLCBoZWlnaHR9KSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgIDxMaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG51Y2xpZGUtaW50ZXJuYWwvanN4LXNpbXBsZS1jYWxsYmFjay1yZWZzXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmPXtsaXN0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldExpc3RSZWYobGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckNoaWxkKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgb25Sb3dzUmVuZGVyZWQ9e29uUm93c1JlbmRlcmVkfVxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJzY2FuUm93Q291bnQ9e1JFTkRFUl9CVUZGRVJ9XHJcbiAgICAgICAgICAgICAgICAgICAgcm93Q291bnQ9e3Jvd0NvdW50fVxyXG4gICAgICAgICAgICAgICAgICAgIHJvd0hlaWdodD17dGhpcy5fbWVhc3VyZW1lbnRDYWNoZS5yb3dIZWlnaHR9XHJcbiAgICAgICAgICAgICAgICAgICAgcm93UmVuZGVyZXI9e3RoaXMuX3JlbmRlclJvd31cclxuICAgICAgICAgICAgICAgICAgICB3aWR0aD17d2lkdGh9XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgIDwvQXV0b1NpemVyPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9JbmZpbml0ZUxvYWRlcj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iXX0=