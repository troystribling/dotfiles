"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = SettingsControl;

var _SettingsCheckbox = _interopRequireDefault(require("./SettingsCheckbox"));

var _SettingsInput = _interopRequireDefault(require("./SettingsInput"));

var _SettingsSelect = _interopRequireDefault(require("./SettingsSelect"));

var _SettingsColorInput = _interopRequireDefault(require("./SettingsColorInput"));

var _assert = _interopRequireDefault(require("assert"));

var React = _interopRequireWildcard(require("react"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
function SettingsControl(props) {
  const {
    keyPath,
    value,
    onChange,
    schema,
    title,
    hideDetails
  } = props;
  const {
    description: settingDescription
  } = schema;
  const description = hideDetails === true ? '' : settingDescription;

  if (schema) {
    if (schema.enum) {
      return (
        /*#__PURE__*/
        // $FlowFixMe(>=0.53.0) Flow suppress
        React.createElement(_SettingsSelect.default, {
          description: description,
          keyPath: keyPath,
          onChange: onChange,
          title: title,
          value: value
        })
      );
    } else if (schema.type === 'color') {
      return (
        /*#__PURE__*/
        // $FlowFixMe(>=0.53.0) Flow suppress
        React.createElement(_SettingsColorInput.default, {
          description: description,
          keyPath: keyPath,
          onChange: onChange,
          title: title,
          value: value
        })
      );
    } else if (isBoolean(value) || schema.type === 'boolean') {
      return (
        /*#__PURE__*/
        // $FlowFixMe(>=0.53.0) Flow suppress
        React.createElement(_SettingsCheckbox.default, {
          description: description,
          keyPath: keyPath,
          onChange: onChange,
          title: title,
          value: value
        })
      );
    } else if (Array.isArray(value) || schema.type === 'array') {
      if (isEditableArray(value)) {
        return (
          /*#__PURE__*/
          // $FlowFixMe(>=0.53.0) Flow suppress
          React.createElement(_SettingsInput.default, {
            description: description,
            keyPath: keyPath,
            onChange: onChange,
            title: title,
            value: value,
            type: "array"
          })
        );
      }
    } else if (isObject(value) || schema.type === 'object') {
      (0, _assert.default)(false); // Not implemented.
    } else {
      const type = isNumber(value) ? 'number' : 'string';
      return (
        /*#__PURE__*/
        // $FlowFixMe(>=0.53.0) Flow suppress
        React.createElement(_SettingsInput.default, {
          description: description,
          keyPath: keyPath,
          onChange: onChange,
          title: title,
          value: value,
          type: type
        })
      );
    }
  }

  return null;
}

function isBoolean(obj) {
  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
}

function isNumber(obj) {
  return toString.call(obj) === '[object Number]';
}

function isObject(obj) {
  const type = typeof obj;
  return type === 'function' || type === 'object' && Boolean(obj);
}

function isEditableArray(array) {
  for (let i = 0, len = array.length; i < len; i++) {
    const item = array[i];

    if (typeof item !== 'string') {
      return false;
    }
  }

  return true;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zLXVpL1NldHRpbmdzQ29udHJvbC5qcyJdLCJuYW1lcyI6WyJTZXR0aW5nc0NvbnRyb2wiLCJwcm9wcyIsImtleVBhdGgiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwic2NoZW1hIiwidGl0bGUiLCJoaWRlRGV0YWlscyIsImRlc2NyaXB0aW9uIiwic2V0dGluZ0Rlc2NyaXB0aW9uIiwiZW51bSIsInR5cGUiLCJpc0Jvb2xlYW4iLCJBcnJheSIsImlzQXJyYXkiLCJpc0VkaXRhYmxlQXJyYXkiLCJpc09iamVjdCIsImlzTnVtYmVyIiwib2JqIiwidG9TdHJpbmciLCJjYWxsIiwiQm9vbGVhbiIsImFycmF5IiwiaSIsImxlbiIsImxlbmd0aCIsIml0ZW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFZQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtCZSxTQUFTQSxlQUFULENBQXlCQyxLQUF6QixFQUFtRDtBQUNoRSxRQUFNO0FBQUNDLElBQUFBLE9BQUQ7QUFBVUMsSUFBQUEsS0FBVjtBQUFpQkMsSUFBQUEsUUFBakI7QUFBMkJDLElBQUFBLE1BQTNCO0FBQW1DQyxJQUFBQSxLQUFuQztBQUEwQ0MsSUFBQUE7QUFBMUMsTUFBeUROLEtBQS9EO0FBQ0EsUUFBTTtBQUFDTyxJQUFBQSxXQUFXLEVBQUVDO0FBQWQsTUFBb0NKLE1BQTFDO0FBRUEsUUFBTUcsV0FBVyxHQUFHRCxXQUFXLEtBQUssSUFBaEIsR0FBdUIsRUFBdkIsR0FBNEJFLGtCQUFoRDs7QUFFQSxNQUFJSixNQUFKLEVBQVk7QUFDVixRQUFJQSxNQUFNLENBQUNLLElBQVgsRUFBaUI7QUFDZjtBQUFBO0FBQ0U7QUFDQSw0QkFBQyx1QkFBRDtBQUNFLFVBQUEsV0FBVyxFQUFFRixXQURmO0FBRUUsVUFBQSxPQUFPLEVBQUVOLE9B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QUMsR0FBR0MsR0FBeEMsRUFBNkNELENBQUMsRUFBOUMsRUFBa0Q7QUFDaEQsVUFBTUcsSUFBSSxHQUFHSixLQUFLLENBQUNDLENBQUQsQ0FBbEI7O0FBQ0EsUUFBSSxPQUFPRyxJQUFQLEtBQWdCLFFBQXBCLEVBQThCO0FBQzVCLGFBQU8sS0FBUDtBQUNEO0FBQ0Y7O0FBQ0QsU0FBTyxJQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXHJcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxyXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcclxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXHJcbiAqXHJcbiAqIEBmbG93XHJcbiAqIEBmb3JtYXRcclxuICovXHJcblxyXG5pbXBvcnQgU2V0dGluZ3NDaGVja2JveCBmcm9tICcuL1NldHRpbmdzQ2hlY2tib3gnO1xyXG5pbXBvcnQgU2V0dGluZ3NJbnB1dCBmcm9tICcuL1NldHRpbmdzSW5wdXQnO1xyXG5pbXBvcnQgU2V0dGluZ3NTZWxlY3QgZnJvbSAnLi9TZXR0aW5nc1NlbGVjdCc7XHJcbmltcG9ydCBTZXR0aW5nc0NvbG9ySW5wdXQgZnJvbSAnLi9TZXR0aW5nc0NvbG9ySW5wdXQnO1xyXG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2Fzc2VydCc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbnR5cGUgUHJvcHMgPSB7XHJcbiAga2V5UGF0aDogc3RyaW5nLFxyXG4gIHNjaGVtYTogYXRvbSRDb25maWdTY2hlbWEsXHJcbiAgdmFsdWU6IGFueSxcclxuICB0aXRsZTogP3N0cmluZyxcclxuICBvbkNoYW5nZTogKHZhbHVlOiBhbnkpID0+IG1peGVkLFxyXG4gIGhpZGVEZXRhaWxzPzogYm9vbGVhbixcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNldHRpbmdzQ29udHJvbChwcm9wczogUHJvcHMpOiBSZWFjdC5Ob2RlIHtcclxuICBjb25zdCB7a2V5UGF0aCwgdmFsdWUsIG9uQ2hhbmdlLCBzY2hlbWEsIHRpdGxlLCBoaWRlRGV0YWlsc30gPSBwcm9wcztcclxuICBjb25zdCB7ZGVzY3JpcHRpb246IHNldHRpbmdEZXNjcmlwdGlvbn0gPSBzY2hlbWE7XHJcblxyXG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gaGlkZURldGFpbHMgPT09IHRydWUgPyAnJyA6IHNldHRpbmdEZXNjcmlwdGlvbjtcclxuXHJcbiAgaWYgKHNjaGVtYSkge1xyXG4gICAgaWYgKHNjaGVtYS5lbnVtKSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgLy8gJEZsb3dGaXhNZSg+PTAuNTMuMCkgRmxvdyBzdXBwcmVzc1xyXG4gICAgICAgIDxTZXR0aW5nc1NlbGVjdFxyXG4gICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAga2V5UGF0aD17a2V5UGF0aH1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cclxuICAgICAgICAgIHRpdGxlPXt0aXRsZX1cclxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cclxuICAgICAgICAvPlxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIGlmIChzY2hlbWEudHlwZSA9PT0gJ2NvbG9yJykge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjUzLjApIEZsb3cgc3VwcHJlc3NcclxuICAgICAgICA8U2V0dGluZ3NDb2xvcklucHV0XHJcbiAgICAgICAgICBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICBrZXlQYXRoPXtrZXlQYXRofVxyXG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxyXG4gICAgICAgICAgdGl0bGU9e3RpdGxlfVxyXG4gICAgICAgICAgdmFsdWU9e3ZhbHVlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2UgaWYgKGlzQm9vbGVhbih2YWx1ZSkgfHwgc2NoZW1hLnR5cGUgPT09ICdib29sZWFuJykge1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIC8vICRGbG93Rml4TWUoPj0wLjUzLjApIEZsb3cgc3VwcHJlc3NcclxuICAgICAgICA8U2V0dGluZ3NDaGVja2JveFxyXG4gICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAga2V5UGF0aD17a2V5UGF0aH1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cclxuICAgICAgICAgIHRpdGxlPXt0aXRsZX1cclxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cclxuICAgICAgICAvPlxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBzY2hlbWEudHlwZSA9PT0gJ2FycmF5Jykge1xyXG4gICAgICBpZiAoaXNFZGl0YWJsZUFycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC41My4wKSBGbG93IHN1cHByZXNzXHJcbiAgICAgICAgICA8U2V0dGluZ3NJbnB1dFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICAgIGtleVBhdGg9e2tleVBhdGh9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cclxuICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxyXG4gICAgICAgICAgICB2YWx1ZT17dmFsdWV9XHJcbiAgICAgICAgICAgIHR5cGU9XCJhcnJheVwiXHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpIHx8IHNjaGVtYS50eXBlID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBpbnZhcmlhbnQoZmFsc2UpOyAvLyBOb3QgaW1wbGVtZW50ZWQuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCB0eXBlID0gaXNOdW1iZXIodmFsdWUpID8gJ251bWJlcicgOiAnc3RyaW5nJztcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICAvLyAkRmxvd0ZpeE1lKD49MC41My4wKSBGbG93IHN1cHByZXNzXHJcbiAgICAgICAgPFNldHRpbmdzSW5wdXRcclxuICAgICAgICAgIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgIGtleVBhdGg9e2tleVBhdGh9XHJcbiAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XHJcbiAgICAgICAgICB0aXRsZT17dGl0bGV9XHJcbiAgICAgICAgICB2YWx1ZT17dmFsdWV9XHJcbiAgICAgICAgICB0eXBlPXt0eXBlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNCb29sZWFuKG9iaikge1xyXG4gIHJldHVybiAoXHJcbiAgICBvYmogPT09IHRydWUgfHwgb2JqID09PSBmYWxzZSB8fCB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJvb2xlYW5dJ1xyXG4gICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzTnVtYmVyKG9iaikge1xyXG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IE51bWJlcl0nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcclxuICBjb25zdCB0eXBlID0gdHlwZW9mIG9iajtcclxuICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCAodHlwZSA9PT0gJ29iamVjdCcgJiYgQm9vbGVhbihvYmopKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNFZGl0YWJsZUFycmF5KGFycmF5KTogYm9vbGVhbiB7XHJcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICBjb25zdCBpdGVtID0gYXJyYXlbaV07XHJcbiAgICBpZiAodHlwZW9mIGl0ZW0gIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuIl19