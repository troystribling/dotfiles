"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.STRING_REGEX = void 0;

var React = _interopRequireWildcard(require("react"));

var _ValueComponentClassNames = require("./ValueComponentClassNames");

var _TextRenderer = require("./TextRenderer");

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
const booleanRegex = /^true|false$/i;
const STRING_REGEX = /^(['"]).*\1$/;
exports.STRING_REGEX = STRING_REGEX;

function renderNullish(expression) {
  const type = expression.type;
  return type === 'undefined' || type === 'null' ? /*#__PURE__*/React.createElement("span", {
    className: _ValueComponentClassNames.ValueComponentClassNames.nullish
  }, type) : null;
}

function renderString(expression) {
  const type = expression.type;
  const value = expression.getValue();

  if (value == null) {
    return null;
  }

  if (STRING_REGEX.test(value)) {
    return /*#__PURE__*/React.createElement("span", {
      className: _ValueComponentClassNames.ValueComponentClassNames.string
    }, value);
  } else if (type === 'string') {
    return /*#__PURE__*/React.createElement("span", {
      className: _ValueComponentClassNames.ValueComponentClassNames.string
    }, /*#__PURE__*/React.createElement("span", {
      className: _ValueComponentClassNames.ValueComponentClassNames.stringOpeningQuote
    }, "\""), value, /*#__PURE__*/React.createElement("span", {
      className: _ValueComponentClassNames.ValueComponentClassNames.stringClosingQuote
    }, "\""));
  } else {
    return null;
  }
}

function renderNumber(expression) {
  const type = expression.type;
  const value = expression.getValue();

  if (value == null) {
    return null;
  }

  return type === 'number' || !isNaN(Number(value)) ? /*#__PURE__*/React.createElement("span", {
    className: _ValueComponentClassNames.ValueComponentClassNames.number
  }, String(value)) : null;
}

function renderBoolean(expression) {
  const type = expression.type;
  const value = expression.getValue();

  if (value == null) {
    return null;
  }

  return type === 'boolean' || booleanRegex.test(value) ? /*#__PURE__*/React.createElement("span", {
    className: _ValueComponentClassNames.ValueComponentClassNames.boolean
  }, String(value)) : null;
}

function renderDefault(expression) {
  return expression.getValue();
}

const valueRenderers = [_TextRenderer.TextRenderer, renderString, renderNumber, renderNullish, renderBoolean, renderDefault];

class SimpleValueComponent extends React.Component {
  shouldComponentUpdate(nextProps) {
    const {
      expression
    } = this.props;
    return expression !== nextProps.expression;
  }

  render() {
    const {
      expression
    } = this.props;
    let displayValue;

    for (const renderer of valueRenderers) {
      displayValue = renderer(expression);

      if (displayValue != null) {
        break;
      }
    }

    if (displayValue == null || displayValue === '') {
      const val = expression.getValue();
      displayValue = val != null ? val : '(N/A)';
    }

    if (expression == null) {
      return /*#__PURE__*/React.createElement("span", {
        tabIndex: -1,
        className: "native-key-bindings"
      }, displayValue);
    }

    const hideExpressionName = Boolean(this.props.hideExpressionName);
    const renderedExpression = hideExpressionName ? null : /*#__PURE__*/React.createElement("span", {
      className: _ValueComponentClassNames.ValueComponentClassNames.identifier
    }, expression.name);
    return /*#__PURE__*/React.createElement("span", {
      tabIndex: -1,
      className: "native-key-bindings"
    }, renderedExpression, hideExpressionName ? null : ':', displayValue);
  }

}

exports.default = SimpleValueComponent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zLXVpL1NpbXBsZVZhbHVlQ29tcG9uZW50LmpzIl0sIm5hbWVzIjpbImJvb2xlYW5SZWdleCIsIlNUUklOR19SRUdFWCIsInJlbmRlck51bGxpc2giLCJleHByZXNzaW9uIiwidHlwZSIsIlZhbHVlQ29tcG9uZW50Q2xhc3NOYW1lcyIsIm51bGxpc2giLCJyZW5kZXJTdHJpbmciLCJ2YWx1ZSIsImdldFZhbHVlIiwidGVzdCIsInN0cmluZyIsInN0cmluZ09wZW5pbmdRdW90ZSIsInN0cmluZ0Nsb3NpbmdRdW90ZSIsInJlbmRlck51bWJlciIsImlzTmFOIiwiTnVtYmVyIiwibnVtYmVyIiwiU3RyaW5nIiwicmVuZGVyQm9vbGVhbiIsImJvb2xlYW4iLCJyZW5kZXJEZWZhdWx0IiwidmFsdWVSZW5kZXJlcnMiLCJUZXh0UmVuZGVyZXIiLCJTaW1wbGVWYWx1ZUNvbXBvbmVudCIsIlJlYWN0IiwiQ29tcG9uZW50Iiwic2hvdWxkQ29tcG9uZW50VXBkYXRlIiwibmV4dFByb3BzIiwicHJvcHMiLCJyZW5kZXIiLCJkaXNwbGF5VmFsdWUiLCJyZW5kZXJlciIsInZhbCIsImhpZGVFeHByZXNzaW9uTmFtZSIsIkJvb2xlYW4iLCJyZW5kZXJlZEV4cHJlc3Npb24iLCJpZGVudGlmaWVyIiwibmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQWNBOztBQUNBOztBQUNBOzs7Ozs7QUFoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWFBLE1BQU1BLFlBQVksR0FBRyxlQUFyQjtBQUNPLE1BQU1DLFlBQVksR0FBRyxjQUFyQjs7O0FBRVAsU0FBU0MsYUFBVCxDQUF1QkMsVUFBdkIsRUFBcUU7QUFDbkUsUUFBTUMsSUFBSSxHQUFHRCxVQUFVLENBQUNDLElBQXhCO0FBQ0EsU0FBT0EsSUFBSSxLQUFLLFdBQVQsSUFBd0JBLElBQUksS0FBSyxNQUFqQyxnQkFDTDtBQUFN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OztBQUNBLFVBQUk0QixZQUFZLElBQUksSUFBcEIsRUFBMEI7QUFDeEI7QUFDRDtBQUNGOztBQUNELFFBQUlBLFlBQVksSUFBSSxJQUFoQixJQUF3QkEsWUFBWSxLQUFLLEVBQTdDLEVBQWlEO0FBQy9DLFlBQU1FLEdBQUcsR0FBRzlCLFVBQVUsQ0FBQ00sUUFBWCxFQUFaO0FBQ0FzQixNQUFBQSxZQUFZLEdBQUdFLEdBQUcsSUFBSSxJQUFQLEdBQWNBLEdBQWQsR0FBb0IsT0FBbkM7QUFDRDs7QUFDRCxRQUFJOUIsVUFBVSxJQUFJLElBQWxCLEVBQXdCO0FBQ3RCLDBCQUNFO0FBQU0sUUFBQSxRQUFRLEVBQUUsQ0FBQyxDQUFqQjtBQUFvQixRQUFBLFNBQVMsRUFBQztBQUE5QixTQUNHNEIsWUFESCxDQURGO0FBS0Q7O0FBQ0QsVUFBTUcsa0JBQWtCLEdBQUdDLE9BQU8sQ0FBQyxLQUFLTixLQUFMLENBQVdLLGtCQUFaLENBQWxDO0FBQ0EsVUFBTUUsa0JBQWtCLEdBQUdGLGtCQUFrQixHQUFHLElBQUgsZ0JBQzNDO0FBQU0sTUFBQSxTQUFTLEVBQUU3QixtREFBeUJnQztBQUExQyxPQUNHbEMsVUFBVSxDQUFDbUMsSUFEZCxDQURGO0FBS0Esd0JBQ0U7QUFBTSxNQUFBLFFBQVEsRUFBRSxDQUFDLENBQWpCO0FBQW9CLE1BQUEsU0FBUyxFQUFDO0FBQTlCLE9BQ0dGLGtCQURILEVBRUdGLGtCQUFrQixHQUFHLElBQUgsR0FBVSxHQUYvQixFQUdHSCxZQUhILENBREY7QUFPRDs7QUF2Q3NFIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxyXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcclxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XHJcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxyXG4gKlxyXG4gKiBAZmxvd1xyXG4gKiBAZm9ybWF0XHJcbiAqL1xyXG5cclxuaW1wb3J0IHR5cGUge0lFeHByZXNzaW9ufSBmcm9tICdhdG9tLWlkZS11aSc7XHJcblxyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7VmFsdWVDb21wb25lbnRDbGFzc05hbWVzfSBmcm9tICcuL1ZhbHVlQ29tcG9uZW50Q2xhc3NOYW1lcyc7XHJcbmltcG9ydCB7VGV4dFJlbmRlcmVyfSBmcm9tICcuL1RleHRSZW5kZXJlcic7XHJcblxyXG50eXBlIFByb3BzID0ge1xyXG4gIGV4cHJlc3Npb246IElFeHByZXNzaW9uLFxyXG4gIGhpZGVFeHByZXNzaW9uTmFtZT86IGJvb2xlYW4sXHJcbn07XHJcblxyXG5jb25zdCBib29sZWFuUmVnZXggPSAvXnRydWV8ZmFsc2UkL2k7XHJcbmV4cG9ydCBjb25zdCBTVFJJTkdfUkVHRVggPSAvXihbJ1wiXSkuKlxcMSQvO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyTnVsbGlzaChleHByZXNzaW9uOiBJRXhwcmVzc2lvbik6ID9SZWFjdC5FbGVtZW50PGFueT4ge1xyXG4gIGNvbnN0IHR5cGUgPSBleHByZXNzaW9uLnR5cGU7XHJcbiAgcmV0dXJuIHR5cGUgPT09ICd1bmRlZmluZWQnIHx8IHR5cGUgPT09ICdudWxsJyA/IChcclxuICAgIDxzcGFuIGNsYXNzTmFtZT17VmFsdWVDb21wb25lbnRDbGFzc05hbWVzLm51bGxpc2h9Pnt0eXBlfTwvc3Bhbj5cclxuICApIDogbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyU3RyaW5nKGV4cHJlc3Npb246IElFeHByZXNzaW9uKTogP1JlYWN0LkVsZW1lbnQ8YW55PiB7XHJcbiAgY29uc3QgdHlwZSA9IGV4cHJlc3Npb24udHlwZTtcclxuICBjb25zdCB2YWx1ZSA9IGV4cHJlc3Npb24uZ2V0VmFsdWUoKTtcclxuICBpZiAodmFsdWUgPT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIGlmIChTVFJJTkdfUkVHRVgudGVzdCh2YWx1ZSkpIHtcclxuICAgIHJldHVybiA8c3BhbiBjbGFzc05hbWU9e1ZhbHVlQ29tcG9uZW50Q2xhc3NOYW1lcy5zdHJpbmd9Pnt2YWx1ZX08L3NwYW4+O1xyXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxzcGFuIGNsYXNzTmFtZT17VmFsdWVDb21wb25lbnRDbGFzc05hbWVzLnN0cmluZ30+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtWYWx1ZUNvbXBvbmVudENsYXNzTmFtZXMuc3RyaW5nT3BlbmluZ1F1b3RlfT5cIjwvc3Bhbj5cclxuICAgICAgICB7dmFsdWV9XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtWYWx1ZUNvbXBvbmVudENsYXNzTmFtZXMuc3RyaW5nQ2xvc2luZ1F1b3RlfT5cIjwvc3Bhbj5cclxuICAgICAgPC9zcGFuPlxyXG4gICAgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJOdW1iZXIoZXhwcmVzc2lvbjogSUV4cHJlc3Npb24pOiA/UmVhY3QuRWxlbWVudDxhbnk+IHtcclxuICBjb25zdCB0eXBlID0gZXhwcmVzc2lvbi50eXBlO1xyXG4gIGNvbnN0IHZhbHVlID0gZXhwcmVzc2lvbi5nZXRWYWx1ZSgpO1xyXG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgcmV0dXJuIHR5cGUgPT09ICdudW1iZXInIHx8ICFpc05hTihOdW1iZXIodmFsdWUpKSA/IChcclxuICAgIDxzcGFuIGNsYXNzTmFtZT17VmFsdWVDb21wb25lbnRDbGFzc05hbWVzLm51bWJlcn0+e1N0cmluZyh2YWx1ZSl9PC9zcGFuPlxyXG4gICkgOiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJCb29sZWFuKGV4cHJlc3Npb246IElFeHByZXNzaW9uKTogP1JlYWN0LkVsZW1lbnQ8YW55PiB7XHJcbiAgY29uc3QgdHlwZSA9IGV4cHJlc3Npb24udHlwZTtcclxuICBjb25zdCB2YWx1ZSA9IGV4cHJlc3Npb24uZ2V0VmFsdWUoKTtcclxuICBpZiAodmFsdWUgPT0gbnVsbCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIHJldHVybiB0eXBlID09PSAnYm9vbGVhbicgfHwgYm9vbGVhblJlZ2V4LnRlc3QodmFsdWUpID8gKFxyXG4gICAgPHNwYW4gY2xhc3NOYW1lPXtWYWx1ZUNvbXBvbmVudENsYXNzTmFtZXMuYm9vbGVhbn0+e1N0cmluZyh2YWx1ZSl9PC9zcGFuPlxyXG4gICkgOiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJEZWZhdWx0KGV4cHJlc3Npb246IElFeHByZXNzaW9uKTogP3N0cmluZyB7XHJcbiAgcmV0dXJuIGV4cHJlc3Npb24uZ2V0VmFsdWUoKTtcclxufVxyXG5cclxuY29uc3QgdmFsdWVSZW5kZXJlcnMgPSBbXHJcbiAgVGV4dFJlbmRlcmVyLFxyXG4gIHJlbmRlclN0cmluZyxcclxuICByZW5kZXJOdW1iZXIsXHJcbiAgcmVuZGVyTnVsbGlzaCxcclxuICByZW5kZXJCb29sZWFuLFxyXG4gIHJlbmRlckRlZmF1bHQsXHJcbl07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaW1wbGVWYWx1ZUNvbXBvbmVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IFByb3BzKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCB7ZXhwcmVzc2lvbn0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIGV4cHJlc3Npb24gIT09IG5leHRQcm9wcy5leHByZXNzaW9uO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xyXG4gICAgY29uc3Qge2V4cHJlc3Npb259ID0gdGhpcy5wcm9wcztcclxuICAgIGxldCBkaXNwbGF5VmFsdWU7XHJcbiAgICBmb3IgKGNvbnN0IHJlbmRlcmVyIG9mIHZhbHVlUmVuZGVyZXJzKSB7XHJcbiAgICAgIGRpc3BsYXlWYWx1ZSA9IHJlbmRlcmVyKGV4cHJlc3Npb24pO1xyXG4gICAgICBpZiAoZGlzcGxheVZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGRpc3BsYXlWYWx1ZSA9PSBudWxsIHx8IGRpc3BsYXlWYWx1ZSA9PT0gJycpIHtcclxuICAgICAgY29uc3QgdmFsID0gZXhwcmVzc2lvbi5nZXRWYWx1ZSgpO1xyXG4gICAgICBkaXNwbGF5VmFsdWUgPSB2YWwgIT0gbnVsbCA/IHZhbCA6ICcoTi9BKSc7XHJcbiAgICB9XHJcbiAgICBpZiAoZXhwcmVzc2lvbiA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPHNwYW4gdGFiSW5kZXg9ey0xfSBjbGFzc05hbWU9XCJuYXRpdmUta2V5LWJpbmRpbmdzXCI+XHJcbiAgICAgICAgICB7ZGlzcGxheVZhbHVlfVxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhpZGVFeHByZXNzaW9uTmFtZSA9IEJvb2xlYW4odGhpcy5wcm9wcy5oaWRlRXhwcmVzc2lvbk5hbWUpO1xyXG4gICAgY29uc3QgcmVuZGVyZWRFeHByZXNzaW9uID0gaGlkZUV4cHJlc3Npb25OYW1lID8gbnVsbCA6IChcclxuICAgICAgPHNwYW4gY2xhc3NOYW1lPXtWYWx1ZUNvbXBvbmVudENsYXNzTmFtZXMuaWRlbnRpZmllcn0+XHJcbiAgICAgICAge2V4cHJlc3Npb24ubmFtZX1cclxuICAgICAgPC9zcGFuPlxyXG4gICAgKTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxzcGFuIHRhYkluZGV4PXstMX0gY2xhc3NOYW1lPVwibmF0aXZlLWtleS1iaW5kaW5nc1wiPlxyXG4gICAgICAgIHtyZW5kZXJlZEV4cHJlc3Npb259XHJcbiAgICAgICAge2hpZGVFeHByZXNzaW9uTmFtZSA/IG51bGwgOiAnOid9XHJcbiAgICAgICAge2Rpc3BsYXlWYWx1ZX1cclxuICAgICAgPC9zcGFuPlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl19