"use strict";

// Generated by CoffeeScript 1.12.2
(function () {
  var BrowserWindow, CompositeDisposable, TabBarView, TabView, _, ipcRenderer, isAtomEvent, itemIsAllowed;

  BrowserWindow = null;
  ipcRenderer = require('electron').ipcRenderer;
  CompositeDisposable = require('atom').CompositeDisposable;
  _ = require('underscore-plus');
  TabView = require('./tab-view');

  module.exports = TabBarView = function () {
    function TabBarView(pane1, location1) {
      var addElementCommands, item, j, len, ref;
      this.pane = pane1;
      this.location = location1;
      this.element = document.createElement('ul');
      this.element.classList.add("list-inline");
      this.element.classList.add("tab-bar");
      this.element.classList.add("inset-panel");
      this.element.setAttribute('is', 'atom-tabs');
      this.element.setAttribute("tabindex", -1);
      this.element.setAttribute("location", this.location);
      this.tabs = [];
      this.tabsByElement = new WeakMap();
      this.subscriptions = new CompositeDisposable();
      this.subscriptions.add(atom.commands.add(this.pane.getElement(), {
        'tabs:keep-pending-tab': function (_this) {
          return function () {
            return _this.terminatePendingStates();
          };
        }(this),
        'tabs:close-tab': function (_this) {
          return function () {
            return _this.closeTab(_this.getActiveTab());
          };
        }(this),
        'tabs:close-other-tabs': function (_this) {
          return function () {
            return _this.closeOtherTabs(_this.getActiveTab());
          };
        }(this),
        'tabs:close-tabs-to-right': function (_this) {
          return function () {
            return _this.closeTabsToRight(_this.getActiveTab());
          };
        }(this),
        'tabs:close-tabs-to-left': function (_this) {
          return function () {
            return _this.closeTabsToLeft(_this.getActiveTab());
          };
        }(this),
        'tabs:close-saved-tabs': function (_this) {
          return function () {
            return _this.closeSavedTabs();
          };
        }(this),
        'tabs:close-all-tabs': function (_this) {
          return function (event) {
            event.stopPropagation();
            return _this.closeAllTabs();
          };
        }(this),
        'tabs:open-in-new-window': function (_this) {
          return function () {
            return _this.openInNewWindow();
          };
        }(this)
      }));

      addElementCommands = function (_this) {
        return function (commands) {
          var commandsWithPropagationStopped;
          commandsWithPropagationStopped = {};
          Object.keys(commands).forEach(function (name) {
            return commandsWithPropagationStopped[name] = function (event) {
              event.stopPropagation();
              return commands[name]();
            };
          });
          return _this.subscriptions.add(atom.commands.add(_this.element, commandsWithPropagationStopped));
        };
      }(this);

      addElementCommands({
        'tabs:close-tab': function (_this) {
          return function () {
            return _this.closeTab();
          };
        }(this),
        'tabs:close-other-tabs': function (_this) {
          return function () {
            return _this.closeOtherTabs();
          };
        }(this),
        'tabs:close-tabs-to-right': function (_this) {
          return function () {
            return _this.closeTabsToRight();
          };
        }(this),
        'tabs:close-tabs-to-left': function (_this) {
          return function () {
            return _this.closeTabsToLeft();
          };
        }(this),
        'tabs:close-saved-tabs': function (_this) {
          return function () {
            return _this.closeSavedTabs();
          };
        }(this),
        'tabs:close-all-tabs': function (_this) {
          return function () {
            return _this.closeAllTabs();
          };
        }(this),
        'tabs:split-up': function (_this) {
          return function () {
            return _this.splitTab('splitUp');
          };
        }(this),
        'tabs:split-down': function (_this) {
          return function () {
            return _this.splitTab('splitDown');
          };
        }(this),
        'tabs:split-left': function (_this) {
          return function () {
            return _this.splitTab('splitLeft');
          };
        }(this),
        'tabs:split-right': function (_this) {
          return function () {
            return _this.splitTab('splitRight');
          };
        }(this)
      });
      this.element.addEventListener("mouseenter", this.onMouseEnter.bind(this));
      this.element.addEventListener("mouseleave", this.onMouseLeave.bind(this));
      this.element.addEventListener("dragstart", this.onDragStart.bind(this));
      this.element.addEventListener("dragend", this.onDragEnd.bind(this));
      this.element.addEventListener("dragleave", this.onDragLeave.bind(this));
      this.element.addEventListener("dragover", this.onDragOver.bind(this));
      this.element.addEventListener("drop", this.onDrop.bind(this));
      this.paneContainer = this.pane.getContainer();
      ref = this.pane.getItems();

      for (j = 0, len = ref.length; j < len; j++) {
        item = ref[j];
        this.addTabForItem(item);
      }

      this.subscriptions.add(this.pane.onDidDestroy(function (_this) {
        return function () {
          return _this.destroy();
        };
      }(this)));
      this.subscriptions.add(this.pane.onDidAddItem(function (_this) {
        return function (arg) {
          var index, item;
          item = arg.item, index = arg.index;
          return _this.addTabForItem(item, index);
        };
      }(this)));
      this.subscriptions.add(this.pane.onDidMoveItem(function (_this) {
        return function (arg) {
          var item, newIndex;
          item = arg.item, newIndex = arg.newIndex;
          return _this.moveItemTabToIndex(item, newIndex);
        };
      }(this)));
      this.subscriptions.add(this.pane.onDidRemoveItem(function (_this) {
        return function (arg) {
          var item;
          item = arg.item;
          return _this.removeTabForItem(item);
        };
      }(this)));
      this.subscriptions.add(this.pane.onDidChangeActiveItem(function (_this) {
        return function (item) {
          return _this.updateActiveTab();
        };
      }(this)));
      this.subscriptions.add(atom.config.observe('tabs.tabScrolling', this.updateTabScrolling.bind(this)));
      this.subscriptions.add(atom.config.observe('tabs.tabScrollingThreshold', function (_this) {
        return function () {
          return _this.updateTabScrollingThreshold();
        };
      }(this)));
      this.subscriptions.add(atom.config.observe('tabs.alwaysShowTabBar', function (_this) {
        return function () {
          return _this.updateTabBarVisibility();
        };
      }(this)));
      this.updateActiveTab();
      this.element.addEventListener("mousedown", this.onMouseDown.bind(this));
      this.element.addEventListener("dblclick", this.onDoubleClick.bind(this));
      this.onDropOnOtherWindow = this.onDropOnOtherWindow.bind(this);
      ipcRenderer.on('tab:dropped', this.onDropOnOtherWindow);
    }

    TabBarView.prototype.destroy = function () {
      ipcRenderer.removeListener('tab:dropped', this.onDropOnOtherWindow);
      this.subscriptions.dispose();
      return this.element.remove();
    };

    TabBarView.prototype.terminatePendingStates = function () {
      var j, len, ref, tab;
      ref = this.getTabs();

      for (j = 0, len = ref.length; j < len; j++) {
        tab = ref[j];

        if (typeof tab.terminatePendingState === "function") {
          tab.terminatePendingState();
        }
      }
    };

    TabBarView.prototype.addTabForItem = function (item, index) {
      var tabView;
      tabView = new TabView({
        item: item,
        pane: this.pane,
        tabs: this.tabs,
        didClickCloseIcon: function (_this) {
          return function () {
            _this.closeTab(tabView);
          };
        }(this),
        location: this.location
      });

      if (this.isItemMovingBetweenPanes) {
        tabView.terminatePendingState();
      }

      this.tabsByElement.set(tabView.element, tabView);
      this.insertTabAtIndex(tabView, index);

      if (atom.config.get('tabs.addNewTabsAtEnd')) {
        if (!this.isItemMovingBetweenPanes) {
          return this.pane.moveItem(item, this.pane.getItems().length - 1);
        }
      }
    };

    TabBarView.prototype.moveItemTabToIndex = function (item, index) {
      var tab, tabIndex;
      tabIndex = this.tabs.findIndex(function (t) {
        return t.item === item;
      });

      if (tabIndex !== -1) {
        tab = this.tabs[tabIndex];
        tab.element.remove();
        this.tabs.splice(tabIndex, 1);
        return this.insertTabAtIndex(tab, index);
      }
    };

    TabBarView.prototype.insertTabAtIndex = function (tab, index) {
      var followingTab;

      if (index != null) {
        followingTab = this.tabs[index];
      }

      if (followingTab) {
        this.element.insertBefore(tab.element, followingTab.element);
        this.tabs.splice(index, 0, tab);
      } else {
        this.element.appendChild(tab.element);
        this.tabs.push(tab);
      }

      tab.updateTitle();
      return this.updateTabBarVisibility();
    };

    TabBarView.prototype.removeTabForItem = function (item) {
      var j, len, ref, tab, tabIndex;
      tabIndex = this.tabs.findIndex(function (t) {
        return t.item === item;
      });

      if (tabIndex !== -1) {
        tab = this.tabs[tabIndex];
        this.tabs.splice(tabIndex, 1);
        this.tabsByElement["delete"](tab);
        tab.destroy();
      }

      ref = this.getTabs();

      for (j = 0, len = ref.length; j < len; j++) {
        tab = ref[j];
        tab.updateTitle();
      }

      return this.updateTabBarVisibility();
    };

    TabBarView.prototype.updateTabBarVisibility = function () {
      if (!atom.config.get('tabs.alwaysShowTabBar') && !this.shouldAllowDrag()) {
        return this.element.classList.add('hidden');
      } else {
        return this.element.classList.remove('hidden');
      }
    };

    TabBarView.prototype.getTabs = function () {
      return this.tabs.slice();
    };

    TabBarView.prototype.tabAtIndex = function (index) {
      return this.tabs[index];
    };

    TabBarView.prototype.tabForItem = function (item) {
      return this.tabs.find(function (t) {
        return t.item === item;
      });
    };

    TabBarView.prototype.setActiveTab = function (tabView) {
      var ref;

      if (tabView != null && tabView !== this.activeTab) {
        if ((ref = this.activeTab) != null) {
          ref.element.classList.remove('active');
        }

        this.activeTab = tabView;
        this.activeTab.element.classList.add('active');
        return this.activeTab.element.scrollIntoView(false);
      }
    };

    TabBarView.prototype.getActiveTab = function () {
      return this.tabForItem(this.pane.getActiveItem());
    };

    TabBarView.prototype.updateActiveTab = function () {
      return this.setActiveTab(this.tabForItem(this.pane.getActiveItem()));
    };

    TabBarView.prototype.closeTab = function (tab) {
      if (tab == null) {
        tab = this.rightClickedTab;
      }

      if (tab != null) {
        return this.pane.destroyItem(tab.item);
      }
    };

    TabBarView.prototype.openInNewWindow = function (tab) {
      var item, itemURI, pathsToOpen;

      if (tab == null) {
        tab = this.rightClickedTab;
      }

      item = tab != null ? tab.item : void 0;

      if (item == null) {
        return;
      }

      if (typeof item.getURI === 'function') {
        itemURI = item.getURI();
      } else if (typeof item.getPath === 'function') {
        itemURI = item.getPath();
      } else if (typeof item.getUri === 'function') {
        itemURI = item.getUri();
      }

      if (itemURI == null) {
        return;
      }

      this.closeTab(tab);
      pathsToOpen = [atom.project.getPaths(), itemURI].reduce(function (a, b) {
        return a.concat(b);
      }, []);
      return atom.open({
        pathsToOpen: pathsToOpen,
        newWindow: true,
        devMode: atom.devMode,
        safeMode: atom.safeMode
      });
    };

    TabBarView.prototype.splitTab = function (fn) {
      var copiedItem, item, ref;

      if (item = (ref = this.rightClickedTab) != null ? ref.item : void 0) {
        if (copiedItem = this.copyItem(item)) {
          return this.pane[fn]({
            items: [copiedItem]
          });
        }
      }
    };

    TabBarView.prototype.copyItem = function (item) {
      var ref;
      return (ref = typeof item.copy === "function" ? item.copy() : void 0) != null ? ref : atom.deserializers.deserialize(item.serialize());
    };

    TabBarView.prototype.closeOtherTabs = function (active) {
      var j, len, results, tab, tabs;
      tabs = this.getTabs();

      if (active == null) {
        active = this.rightClickedTab;
      }

      if (active == null) {
        return;
      }

      results = [];

      for (j = 0, len = tabs.length; j < len; j++) {
        tab = tabs[j];

        if (tab !== active) {
          results.push(this.closeTab(tab));
        }
      }

      return results;
    };

    TabBarView.prototype.closeTabsToRight = function (active) {
      var i, index, j, len, results, tab, tabs;
      tabs = this.getTabs();

      if (active == null) {
        active = this.rightClickedTab;
      }

      index = tabs.indexOf(active);

      if (index === -1) {
        return;
      }

      results = [];

      for (i = j = 0, len = tabs.length; j < len; i = ++j) {
        tab = tabs[i];

        if (i > index) {
          results.push(this.closeTab(tab));
        }
      }

      return results;
    };

    TabBarView.prototype.closeTabsToLeft = function (active) {
      var i, index, j, len, results, tab, tabs;
      tabs = this.getTabs();

      if (active == null) {
        active = this.rightClickedTab;
      }

      index = tabs.indexOf(active);

      if (index === -1) {
        return;
      }

      results = [];

      for (i = j = 0, len = tabs.length; j < len; i = ++j) {
        tab = tabs[i];

        if (i < index) {
          results.push(this.closeTab(tab));
        }
      }

      return results;
    };

    TabBarView.prototype.closeSavedTabs = function () {
      var base, j, len, ref, results, tab;
      ref = this.getTabs();
      results = [];

      for (j = 0, len = ref.length; j < len; j++) {
        tab = ref[j];

        if (!(typeof (base = tab.item).isModified === "function" ? base.isModified() : void 0)) {
          results.push(this.closeTab(tab));
        } else {
          results.push(void 0);
        }
      }

      return results;
    };

    TabBarView.prototype.closeAllTabs = function () {
      var j, len, ref, results, tab;
      ref = this.getTabs();
      results = [];

      for (j = 0, len = ref.length; j < len; j++) {
        tab = ref[j];
        results.push(this.closeTab(tab));
      }

      return results;
    };

    TabBarView.prototype.getWindowId = function () {
      return this.windowId != null ? this.windowId : this.windowId = atom.getCurrentWindow().id;
    };

    TabBarView.prototype.shouldAllowDrag = function () {
      return this.paneContainer.getPanes().length > 1 || this.pane.getItems().length > 1;
    };

    TabBarView.prototype.onDragStart = function (event) {
      var item, itemURI, j, len, location, paneIndex, ref, ref1, ref2, ref3, tabIndex;
      this.draggedTab = this.tabForElement(event.target);

      if (!this.draggedTab) {
        return;
      }

      event.dataTransfer.setData('atom-event', 'true');
      this.draggedTab.element.classList.add('is-dragging');
      this.draggedTab.destroyTooltip();
      tabIndex = this.tabs.indexOf(this.draggedTab);
      event.dataTransfer.setData('sortable-index', tabIndex);
      paneIndex = this.paneContainer.getPanes().indexOf(this.pane);
      event.dataTransfer.setData('from-pane-index', paneIndex);
      event.dataTransfer.setData('from-pane-id', this.pane.id);
      event.dataTransfer.setData('from-window-id', this.getWindowId());
      item = this.pane.getItems()[this.tabs.indexOf(this.draggedTab)];

      if (item == null) {
        return;
      }

      if (typeof item.getURI === 'function') {
        itemURI = (ref = item.getURI()) != null ? ref : '';
      } else if (typeof item.getPath === 'function') {
        itemURI = (ref1 = item.getPath()) != null ? ref1 : '';
      } else if (typeof item.getUri === 'function') {
        itemURI = (ref2 = item.getUri()) != null ? ref2 : '';
      }

      if (typeof item.getAllowedLocations === 'function') {
        ref3 = item.getAllowedLocations();

        for (j = 0, len = ref3.length; j < len; j++) {
          location = ref3[j];
          event.dataTransfer.setData("allowed-location-" + location, 'true');
        }
      } else {
        event.dataTransfer.setData('allow-all-locations', 'true');
      }

      if (itemURI != null) {
        event.dataTransfer.setData('text/plain', itemURI);

        if (process.platform === 'darwin') {
          if (!this.uriHasProtocol(itemURI)) {
            itemURI = "file://" + itemURI;
          }

          event.dataTransfer.setData('text/uri-list', itemURI);
        }

        if ((typeof item.isModified === "function" ? item.isModified() : void 0) && item.getText != null) {
          event.dataTransfer.setData('has-unsaved-changes', 'true');
          return event.dataTransfer.setData('modified-text', item.getText());
        }
      }
    };

    TabBarView.prototype.uriHasProtocol = function (uri) {
      var error;

      try {
        return require('url').parse(uri).protocol != null;
      } catch (error1) {
        error = error1;
        return false;
      }
    };

    TabBarView.prototype.onDragLeave = function (event) {
      return this.removePlaceholder();
    };

    TabBarView.prototype.onDragEnd = function (event) {
      if (!this.tabForElement(event.target)) {
        return;
      }

      return this.clearDropTarget();
    };

    TabBarView.prototype.onDragOver = function (event) {
      var newDropTargetIndex, placeholder, sibling, tab, tabs;

      if (!isAtomEvent(event)) {
        event.preventDefault();
        event.stopPropagation();
        return;
      }

      event.preventDefault();
      newDropTargetIndex = this.getDropTargetIndex(event);

      if (newDropTargetIndex == null) {
        return;
      }

      if (!itemIsAllowed(event, this.location)) {
        return;
      }

      this.removeDropTargetClasses();
      tabs = this.getTabs();
      placeholder = this.getPlaceholder();

      if (placeholder == null) {
        return;
      }

      if (newDropTargetIndex < tabs.length) {
        tab = tabs[newDropTargetIndex];
        tab.element.classList.add('is-drop-target');
        return tab.element.parentElement.insertBefore(placeholder, tab.element);
      } else {
        if (tab = tabs[newDropTargetIndex - 1]) {
          tab.element.classList.add('drop-target-is-after');

          if (sibling = tab.element.nextSibling) {
            return tab.element.parentElement.insertBefore(placeholder, sibling);
          } else {
            return tab.element.parentElement.appendChild(placeholder);
          }
        }
      }
    };

    TabBarView.prototype.onDropOnOtherWindow = function (fromPaneId, fromItemIndex) {
      var itemToRemove;

      if (this.pane.id === fromPaneId) {
        if (itemToRemove = this.pane.getItems()[fromItemIndex]) {
          this.pane.destroyItem(itemToRemove);
        }
      }

      return this.clearDropTarget();
    };

    TabBarView.prototype.clearDropTarget = function () {
      var ref, ref1;

      if ((ref = this.draggedTab) != null) {
        ref.element.classList.remove('is-dragging');
      }

      if ((ref1 = this.draggedTab) != null) {
        ref1.updateTooltip();
      }

      this.draggedTab = null;
      this.removeDropTargetClasses();
      return this.removePlaceholder();
    };

    TabBarView.prototype.onDrop = function (event) {
      var droppedURI, fromIndex, fromPane, fromPaneId, fromPaneIndex, fromWindowId, hasUnsavedChanges, item, modifiedText, toIndex, toPane;
      event.preventDefault();

      if (event.dataTransfer.getData('atom-event') !== 'true') {
        return;
      }

      fromWindowId = parseInt(event.dataTransfer.getData('from-window-id'));
      fromPaneId = parseInt(event.dataTransfer.getData('from-pane-id'));
      fromIndex = parseInt(event.dataTransfer.getData('sortable-index'));
      fromPaneIndex = parseInt(event.dataTransfer.getData('from-pane-index'));
      hasUnsavedChanges = event.dataTransfer.getData('has-unsaved-changes') === 'true';
      modifiedText = event.dataTransfer.getData('modified-text');
      toIndex = this.getDropTargetIndex(event);
      toPane = this.pane;
      this.clearDropTarget();

      if (!itemIsAllowed(event, this.location)) {
        return;
      }

      if (fromWindowId === this.getWindowId()) {
        fromPane = this.paneContainer.getPanes()[fromPaneIndex];

        if ((fromPane != null ? fromPane.id : void 0) !== fromPaneId) {
          fromPane = Array.from(document.querySelectorAll('atom-pane')).map(function (paneEl) {
            return paneEl.model;
          }).find(function (pane) {
            return pane.id === fromPaneId;
          });
        }

        item = fromPane.getItems()[fromIndex];

        if (item != null) {
          return this.moveItemBetweenPanes(fromPane, fromIndex, toPane, toIndex, item);
        }
      } else {
        droppedURI = event.dataTransfer.getData('text/plain');
        atom.workspace.open(droppedURI).then(function (_this) {
          return function (item) {
            var activeItemIndex, activePane, browserWindow;
            activePane = atom.workspace.getActivePane();
            activeItemIndex = activePane.getItems().indexOf(item);

            _this.moveItemBetweenPanes(activePane, activeItemIndex, toPane, toIndex, item);

            if (hasUnsavedChanges) {
              if (typeof item.setText === "function") {
                item.setText(modifiedText);
              }
            }

            if (!isNaN(fromWindowId)) {
              browserWindow = _this.browserWindowForId(fromWindowId);
              return browserWindow != null ? browserWindow.webContents.send('tab:dropped', fromPaneId, fromIndex) : void 0;
            }
          };
        }(this));
        return atom.focus();
      }
    };

    TabBarView.prototype.onMouseWheel = function (event) {
      if (event.shiftKey) {
        return;
      }

      if (this.wheelDelta == null) {
        this.wheelDelta = 0;
      }

      this.wheelDelta += event.wheelDeltaY;

      if (this.wheelDelta <= -this.tabScrollingThreshold) {
        this.wheelDelta = 0;
        return this.pane.activateNextItem();
      } else if (this.wheelDelta >= this.tabScrollingThreshold) {
        this.wheelDelta = 0;
        return this.pane.activatePreviousItem();
      }
    };

    TabBarView.prototype.onMouseDown = function (event) {
      var ref, tab;
      tab = this.tabForElement(event.target);

      if (!tab) {
        return;
      }

      if (event.which === 3 || event.which === 1 && event.ctrlKey === true) {
        if ((ref = this.rightClickedTab) != null) {
          ref.element.classList.remove('right-clicked');
        }

        this.rightClickedTab = tab;
        this.rightClickedTab.element.classList.add('right-clicked');
        return event.preventDefault();
      } else if (event.which === 1 && !event.target.classList.contains('close-icon')) {
        return setImmediate(function (_this) {
          return function () {
            _this.pane.activateItem(tab.item);

            if (!_this.pane.isDestroyed()) {
              return _this.pane.activate();
            }
          };
        }(this));
      } else if (event.which === 2) {
        this.pane.destroyItem(tab.item);
        return event.preventDefault();
      }
    };

    TabBarView.prototype.onDoubleClick = function (event) {
      var base, tab;

      if (tab = this.tabForElement(event.target)) {
        return typeof (base = tab.item).terminatePendingState === "function" ? base.terminatePendingState() : void 0;
      } else if (event.target === this.element) {
        atom.commands.dispatch(this.element, 'application:new-file');
        return event.preventDefault();
      }
    };

    TabBarView.prototype.updateTabScrollingThreshold = function () {
      return this.tabScrollingThreshold = atom.config.get('tabs.tabScrollingThreshold');
    };

    TabBarView.prototype.updateTabScrolling = function (value) {
      if (value === 'platform') {
        this.tabScrolling = process.platform === 'linux';
      } else {
        this.tabScrolling = value;
      }

      this.tabScrollingThreshold = atom.config.get('tabs.tabScrollingThreshold');

      if (this.tabScrolling) {
        return this.element.addEventListener('mousewheel', this.onMouseWheel.bind(this));
      } else {
        return this.element.removeEventListener('mousewheel', this.onMouseWheel.bind(this));
      }
    };

    TabBarView.prototype.browserWindowForId = function (id) {
      if (BrowserWindow == null) {
        BrowserWindow = require('electron').remote.BrowserWindow;
      }

      return BrowserWindow.fromId(id);
    };

    TabBarView.prototype.moveItemBetweenPanes = function (fromPane, fromIndex, toPane, toIndex, item) {
      try {
        if (toPane === fromPane) {
          if (fromIndex < toIndex) {
            toIndex--;
          }

          toPane.moveItem(item, toIndex);
        } else {
          this.isItemMovingBetweenPanes = true;
          fromPane.moveItemToPane(item, toPane, toIndex--);
        }

        toPane.activateItem(item);
        return toPane.activate();
      } finally {
        this.isItemMovingBetweenPanes = false;
      }
    };

    TabBarView.prototype.removeDropTargetClasses = function () {
      var dropTarget, j, k, len, len1, ref, ref1, results, workspaceElement;
      workspaceElement = atom.workspace.getElement();
      ref = workspaceElement.querySelectorAll('.tab-bar .is-drop-target');

      for (j = 0, len = ref.length; j < len; j++) {
        dropTarget = ref[j];
        dropTarget.classList.remove('is-drop-target');
      }

      ref1 = workspaceElement.querySelectorAll('.tab-bar .drop-target-is-after');
      results = [];

      for (k = 0, len1 = ref1.length; k < len1; k++) {
        dropTarget = ref1[k];
        results.push(dropTarget.classList.remove('drop-target-is-after'));
      }

      return results;
    };

    TabBarView.prototype.getDropTargetIndex = function (event) {
      var elementCenter, elementIndex, left, ref, tab, tabs, target, width;
      target = event.target;

      if (this.isPlaceholder(target)) {
        return;
      }

      tabs = this.getTabs();
      tab = this.tabForElement(target);

      if (tab == null) {
        tab = tabs[tabs.length - 1];
      }

      if (tab == null) {
        return 0;
      }

      ref = tab.element.getBoundingClientRect(), left = ref.left, width = ref.width;
      elementCenter = left + width / 2;
      elementIndex = tabs.indexOf(tab);

      if (event.pageX < elementCenter) {
        return elementIndex;
      } else {
        return elementIndex + 1;
      }
    };

    TabBarView.prototype.getPlaceholder = function () {
      if (this.placeholderEl != null) {
        return this.placeholderEl;
      }

      this.placeholderEl = document.createElement("li");
      this.placeholderEl.classList.add("placeholder");
      return this.placeholderEl;
    };

    TabBarView.prototype.removePlaceholder = function () {
      var ref;

      if ((ref = this.placeholderEl) != null) {
        ref.remove();
      }

      return this.placeholderEl = null;
    };

    TabBarView.prototype.isPlaceholder = function (element) {
      return element.classList.contains('placeholder');
    };

    TabBarView.prototype.onMouseEnter = function () {
      var j, len, ref, tab, width;
      ref = this.getTabs();

      for (j = 0, len = ref.length; j < len; j++) {
        tab = ref[j];
        width = tab.element.getBoundingClientRect().width;
        tab.element.style.maxWidth = width.toFixed(2) + 'px';
      }
    };

    TabBarView.prototype.onMouseLeave = function () {
      var j, len, ref, tab;
      ref = this.getTabs();

      for (j = 0, len = ref.length; j < len; j++) {
        tab = ref[j];
        tab.element.style.maxWidth = '';
      }
    };

    TabBarView.prototype.tabForElement = function (element) {
      var currentElement, tab;
      currentElement = element;

      while (currentElement != null) {
        if (tab = this.tabsByElement.get(currentElement)) {
          return tab;
        } else {
          currentElement = currentElement.parentElement;
        }
      }
    };

    return TabBarView;
  }();

  isAtomEvent = function (event) {
    var item, j, len, ref;
    ref = event.dataTransfer.items;

    for (j = 0, len = ref.length; j < len; j++) {
      item = ref[j];

      if (item.type === 'atom-event') {
        return true;
      }
    }

    return false;
  };

  itemIsAllowed = function (event, location) {
    var item, j, len, ref;
    ref = event.dataTransfer.items;

    for (j = 0, len = ref.length; j < len; j++) {
      item = ref[j];

      if (item.type === 'allow-all-locations' || item.type === "allowed-location-" + location) {
        return true;
      }
    }

    return false;
  };
}).call(void 0);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL251Y2xpZGUvbnVjbGlkZS1jb21tb25zLXVpL1ZlbmRvckxpYi9hdG9tLXRhYnMvbGliL3RhYi1iYXItdmlldy5qcyJdLCJuYW1lcyI6WyJCcm93c2VyV2luZG93IiwiQ29tcG9zaXRlRGlzcG9zYWJsZSIsIlRhYkJhclZpZXciLCJUYWJWaWV3IiwiXyIsImlwY1JlbmRlcmVyIiwiaXNBdG9tRXZlbnQiLCJpdGVtSXNBbGxvd2VkIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJwYW5lMSIsImxvY2F0aW9uMSIsImFkZEVsZW1lbnRDb21tYW5kcyIsIml0ZW0iLCJqIiwibGVuIiwicmVmIiwicGFuZSIsImxvY2F0aW9uIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsInRhYnMiLCJ0YWJzQnlFbGVtZW50IiwiV2Vha01hcCIsInN1YnNjcmlwdGlvbnMiLCJhdG9tIiwiY29tbWFuZHMiLCJnZXRFbGVtZW50IiwiX3RoaXMiLCJ0ZXJtaW5hdGVQZW5kaW5nU3RhdGVzIiwiY2xvc2VUYWIiLCJnZXRBY3RpdmVUYWIiLCJjbG9zZU90aGVyVGFicyIsImNsb3NlVGFic1RvUmlnaHQiLCJjbG9zZVRhYnNUb0xlZnQiLCJjbG9zZVNhdmVkVGFicyIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2xvc2VBbGxUYWJzIiwib3BlbkluTmV3V2luZG93IiwiY29tbWFuZHNXaXRoUHJvcGFnYXRpb25TdG9wcGVkIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJuYW1lIiwic3BsaXRUYWIiLCJhZGRFdmVudExpc3RlbmVyIiwib25Nb3VzZUVudGVyIiwiYmluZCIsIm9uTW91c2VMZWF2ZSIsIm9uRHJhZ1N0YXJ0Iiwib25EcmFnRW5kIiwib25EcmFnTGVhdmUiLCJvbkRyYWdPdmVyIiwib25Ecm9wIiwicGFuZUNvbnRhaW5lciIsImdldENvbnRhaW5lciIsImdldEl0ZW1zIiwibGVuZ3RoIiwiYWRkVGFiRm9ySXRlbSIsIm9uRGlkRGVzdHJveSIsImRlc3Ryb3kiLCJvbkRpZEFkZEl0ZW0iLCJhcmciLCJpbmRleCIsIm9uRGlkTW92ZUl0ZW0iLCJuZXdJbmRleCIsIm1vdmVJdGVtVGFiVG9JbmRleCIsIm9uRGlkUmVtb3ZlSXRlbSIsInJlbW92ZVRhYkZvckl0ZW0iLCJvbkRpZENoYW5nZUFjdGl2ZUl0ZW0iLCJ1cGRhdGVBY3RpdmVUYWIiLCJjb25maWciLCJvYnNlcnZlIiwidXBkYXRlVGFiU2Nyb2xsaW5nIiwidXBkYXRlVGFiU2Nyb2xsaW5nVGhyZXNob2xkIiwidXBkYXRlVGFiQmFyVmlzaWJpbGl0eSIsIm9uTW91c2VEb3duIiwib25Eb3VibGVDbGljayIsIm9uRHJvcE9uT3RoZXJXaW5kb3ciLCJvbiIsInByb3RvdHlwZSIsInJlbW92ZUxpc3RlbmVyIiwiZGlzcG9zZSIsInJlbW92ZSIsInRhYiIsImdldFRhYnMiLCJ0ZXJtaW5hdGVQZW5kaW5nU3RhdGUiLCJ0YWJWaWV3IiwiZGlkQ2xpY2tDbG9zZUljb24iLCJpc0l0ZW1Nb3ZpbmdCZXR3ZWVuUGFuZXMiLCJzZXQiLCJpbnNlcnRUYWJBdEluZGV4IiwiZ2V0IiwibW92ZUl0ZW0iLCJ0YWJJbmRleCIsImZpbmRJbmRleCIsInQiLCJzcGxpY2UiLCJmb2xsb3dpbmdUYWIiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsInB1c2giLCJ1cGRhdGVUaXRsZSIsInNob3VsZEFsbG93RHJhZyIsInNsaWNlIiwidGFiQXRJbmRleCIsInRhYkZvckl0ZW0iLCJmaW5kIiwic2V0QWN0aXZlVGFiIiwiYWN0aXZlVGFiIiwic2Nyb2xsSW50b1ZpZXciLCJnZXRBY3RpdmVJdGVtIiwicmlnaHRDbGlja2VkVGFiIiwiZGVzdHJveUl0ZW0iLCJpdGVtVVJJIiwicGF0aHNUb09wZW4iLCJnZXRVUkkiLCJnZXRQYXRoIiwiZ2V0VXJpIiwicHJvamVjdCIsImdldFBhdGhzIiwicmVkdWNlIiwiYSIsImIiLCJjb25jYXQiLCJvcGVuIiwibmV3V2luZG93IiwiZGV2TW9kZSIsInNhZmVNb2RlIiwiZm4iLCJjb3BpZWRJdGVtIiwiY29weUl0ZW0iLCJpdGVtcyIsImNvcHkiLCJkZXNlcmlhbGl6ZXJzIiwiZGVzZXJpYWxpemUiLCJzZXJpYWxpemUiLCJhY3RpdmUiLCJyZXN1bHRzIiwiaSIsImluZGV4T2YiLCJiYXNlIiwiaXNNb2RpZmllZCIsImdldFdpbmRvd0lkIiwid2luZG93SWQiLCJnZXRDdXJyZW50V2luZG93IiwiaWQiLCJnZXRQYW5lcyIsInBhbmVJbmRleCIsInJlZjEiLCJyZWYyIiwicmVmMyIsImRyYWdnZWRUYWIiLCJ0YWJGb3JFbGVtZW50IiwidGFyZ2V0IiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImRlc3Ryb3lUb29sdGlwIiwiZ2V0QWxsb3dlZExvY2F0aW9ucyIsInByb2Nlc3MiLCJwbGF0Zm9ybSIsInVyaUhhc1Byb3RvY29sIiwiZ2V0VGV4dCIsInVyaSIsImVycm9yIiwicGFyc2UiLCJwcm90b2NvbCIsImVycm9yMSIsInJlbW92ZVBsYWNlaG9sZGVyIiwiY2xlYXJEcm9wVGFyZ2V0IiwibmV3RHJvcFRhcmdldEluZGV4IiwicGxhY2Vob2xkZXIiLCJzaWJsaW5nIiwicHJldmVudERlZmF1bHQiLCJnZXREcm9wVGFyZ2V0SW5kZXgiLCJyZW1vdmVEcm9wVGFyZ2V0Q2xhc3NlcyIsImdldFBsYWNlaG9sZGVyIiwicGFyZW50RWxlbWVudCIsIm5leHRTaWJsaW5nIiwiZnJvbVBhbmVJZCIsImZyb21JdGVtSW5kZXgiLCJpdGVtVG9SZW1vdmUiLCJ1cGRhdGVUb29sdGlwIiwiZHJvcHBlZFVSSSIsImZyb21JbmRleCIsImZyb21QYW5lIiwiZnJvbVBhbmVJbmRleCIsImZyb21XaW5kb3dJZCIsImhhc1Vuc2F2ZWRDaGFuZ2VzIiwibW9kaWZpZWRUZXh0IiwidG9JbmRleCIsInRvUGFuZSIsImdldERhdGEiLCJwYXJzZUludCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtYXAiLCJwYW5lRWwiLCJtb2RlbCIsIm1vdmVJdGVtQmV0d2VlblBhbmVzIiwid29ya3NwYWNlIiwidGhlbiIsImFjdGl2ZUl0ZW1JbmRleCIsImFjdGl2ZVBhbmUiLCJicm93c2VyV2luZG93IiwiZ2V0QWN0aXZlUGFuZSIsInNldFRleHQiLCJpc05hTiIsImJyb3dzZXJXaW5kb3dGb3JJZCIsIndlYkNvbnRlbnRzIiwic2VuZCIsImZvY3VzIiwib25Nb3VzZVdoZWVsIiwic2hpZnRLZXkiLCJ3aGVlbERlbHRhIiwid2hlZWxEZWx0YVkiLCJ0YWJTY3JvbGxpbmdUaHJlc2hvbGQiLCJhY3RpdmF0ZU5leHRJdGVtIiwiYWN0aXZhdGVQcmV2aW91c0l0ZW0iLCJ3aGljaCIsImN0cmxLZXkiLCJjb250YWlucyIsInNldEltbWVkaWF0ZSIsImFjdGl2YXRlSXRlbSIsImlzRGVzdHJveWVkIiwiYWN0aXZhdGUiLCJkaXNwYXRjaCIsInZhbHVlIiwidGFiU2Nyb2xsaW5nIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW90ZSIsImZyb21JZCIsIm1vdmVJdGVtVG9QYW5lIiwiZHJvcFRhcmdldCIsImsiLCJsZW4xIiwid29ya3NwYWNlRWxlbWVudCIsImVsZW1lbnRDZW50ZXIiLCJlbGVtZW50SW5kZXgiLCJsZWZ0Iiwid2lkdGgiLCJpc1BsYWNlaG9sZGVyIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicGFnZVgiLCJwbGFjZWhvbGRlckVsIiwic3R5bGUiLCJtYXhXaWR0aCIsInRvRml4ZWQiLCJjdXJyZW50RWxlbWVudCIsInR5cGUiLCJjYWxsIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0EsQ0FBQyxZQUFXO0FBQ1YsTUFBSUEsYUFBSixFQUFtQkMsbUJBQW5CLEVBQXdDQyxVQUF4QyxFQUFvREMsT0FBcEQsRUFBNkRDLENBQTdELEVBQWdFQyxXQUFoRSxFQUE2RUMsV0FBN0UsRUFBMEZDLGFBQTFGOztBQUVBUCxFQUFBQSxhQUFhLEdBQUcsSUFBaEI7QUFFQUssRUFBQUEsV0FBVyxHQUFH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c0I3TyxRQUFoRixFQUEyRjtBQUN6RixlQUFPLElBQVA7QUFDRDtBQUNGOztBQUNELFdBQU8sS0FBUDtBQUNELEdBVkQ7QUFZRCxDQW4zQkQsRUFtM0JHOE8sSUFuM0JIIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjJcclxuKGZ1bmN0aW9uKCkge1xyXG4gIHZhciBCcm93c2VyV2luZG93LCBDb21wb3NpdGVEaXNwb3NhYmxlLCBUYWJCYXJWaWV3LCBUYWJWaWV3LCBfLCBpcGNSZW5kZXJlciwgaXNBdG9tRXZlbnQsIGl0ZW1Jc0FsbG93ZWQ7XHJcblxyXG4gIEJyb3dzZXJXaW5kb3cgPSBudWxsO1xyXG5cclxuICBpcGNSZW5kZXJlciA9IHJlcXVpcmUoJ2VsZWN0cm9uJykuaXBjUmVuZGVyZXI7XHJcblxyXG4gIENvbXBvc2l0ZURpc3Bvc2FibGUgPSByZXF1aXJlKCdhdG9tJykuQ29tcG9zaXRlRGlzcG9zYWJsZTtcclxuXHJcbiAgXyA9IHJlcXVpcmUoJ3VuZGVyc2NvcmUtcGx1cycpO1xyXG5cclxuICBUYWJWaWV3ID0gcmVxdWlyZSgnLi90YWItdmlldycpO1xyXG5cclxuICBtb2R1bGUuZXhwb3J0cyA9IFRhYkJhclZpZXcgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICBmdW5jdGlvbiBUYWJCYXJWaWV3KHBhbmUxLCBsb2NhdGlvbjEpIHtcclxuICAgICAgdmFyIGFkZEVsZW1lbnRDb21tYW5kcywgaXRlbSwgaiwgbGVuLCByZWY7XHJcbiAgICAgIHRoaXMucGFuZSA9IHBhbmUxO1xyXG4gICAgICB0aGlzLmxvY2F0aW9uID0gbG9jYXRpb24xO1xyXG4gICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImxpc3QtaW5saW5lXCIpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRhYi1iYXJcIik7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5zZXQtcGFuZWxcIik7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lzJywgJ2F0b20tdGFicycpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgLTEpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwibG9jYXRpb25cIiwgdGhpcy5sb2NhdGlvbik7XHJcbiAgICAgIHRoaXMudGFicyA9IFtdO1xyXG4gICAgICB0aGlzLnRhYnNCeUVsZW1lbnQgPSBuZXcgV2Vha01hcDtcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGU7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQoYXRvbS5jb21tYW5kcy5hZGQodGhpcy5wYW5lLmdldEVsZW1lbnQoKSwge1xyXG4gICAgICAgICd0YWJzOmtlZXAtcGVuZGluZy10YWInOiAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRlcm1pbmF0ZVBlbmRpbmdTdGF0ZXMoKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgJ3RhYnM6Y2xvc2UtdGFiJzogKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5jbG9zZVRhYihfdGhpcy5nZXRBY3RpdmVUYWIoKSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKHRoaXMpLFxyXG4gICAgICAgICd0YWJzOmNsb3NlLW90aGVyLXRhYnMnOiAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNsb3NlT3RoZXJUYWJzKF90aGlzLmdldEFjdGl2ZVRhYigpKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgJ3RhYnM6Y2xvc2UtdGFicy10by1yaWdodCc6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvc2VUYWJzVG9SaWdodChfdGhpcy5nZXRBY3RpdmVUYWIoKSk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKHRoaXMpLFxyXG4gICAgICAgICd0YWJzOmNsb3NlLXRhYnMtdG8tbGVmdCc6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvc2VUYWJzVG9MZWZ0KF90aGlzLmdldEFjdGl2ZVRhYigpKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgJ3RhYnM6Y2xvc2Utc2F2ZWQtdGFicyc6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvc2VTYXZlZFRhYnMoKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgJ3RhYnM6Y2xvc2UtYWxsLXRhYnMnOiAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNsb3NlQWxsVGFicygpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKSxcclxuICAgICAgICAndGFiczpvcGVuLWluLW5ldy13aW5kb3cnOiAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9wZW5Jbk5ld1dpbmRvdygpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKVxyXG4gICAgICB9KSk7XHJcbiAgICAgIGFkZEVsZW1lbnRDb21tYW5kcyA9IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjb21tYW5kcykge1xyXG4gICAgICAgICAgdmFyIGNvbW1hbmRzV2l0aFByb3BhZ2F0aW9uU3RvcHBlZDtcclxuICAgICAgICAgIGNvbW1hbmRzV2l0aFByb3BhZ2F0aW9uU3RvcHBlZCA9IHt9O1xyXG4gICAgICAgICAgT2JqZWN0LmtleXMoY29tbWFuZHMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29tbWFuZHNXaXRoUHJvcGFnYXRpb25TdG9wcGVkW25hbWVdID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICByZXR1cm4gY29tbWFuZHNbbmFtZV0oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIF90aGlzLnN1YnNjcmlwdGlvbnMuYWRkKGF0b20uY29tbWFuZHMuYWRkKF90aGlzLmVsZW1lbnQsIGNvbW1hbmRzV2l0aFByb3BhZ2F0aW9uU3RvcHBlZCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0pKHRoaXMpO1xyXG4gICAgICBhZGRFbGVtZW50Q29tbWFuZHMoe1xyXG4gICAgICAgICd0YWJzOmNsb3NlLXRhYic6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvc2VUYWIoKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgJ3RhYnM6Y2xvc2Utb3RoZXItdGFicyc6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvc2VPdGhlclRhYnMoKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgJ3RhYnM6Y2xvc2UtdGFicy10by1yaWdodCc6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvc2VUYWJzVG9SaWdodCgpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKSxcclxuICAgICAgICAndGFiczpjbG9zZS10YWJzLXRvLWxlZnQnOiAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNsb3NlVGFic1RvTGVmdCgpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKSxcclxuICAgICAgICAndGFiczpjbG9zZS1zYXZlZC10YWJzJzogKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5jbG9zZVNhdmVkVGFicygpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKSxcclxuICAgICAgICAndGFiczpjbG9zZS1hbGwtdGFicyc6IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY2xvc2VBbGxUYWJzKCk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKHRoaXMpLFxyXG4gICAgICAgICd0YWJzOnNwbGl0LXVwJzogKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zcGxpdFRhYignc3BsaXRVcCcpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKSxcclxuICAgICAgICAndGFiczpzcGxpdC1kb3duJzogKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zcGxpdFRhYignc3BsaXREb3duJyk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKHRoaXMpLFxyXG4gICAgICAgICd0YWJzOnNwbGl0LWxlZnQnOiAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNwbGl0VGFiKCdzcGxpdExlZnQnKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgJ3RhYnM6c3BsaXQtcmlnaHQnOiAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNwbGl0VGFiKCdzcGxpdFJpZ2h0Jyk7XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKHRoaXMpXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgdGhpcy5vbk1vdXNlRW50ZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB0aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpKTtcclxuICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgdGhpcy5vbkRyYWdTdGFydC5iaW5kKHRoaXMpKTtcclxuICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIHRoaXMub25EcmFnRW5kLmJpbmQodGhpcykpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLCB0aGlzLm9uRHJhZ0xlYXZlLmJpbmQodGhpcykpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIHRoaXMub25EcmFnT3Zlci5iaW5kKHRoaXMpKTtcclxuICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIHRoaXMub25Ecm9wLmJpbmQodGhpcykpO1xyXG4gICAgICB0aGlzLnBhbmVDb250YWluZXIgPSB0aGlzLnBhbmUuZ2V0Q29udGFpbmVyKCk7XHJcbiAgICAgIHJlZiA9IHRoaXMucGFuZS5nZXRJdGVtcygpO1xyXG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICBpdGVtID0gcmVmW2pdO1xyXG4gICAgICAgIHRoaXMuYWRkVGFiRm9ySXRlbShpdGVtKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucGFuZS5vbkRpZERlc3Ryb3koKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIF90aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9KSh0aGlzKSkpO1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucGFuZS5vbkRpZEFkZEl0ZW0oKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xyXG4gICAgICAgICAgdmFyIGluZGV4LCBpdGVtO1xyXG4gICAgICAgICAgaXRlbSA9IGFyZy5pdGVtLCBpbmRleCA9IGFyZy5pbmRleDtcclxuICAgICAgICAgIHJldHVybiBfdGhpcy5hZGRUYWJGb3JJdGVtKGl0ZW0sIGluZGV4KTtcclxuICAgICAgICB9O1xyXG4gICAgICB9KSh0aGlzKSkpO1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucGFuZS5vbkRpZE1vdmVJdGVtKChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihhcmcpIHtcclxuICAgICAgICAgIHZhciBpdGVtLCBuZXdJbmRleDtcclxuICAgICAgICAgIGl0ZW0gPSBhcmcuaXRlbSwgbmV3SW5kZXggPSBhcmcubmV3SW5kZXg7XHJcbiAgICAgICAgICByZXR1cm4gX3RoaXMubW92ZUl0ZW1UYWJUb0luZGV4KGl0ZW0sIG5ld0luZGV4KTtcclxuICAgICAgICB9O1xyXG4gICAgICB9KSh0aGlzKSkpO1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucGFuZS5vbkRpZFJlbW92ZUl0ZW0oKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xyXG4gICAgICAgICAgdmFyIGl0ZW07XHJcbiAgICAgICAgICBpdGVtID0gYXJnLml0ZW07XHJcbiAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3ZlVGFiRm9ySXRlbShpdGVtKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9KSh0aGlzKSkpO1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMucGFuZS5vbkRpZENoYW5nZUFjdGl2ZUl0ZW0oKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVBY3RpdmVUYWIoKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9KSh0aGlzKSkpO1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKGF0b20uY29uZmlnLm9ic2VydmUoJ3RhYnMudGFiU2Nyb2xsaW5nJywgdGhpcy51cGRhdGVUYWJTY3JvbGxpbmcuYmluZCh0aGlzKSkpO1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKGF0b20uY29uZmlnLm9ic2VydmUoJ3RhYnMudGFiU2Nyb2xsaW5nVGhyZXNob2xkJywgKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZVRhYlNjcm9sbGluZ1RocmVzaG9sZCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0pKHRoaXMpKSk7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQoYXRvbS5jb25maWcub2JzZXJ2ZSgndGFicy5hbHdheXNTaG93VGFiQmFyJywgKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZVRhYkJhclZpc2liaWxpdHkoKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9KSh0aGlzKSkpO1xyXG4gICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVRhYigpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcykpO1xyXG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIHRoaXMub25Eb3VibGVDbGljay5iaW5kKHRoaXMpKTtcclxuICAgICAgdGhpcy5vbkRyb3BPbk90aGVyV2luZG93ID0gdGhpcy5vbkRyb3BPbk90aGVyV2luZG93LmJpbmQodGhpcyk7XHJcbiAgICAgIGlwY1JlbmRlcmVyLm9uKCd0YWI6ZHJvcHBlZCcsIHRoaXMub25Ecm9wT25PdGhlcldpbmRvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpcGNSZW5kZXJlci5yZW1vdmVMaXN0ZW5lcigndGFiOmRyb3BwZWQnLCB0aGlzLm9uRHJvcE9uT3RoZXJXaW5kb3cpO1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZGlzcG9zZSgpO1xyXG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS50ZXJtaW5hdGVQZW5kaW5nU3RhdGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBqLCBsZW4sIHJlZiwgdGFiO1xyXG4gICAgICByZWYgPSB0aGlzLmdldFRhYnMoKTtcclxuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgdGFiID0gcmVmW2pdO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGFiLnRlcm1pbmF0ZVBlbmRpbmdTdGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICB0YWIudGVybWluYXRlUGVuZGluZ1N0YXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLmFkZFRhYkZvckl0ZW0gPSBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgICB2YXIgdGFiVmlldztcclxuICAgICAgdGFiVmlldyA9IG5ldyBUYWJWaWV3KHtcclxuICAgICAgICBpdGVtOiBpdGVtLFxyXG4gICAgICAgIHBhbmU6IHRoaXMucGFuZSxcclxuICAgICAgICB0YWJzOiB0aGlzLnRhYnMsXHJcbiAgICAgICAgZGlkQ2xpY2tDbG9zZUljb246IChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jbG9zZVRhYih0YWJWaWV3KTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcyksXHJcbiAgICAgICAgbG9jYXRpb246IHRoaXMubG9jYXRpb25cclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh0aGlzLmlzSXRlbU1vdmluZ0JldHdlZW5QYW5lcykge1xyXG4gICAgICAgIHRhYlZpZXcudGVybWluYXRlUGVuZGluZ1N0YXRlKCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy50YWJzQnlFbGVtZW50LnNldCh0YWJWaWV3LmVsZW1lbnQsIHRhYlZpZXcpO1xyXG4gICAgICB0aGlzLmluc2VydFRhYkF0SW5kZXgodGFiVmlldywgaW5kZXgpO1xyXG4gICAgICBpZiAoYXRvbS5jb25maWcuZ2V0KCd0YWJzLmFkZE5ld1RhYnNBdEVuZCcpKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzSXRlbU1vdmluZ0JldHdlZW5QYW5lcykge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFuZS5tb3ZlSXRlbShpdGVtLCB0aGlzLnBhbmUuZ2V0SXRlbXMoKS5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUubW92ZUl0ZW1UYWJUb0luZGV4ID0gZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgdmFyIHRhYiwgdGFiSW5kZXg7XHJcbiAgICAgIHRhYkluZGV4ID0gdGhpcy50YWJzLmZpbmRJbmRleChmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgcmV0dXJuIHQuaXRlbSA9PT0gaXRlbTtcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh0YWJJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICB0YWIgPSB0aGlzLnRhYnNbdGFiSW5kZXhdO1xyXG4gICAgICAgIHRhYi5lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMudGFicy5zcGxpY2UodGFiSW5kZXgsIDEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc2VydFRhYkF0SW5kZXgodGFiLCBpbmRleCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUuaW5zZXJ0VGFiQXRJbmRleCA9IGZ1bmN0aW9uKHRhYiwgaW5kZXgpIHtcclxuICAgICAgdmFyIGZvbGxvd2luZ1RhYjtcclxuICAgICAgaWYgKGluZGV4ICE9IG51bGwpIHtcclxuICAgICAgICBmb2xsb3dpbmdUYWIgPSB0aGlzLnRhYnNbaW5kZXhdO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmb2xsb3dpbmdUYWIpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRhYi5lbGVtZW50LCBmb2xsb3dpbmdUYWIuZWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50YWJzLnNwbGljZShpbmRleCwgMCwgdGFiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGFiLmVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudGFicy5wdXNoKHRhYik7XHJcbiAgICAgIH1cclxuICAgICAgdGFiLnVwZGF0ZVRpdGxlKCk7XHJcbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVRhYkJhclZpc2liaWxpdHkoKTtcclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUucmVtb3ZlVGFiRm9ySXRlbSA9IGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgdmFyIGosIGxlbiwgcmVmLCB0YWIsIHRhYkluZGV4O1xyXG4gICAgICB0YWJJbmRleCA9IHRoaXMudGFicy5maW5kSW5kZXgoZnVuY3Rpb24odCkge1xyXG4gICAgICAgIHJldHVybiB0Lml0ZW0gPT09IGl0ZW07XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAodGFiSW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgdGFiID0gdGhpcy50YWJzW3RhYkluZGV4XTtcclxuICAgICAgICB0aGlzLnRhYnMuc3BsaWNlKHRhYkluZGV4LCAxKTtcclxuICAgICAgICB0aGlzLnRhYnNCeUVsZW1lbnRbXCJkZWxldGVcIl0odGFiKTtcclxuICAgICAgICB0YWIuZGVzdHJveSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlZiA9IHRoaXMuZ2V0VGFicygpO1xyXG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICB0YWIgPSByZWZbal07XHJcbiAgICAgICAgdGFiLnVwZGF0ZVRpdGxlKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlVGFiQmFyVmlzaWJpbGl0eSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS51cGRhdGVUYWJCYXJWaXNpYmlsaXR5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICghYXRvbS5jb25maWcuZ2V0KCd0YWJzLmFsd2F5c1Nob3dUYWJCYXInKSAmJiAhdGhpcy5zaG91bGRBbGxvd0RyYWcoKSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5nZXRUYWJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRhYnMuc2xpY2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUudGFiQXRJbmRleCA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRhYnNbaW5kZXhdO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS50YWJGb3JJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICByZXR1cm4gdGhpcy50YWJzLmZpbmQoZnVuY3Rpb24odCkge1xyXG4gICAgICAgIHJldHVybiB0Lml0ZW0gPT09IGl0ZW07XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5zZXRBY3RpdmVUYWIgPSBmdW5jdGlvbih0YWJWaWV3KSB7XHJcbiAgICAgIHZhciByZWY7XHJcbiAgICAgIGlmICgodGFiVmlldyAhPSBudWxsKSAmJiB0YWJWaWV3ICE9PSB0aGlzLmFjdGl2ZVRhYikge1xyXG4gICAgICAgIGlmICgocmVmID0gdGhpcy5hY3RpdmVUYWIpICE9IG51bGwpIHtcclxuICAgICAgICAgIHJlZi5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9IHRhYlZpZXc7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVUYWIuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVUYWIuZWxlbWVudC5zY3JvbGxJbnRvVmlldyhmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUuZ2V0QWN0aXZlVGFiID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRhYkZvckl0ZW0odGhpcy5wYW5lLmdldEFjdGl2ZUl0ZW0oKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLnVwZGF0ZUFjdGl2ZVRhYiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5zZXRBY3RpdmVUYWIodGhpcy50YWJGb3JJdGVtKHRoaXMucGFuZS5nZXRBY3RpdmVJdGVtKCkpKTtcclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUuY2xvc2VUYWIgPSBmdW5jdGlvbih0YWIpIHtcclxuICAgICAgaWYgKHRhYiA9PSBudWxsKSB7XHJcbiAgICAgICAgdGFiID0gdGhpcy5yaWdodENsaWNrZWRUYWI7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRhYiAhPSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFuZS5kZXN0cm95SXRlbSh0YWIuaXRlbSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUub3BlbkluTmV3V2luZG93ID0gZnVuY3Rpb24odGFiKSB7XHJcbiAgICAgIHZhciBpdGVtLCBpdGVtVVJJLCBwYXRoc1RvT3BlbjtcclxuICAgICAgaWYgKHRhYiA9PSBudWxsKSB7XHJcbiAgICAgICAgdGFiID0gdGhpcy5yaWdodENsaWNrZWRUYWI7XHJcbiAgICAgIH1cclxuICAgICAgaXRlbSA9IHRhYiAhPSBudWxsID8gdGFiLml0ZW0gOiB2b2lkIDA7XHJcbiAgICAgIGlmIChpdGVtID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiBpdGVtLmdldFVSSSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGl0ZW1VUkkgPSBpdGVtLmdldFVSSSgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtLmdldFBhdGggPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBpdGVtVVJJID0gaXRlbS5nZXRQYXRoKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGl0ZW0uZ2V0VXJpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgaXRlbVVSSSA9IGl0ZW0uZ2V0VXJpKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGl0ZW1VUkkgPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmNsb3NlVGFiKHRhYik7XHJcbiAgICAgIHBhdGhzVG9PcGVuID0gW2F0b20ucHJvamVjdC5nZXRQYXRocygpLCBpdGVtVVJJXS5yZWR1Y2UoKGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gYS5jb25jYXQoYik7XHJcbiAgICAgIH0pLCBbXSk7XHJcbiAgICAgIHJldHVybiBhdG9tLm9wZW4oe1xyXG4gICAgICAgIHBhdGhzVG9PcGVuOiBwYXRoc1RvT3BlbixcclxuICAgICAgICBuZXdXaW5kb3c6IHRydWUsXHJcbiAgICAgICAgZGV2TW9kZTogYXRvbS5kZXZNb2RlLFxyXG4gICAgICAgIHNhZmVNb2RlOiBhdG9tLnNhZmVNb2RlXHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5zcGxpdFRhYiA9IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgIHZhciBjb3BpZWRJdGVtLCBpdGVtLCByZWY7XHJcbiAgICAgIGlmIChpdGVtID0gKHJlZiA9IHRoaXMucmlnaHRDbGlja2VkVGFiKSAhPSBudWxsID8gcmVmLml0ZW0gOiB2b2lkIDApIHtcclxuICAgICAgICBpZiAoY29waWVkSXRlbSA9IHRoaXMuY29weUl0ZW0oaXRlbSkpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLnBhbmVbZm5dKHtcclxuICAgICAgICAgICAgaXRlbXM6IFtjb3BpZWRJdGVtXVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLmNvcHlJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICB2YXIgcmVmO1xyXG4gICAgICByZXR1cm4gKHJlZiA9IHR5cGVvZiBpdGVtLmNvcHkgPT09IFwiZnVuY3Rpb25cIiA/IGl0ZW0uY29weSgpIDogdm9pZCAwKSAhPSBudWxsID8gcmVmIDogYXRvbS5kZXNlcmlhbGl6ZXJzLmRlc2VyaWFsaXplKGl0ZW0uc2VyaWFsaXplKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5jbG9zZU90aGVyVGFicyA9IGZ1bmN0aW9uKGFjdGl2ZSkge1xyXG4gICAgICB2YXIgaiwgbGVuLCByZXN1bHRzLCB0YWIsIHRhYnM7XHJcbiAgICAgIHRhYnMgPSB0aGlzLmdldFRhYnMoKTtcclxuICAgICAgaWYgKGFjdGl2ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgYWN0aXZlID0gdGhpcy5yaWdodENsaWNrZWRUYWI7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGFjdGl2ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgZm9yIChqID0gMCwgbGVuID0gdGFicy5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgIHRhYiA9IHRhYnNbal07XHJcbiAgICAgICAgaWYgKHRhYiAhPT0gYWN0aXZlKSB7XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5jbG9zZVRhYih0YWIpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLmNsb3NlVGFic1RvUmlnaHQgPSBmdW5jdGlvbihhY3RpdmUpIHtcclxuICAgICAgdmFyIGksIGluZGV4LCBqLCBsZW4sIHJlc3VsdHMsIHRhYiwgdGFicztcclxuICAgICAgdGFicyA9IHRoaXMuZ2V0VGFicygpO1xyXG4gICAgICBpZiAoYWN0aXZlID09IG51bGwpIHtcclxuICAgICAgICBhY3RpdmUgPSB0aGlzLnJpZ2h0Q2xpY2tlZFRhYjtcclxuICAgICAgfVxyXG4gICAgICBpbmRleCA9IHRhYnMuaW5kZXhPZihhY3RpdmUpO1xyXG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgZm9yIChpID0gaiA9IDAsIGxlbiA9IHRhYnMubGVuZ3RoOyBqIDwgbGVuOyBpID0gKytqKSB7XHJcbiAgICAgICAgdGFiID0gdGFic1tpXTtcclxuICAgICAgICBpZiAoaSA+IGluZGV4KSB7XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5jbG9zZVRhYih0YWIpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLmNsb3NlVGFic1RvTGVmdCA9IGZ1bmN0aW9uKGFjdGl2ZSkge1xyXG4gICAgICB2YXIgaSwgaW5kZXgsIGosIGxlbiwgcmVzdWx0cywgdGFiLCB0YWJzO1xyXG4gICAgICB0YWJzID0gdGhpcy5nZXRUYWJzKCk7XHJcbiAgICAgIGlmIChhY3RpdmUgPT0gbnVsbCkge1xyXG4gICAgICAgIGFjdGl2ZSA9IHRoaXMucmlnaHRDbGlja2VkVGFiO1xyXG4gICAgICB9XHJcbiAgICAgIGluZGV4ID0gdGFicy5pbmRleE9mKGFjdGl2ZSk7XHJcbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgcmVzdWx0cyA9IFtdO1xyXG4gICAgICBmb3IgKGkgPSBqID0gMCwgbGVuID0gdGFicy5sZW5ndGg7IGogPCBsZW47IGkgPSArK2opIHtcclxuICAgICAgICB0YWIgPSB0YWJzW2ldO1xyXG4gICAgICAgIGlmIChpIDwgaW5kZXgpIHtcclxuICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmNsb3NlVGFiKHRhYikpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUuY2xvc2VTYXZlZFRhYnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGJhc2UsIGosIGxlbiwgcmVmLCByZXN1bHRzLCB0YWI7XHJcbiAgICAgIHJlZiA9IHRoaXMuZ2V0VGFicygpO1xyXG4gICAgICByZXN1bHRzID0gW107XHJcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgIHRhYiA9IHJlZltqXTtcclxuICAgICAgICBpZiAoISh0eXBlb2YgKGJhc2UgPSB0YWIuaXRlbSkuaXNNb2RpZmllZCA9PT0gXCJmdW5jdGlvblwiID8gYmFzZS5pc01vZGlmaWVkKCkgOiB2b2lkIDApKSB7XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5jbG9zZVRhYih0YWIpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHZvaWQgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5jbG9zZUFsbFRhYnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGosIGxlbiwgcmVmLCByZXN1bHRzLCB0YWI7XHJcbiAgICAgIHJlZiA9IHRoaXMuZ2V0VGFicygpO1xyXG4gICAgICByZXN1bHRzID0gW107XHJcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgIHRhYiA9IHJlZltqXTtcclxuICAgICAgICByZXN1bHRzLnB1c2godGhpcy5jbG9zZVRhYih0YWIpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUuZ2V0V2luZG93SWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRoaXMud2luZG93SWQgIT0gbnVsbCA/IHRoaXMud2luZG93SWQgOiB0aGlzLndpbmRvd0lkID0gYXRvbS5nZXRDdXJyZW50V2luZG93KCkuaWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLnNob3VsZEFsbG93RHJhZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gKHRoaXMucGFuZUNvbnRhaW5lci5nZXRQYW5lcygpLmxlbmd0aCA+IDEpIHx8ICh0aGlzLnBhbmUuZ2V0SXRlbXMoKS5sZW5ndGggPiAxKTtcclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUub25EcmFnU3RhcnQgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIgaXRlbSwgaXRlbVVSSSwgaiwgbGVuLCBsb2NhdGlvbiwgcGFuZUluZGV4LCByZWYsIHJlZjEsIHJlZjIsIHJlZjMsIHRhYkluZGV4O1xyXG4gICAgICB0aGlzLmRyYWdnZWRUYWIgPSB0aGlzLnRhYkZvckVsZW1lbnQoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgaWYgKCF0aGlzLmRyYWdnZWRUYWIpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ2F0b20tZXZlbnQnLCAndHJ1ZScpO1xyXG4gICAgICB0aGlzLmRyYWdnZWRUYWIuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy1kcmFnZ2luZycpO1xyXG4gICAgICB0aGlzLmRyYWdnZWRUYWIuZGVzdHJveVRvb2x0aXAoKTtcclxuICAgICAgdGFiSW5kZXggPSB0aGlzLnRhYnMuaW5kZXhPZih0aGlzLmRyYWdnZWRUYWIpO1xyXG4gICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnc29ydGFibGUtaW5kZXgnLCB0YWJJbmRleCk7XHJcbiAgICAgIHBhbmVJbmRleCA9IHRoaXMucGFuZUNvbnRhaW5lci5nZXRQYW5lcygpLmluZGV4T2YodGhpcy5wYW5lKTtcclxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ2Zyb20tcGFuZS1pbmRleCcsIHBhbmVJbmRleCk7XHJcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCdmcm9tLXBhbmUtaWQnLCB0aGlzLnBhbmUuaWQpO1xyXG4gICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnZnJvbS13aW5kb3ctaWQnLCB0aGlzLmdldFdpbmRvd0lkKCkpO1xyXG4gICAgICBpdGVtID0gdGhpcy5wYW5lLmdldEl0ZW1zKClbdGhpcy50YWJzLmluZGV4T2YodGhpcy5kcmFnZ2VkVGFiKV07XHJcbiAgICAgIGlmIChpdGVtID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiBpdGVtLmdldFVSSSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGl0ZW1VUkkgPSAocmVmID0gaXRlbS5nZXRVUkkoKSkgIT0gbnVsbCA/IHJlZiA6ICcnO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtLmdldFBhdGggPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBpdGVtVVJJID0gKHJlZjEgPSBpdGVtLmdldFBhdGgoKSkgIT0gbnVsbCA/IHJlZjEgOiAnJztcclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5nZXRVcmkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBpdGVtVVJJID0gKHJlZjIgPSBpdGVtLmdldFVyaSgpKSAhPSBudWxsID8gcmVmMiA6ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgaXRlbS5nZXRBbGxvd2VkTG9jYXRpb25zID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcmVmMyA9IGl0ZW0uZ2V0QWxsb3dlZExvY2F0aW9ucygpO1xyXG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgIGxvY2F0aW9uID0gcmVmM1tqXTtcclxuICAgICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwiYWxsb3dlZC1sb2NhdGlvbi1cIiArIGxvY2F0aW9uLCAndHJ1ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnYWxsb3ctYWxsLWxvY2F0aW9ucycsICd0cnVlJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGl0ZW1VUkkgIT0gbnVsbCkge1xyXG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgaXRlbVVSSSk7XHJcbiAgICAgICAgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICdkYXJ3aW4nKSB7XHJcbiAgICAgICAgICBpZiAoIXRoaXMudXJpSGFzUHJvdG9jb2woaXRlbVVSSSkpIHtcclxuICAgICAgICAgICAgaXRlbVVSSSA9IFwiZmlsZTovL1wiICsgaXRlbVVSSTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3VyaS1saXN0JywgaXRlbVVSSSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgodHlwZW9mIGl0ZW0uaXNNb2RpZmllZCA9PT0gXCJmdW5jdGlvblwiID8gaXRlbS5pc01vZGlmaWVkKCkgOiB2b2lkIDApICYmIChpdGVtLmdldFRleHQgIT0gbnVsbCkpIHtcclxuICAgICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCdoYXMtdW5zYXZlZC1jaGFuZ2VzJywgJ3RydWUnKTtcclxuICAgICAgICAgIHJldHVybiBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnbW9kaWZpZWQtdGV4dCcsIGl0ZW0uZ2V0VGV4dCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUudXJpSGFzUHJvdG9jb2wgPSBmdW5jdGlvbih1cmkpIHtcclxuICAgICAgdmFyIGVycm9yO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiByZXF1aXJlKCd1cmwnKS5wYXJzZSh1cmkpLnByb3RvY29sICE9IG51bGw7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yMSkge1xyXG4gICAgICAgIGVycm9yID0gZXJyb3IxO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5vbkRyYWdMZWF2ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnJlbW92ZVBsYWNlaG9sZGVyKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLm9uRHJhZ0VuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIGlmICghdGhpcy50YWJGb3JFbGVtZW50KGV2ZW50LnRhcmdldCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuY2xlYXJEcm9wVGFyZ2V0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLm9uRHJhZ092ZXIgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIgbmV3RHJvcFRhcmdldEluZGV4LCBwbGFjZWhvbGRlciwgc2libGluZywgdGFiLCB0YWJzO1xyXG4gICAgICBpZiAoIWlzQXRvbUV2ZW50KGV2ZW50KSkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIG5ld0Ryb3BUYXJnZXRJbmRleCA9IHRoaXMuZ2V0RHJvcFRhcmdldEluZGV4KGV2ZW50KTtcclxuICAgICAgaWYgKG5ld0Ryb3BUYXJnZXRJbmRleCA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghaXRlbUlzQWxsb3dlZChldmVudCwgdGhpcy5sb2NhdGlvbikpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yZW1vdmVEcm9wVGFyZ2V0Q2xhc3NlcygpO1xyXG4gICAgICB0YWJzID0gdGhpcy5nZXRUYWJzKCk7XHJcbiAgICAgIHBsYWNlaG9sZGVyID0gdGhpcy5nZXRQbGFjZWhvbGRlcigpO1xyXG4gICAgICBpZiAocGxhY2Vob2xkZXIgPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAobmV3RHJvcFRhcmdldEluZGV4IDwgdGFicy5sZW5ndGgpIHtcclxuICAgICAgICB0YWIgPSB0YWJzW25ld0Ryb3BUYXJnZXRJbmRleF07XHJcbiAgICAgICAgdGFiLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtZHJvcC10YXJnZXQnKTtcclxuICAgICAgICByZXR1cm4gdGFiLmVsZW1lbnQucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUocGxhY2Vob2xkZXIsIHRhYi5lbGVtZW50KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGFiID0gdGFic1tuZXdEcm9wVGFyZ2V0SW5kZXggLSAxXSkge1xyXG4gICAgICAgICAgdGFiLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHJvcC10YXJnZXQtaXMtYWZ0ZXInKTtcclxuICAgICAgICAgIGlmIChzaWJsaW5nID0gdGFiLmVsZW1lbnQubmV4dFNpYmxpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhYi5lbGVtZW50LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHBsYWNlaG9sZGVyLCBzaWJsaW5nKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWIuZWxlbWVudC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUub25Ecm9wT25PdGhlcldpbmRvdyA9IGZ1bmN0aW9uKGZyb21QYW5lSWQsIGZyb21JdGVtSW5kZXgpIHtcclxuICAgICAgdmFyIGl0ZW1Ub1JlbW92ZTtcclxuICAgICAgaWYgKHRoaXMucGFuZS5pZCA9PT0gZnJvbVBhbmVJZCkge1xyXG4gICAgICAgIGlmIChpdGVtVG9SZW1vdmUgPSB0aGlzLnBhbmUuZ2V0SXRlbXMoKVtmcm9tSXRlbUluZGV4XSkge1xyXG4gICAgICAgICAgdGhpcy5wYW5lLmRlc3Ryb3lJdGVtKGl0ZW1Ub1JlbW92ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmNsZWFyRHJvcFRhcmdldCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5jbGVhckRyb3BUYXJnZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHJlZiwgcmVmMTtcclxuICAgICAgaWYgKChyZWYgPSB0aGlzLmRyYWdnZWRUYWIpICE9IG51bGwpIHtcclxuICAgICAgICByZWYuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcmFnZ2luZycpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICgocmVmMSA9IHRoaXMuZHJhZ2dlZFRhYikgIT0gbnVsbCkge1xyXG4gICAgICAgIHJlZjEudXBkYXRlVG9vbHRpcCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZHJhZ2dlZFRhYiA9IG51bGw7XHJcbiAgICAgIHRoaXMucmVtb3ZlRHJvcFRhcmdldENsYXNzZXMoKTtcclxuICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlUGxhY2Vob2xkZXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUub25Ecm9wID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgdmFyIGRyb3BwZWRVUkksIGZyb21JbmRleCwgZnJvbVBhbmUsIGZyb21QYW5lSWQsIGZyb21QYW5lSW5kZXgsIGZyb21XaW5kb3dJZCwgaGFzVW5zYXZlZENoYW5nZXMsIGl0ZW0sIG1vZGlmaWVkVGV4dCwgdG9JbmRleCwgdG9QYW5lO1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ2F0b20tZXZlbnQnKSAhPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGZyb21XaW5kb3dJZCA9IHBhcnNlSW50KGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCdmcm9tLXdpbmRvdy1pZCcpKTtcclxuICAgICAgZnJvbVBhbmVJZCA9IHBhcnNlSW50KGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCdmcm9tLXBhbmUtaWQnKSk7XHJcbiAgICAgIGZyb21JbmRleCA9IHBhcnNlSW50KGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCdzb3J0YWJsZS1pbmRleCcpKTtcclxuICAgICAgZnJvbVBhbmVJbmRleCA9IHBhcnNlSW50KGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCdmcm9tLXBhbmUtaW5kZXgnKSk7XHJcbiAgICAgIGhhc1Vuc2F2ZWRDaGFuZ2VzID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ2hhcy11bnNhdmVkLWNoYW5nZXMnKSA9PT0gJ3RydWUnO1xyXG4gICAgICBtb2RpZmllZFRleHQgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgnbW9kaWZpZWQtdGV4dCcpO1xyXG4gICAgICB0b0luZGV4ID0gdGhpcy5nZXREcm9wVGFyZ2V0SW5kZXgoZXZlbnQpO1xyXG4gICAgICB0b1BhbmUgPSB0aGlzLnBhbmU7XHJcbiAgICAgIHRoaXMuY2xlYXJEcm9wVGFyZ2V0KCk7XHJcbiAgICAgIGlmICghaXRlbUlzQWxsb3dlZChldmVudCwgdGhpcy5sb2NhdGlvbikpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGZyb21XaW5kb3dJZCA9PT0gdGhpcy5nZXRXaW5kb3dJZCgpKSB7XHJcbiAgICAgICAgZnJvbVBhbmUgPSB0aGlzLnBhbmVDb250YWluZXIuZ2V0UGFuZXMoKVtmcm9tUGFuZUluZGV4XTtcclxuICAgICAgICBpZiAoKGZyb21QYW5lICE9IG51bGwgPyBmcm9tUGFuZS5pZCA6IHZvaWQgMCkgIT09IGZyb21QYW5lSWQpIHtcclxuICAgICAgICAgIGZyb21QYW5lID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhdG9tLXBhbmUnKSkubWFwKGZ1bmN0aW9uKHBhbmVFbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGFuZUVsLm1vZGVsO1xyXG4gICAgICAgICAgfSkuZmluZChmdW5jdGlvbihwYW5lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYW5lLmlkID09PSBmcm9tUGFuZUlkO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGl0ZW0gPSBmcm9tUGFuZS5nZXRJdGVtcygpW2Zyb21JbmRleF07XHJcbiAgICAgICAgaWYgKGl0ZW0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMubW92ZUl0ZW1CZXR3ZWVuUGFuZXMoZnJvbVBhbmUsIGZyb21JbmRleCwgdG9QYW5lLCB0b0luZGV4LCBpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZHJvcHBlZFVSSSA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XHJcbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub3Blbihkcm9wcGVkVVJJKS50aGVuKChmdW5jdGlvbihfdGhpcykge1xyXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyIGFjdGl2ZUl0ZW1JbmRleCwgYWN0aXZlUGFuZSwgYnJvd3NlcldpbmRvdztcclxuICAgICAgICAgICAgYWN0aXZlUGFuZSA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVBhbmUoKTtcclxuICAgICAgICAgICAgYWN0aXZlSXRlbUluZGV4ID0gYWN0aXZlUGFuZS5nZXRJdGVtcygpLmluZGV4T2YoaXRlbSk7XHJcbiAgICAgICAgICAgIF90aGlzLm1vdmVJdGVtQmV0d2VlblBhbmVzKGFjdGl2ZVBhbmUsIGFjdGl2ZUl0ZW1JbmRleCwgdG9QYW5lLCB0b0luZGV4LCBpdGVtKTtcclxuICAgICAgICAgICAgaWYgKGhhc1Vuc2F2ZWRDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLnNldFRleHQgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUZXh0KG1vZGlmaWVkVGV4dCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4oZnJvbVdpbmRvd0lkKSkge1xyXG4gICAgICAgICAgICAgIGJyb3dzZXJXaW5kb3cgPSBfdGhpcy5icm93c2VyV2luZG93Rm9ySWQoZnJvbVdpbmRvd0lkKTtcclxuICAgICAgICAgICAgICByZXR1cm4gYnJvd3NlcldpbmRvdyAhPSBudWxsID8gYnJvd3NlcldpbmRvdy53ZWJDb250ZW50cy5zZW5kKCd0YWI6ZHJvcHBlZCcsIGZyb21QYW5lSWQsIGZyb21JbmRleCkgOiB2b2lkIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcykpO1xyXG4gICAgICAgIHJldHVybiBhdG9tLmZvY3VzKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUub25Nb3VzZVdoZWVsID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLndoZWVsRGVsdGEgPT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMud2hlZWxEZWx0YSA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy53aGVlbERlbHRhICs9IGV2ZW50LndoZWVsRGVsdGFZO1xyXG4gICAgICBpZiAodGhpcy53aGVlbERlbHRhIDw9IC10aGlzLnRhYlNjcm9sbGluZ1RocmVzaG9sZCkge1xyXG4gICAgICAgIHRoaXMud2hlZWxEZWx0YSA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFuZS5hY3RpdmF0ZU5leHRJdGVtKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy53aGVlbERlbHRhID49IHRoaXMudGFiU2Nyb2xsaW5nVGhyZXNob2xkKSB7XHJcbiAgICAgICAgdGhpcy53aGVlbERlbHRhID0gMDtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYW5lLmFjdGl2YXRlUHJldmlvdXNJdGVtKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUub25Nb3VzZURvd24gPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIgcmVmLCB0YWI7XHJcbiAgICAgIHRhYiA9IHRoaXMudGFiRm9yRWxlbWVudChldmVudC50YXJnZXQpO1xyXG4gICAgICBpZiAoIXRhYikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDMgfHwgKGV2ZW50LndoaWNoID09PSAxICYmIGV2ZW50LmN0cmxLZXkgPT09IHRydWUpKSB7XHJcbiAgICAgICAgaWYgKChyZWYgPSB0aGlzLnJpZ2h0Q2xpY2tlZFRhYikgIT0gbnVsbCkge1xyXG4gICAgICAgICAgcmVmLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncmlnaHQtY2xpY2tlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJpZ2h0Q2xpY2tlZFRhYiA9IHRhYjtcclxuICAgICAgICB0aGlzLnJpZ2h0Q2xpY2tlZFRhYi5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0LWNsaWNrZWQnKTtcclxuICAgICAgICByZXR1cm4gZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfSBlbHNlIGlmIChldmVudC53aGljaCA9PT0gMSAmJiAhZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2xvc2UtaWNvbicpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNldEltbWVkaWF0ZSgoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgX3RoaXMucGFuZS5hY3RpdmF0ZUl0ZW0odGFiLml0ZW0pO1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLnBhbmUuaXNEZXN0cm95ZWQoKSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wYW5lLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSkodGhpcykpO1xyXG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LndoaWNoID09PSAyKSB7XHJcbiAgICAgICAgdGhpcy5wYW5lLmRlc3Ryb3lJdGVtKHRhYi5pdGVtKTtcclxuICAgICAgICByZXR1cm4gZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5vbkRvdWJsZUNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgdmFyIGJhc2UsIHRhYjtcclxuICAgICAgaWYgKHRhYiA9IHRoaXMudGFiRm9yRWxlbWVudChldmVudC50YXJnZXQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiAoYmFzZSA9IHRhYi5pdGVtKS50ZXJtaW5hdGVQZW5kaW5nU3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IGJhc2UudGVybWluYXRlUGVuZGluZ1N0YXRlKCkgOiB2b2lkIDA7XHJcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLmVsZW1lbnQpIHtcclxuICAgICAgICBhdG9tLmNvbW1hbmRzLmRpc3BhdGNoKHRoaXMuZWxlbWVudCwgJ2FwcGxpY2F0aW9uOm5ldy1maWxlJyk7XHJcbiAgICAgICAgcmV0dXJuIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUudXBkYXRlVGFiU2Nyb2xsaW5nVGhyZXNob2xkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnRhYlNjcm9sbGluZ1RocmVzaG9sZCA9IGF0b20uY29uZmlnLmdldCgndGFicy50YWJTY3JvbGxpbmdUaHJlc2hvbGQnKTtcclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUudXBkYXRlVGFiU2Nyb2xsaW5nID0gZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgaWYgKHZhbHVlID09PSAncGxhdGZvcm0nKSB7XHJcbiAgICAgICAgdGhpcy50YWJTY3JvbGxpbmcgPSBwcm9jZXNzLnBsYXRmb3JtID09PSAnbGludXgnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudGFiU2Nyb2xsaW5nID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy50YWJTY3JvbGxpbmdUaHJlc2hvbGQgPSBhdG9tLmNvbmZpZy5nZXQoJ3RhYnMudGFiU2Nyb2xsaW5nVGhyZXNob2xkJyk7XHJcbiAgICAgIGlmICh0aGlzLnRhYlNjcm9sbGluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIHRoaXMub25Nb3VzZVdoZWVsLmJpbmQodGhpcykpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIHRoaXMub25Nb3VzZVdoZWVsLmJpbmQodGhpcykpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLmJyb3dzZXJXaW5kb3dGb3JJZCA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgIGlmIChCcm93c2VyV2luZG93ID09IG51bGwpIHtcclxuICAgICAgICBCcm93c2VyV2luZG93ID0gcmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuQnJvd3NlcldpbmRvdztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gQnJvd3NlcldpbmRvdy5mcm9tSWQoaWQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5tb3ZlSXRlbUJldHdlZW5QYW5lcyA9IGZ1bmN0aW9uKGZyb21QYW5lLCBmcm9tSW5kZXgsIHRvUGFuZSwgdG9JbmRleCwgaXRlbSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmICh0b1BhbmUgPT09IGZyb21QYW5lKSB7XHJcbiAgICAgICAgICBpZiAoZnJvbUluZGV4IDwgdG9JbmRleCkge1xyXG4gICAgICAgICAgICB0b0luZGV4LS07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0b1BhbmUubW92ZUl0ZW0oaXRlbSwgdG9JbmRleCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuaXNJdGVtTW92aW5nQmV0d2VlblBhbmVzID0gdHJ1ZTtcclxuICAgICAgICAgIGZyb21QYW5lLm1vdmVJdGVtVG9QYW5lKGl0ZW0sIHRvUGFuZSwgdG9JbmRleC0tKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdG9QYW5lLmFjdGl2YXRlSXRlbShpdGVtKTtcclxuICAgICAgICByZXR1cm4gdG9QYW5lLmFjdGl2YXRlKCk7XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgdGhpcy5pc0l0ZW1Nb3ZpbmdCZXR3ZWVuUGFuZXMgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5yZW1vdmVEcm9wVGFyZ2V0Q2xhc3NlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgZHJvcFRhcmdldCwgaiwgaywgbGVuLCBsZW4xLCByZWYsIHJlZjEsIHJlc3VsdHMsIHdvcmtzcGFjZUVsZW1lbnQ7XHJcbiAgICAgIHdvcmtzcGFjZUVsZW1lbnQgPSBhdG9tLndvcmtzcGFjZS5nZXRFbGVtZW50KCk7XHJcbiAgICAgIHJlZiA9IHdvcmtzcGFjZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1iYXIgLmlzLWRyb3AtdGFyZ2V0Jyk7XHJcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgIGRyb3BUYXJnZXQgPSByZWZbal07XHJcbiAgICAgICAgZHJvcFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1kcm9wLXRhcmdldCcpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlZjEgPSB3b3Jrc3BhY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYmFyIC5kcm9wLXRhcmdldC1pcy1hZnRlcicpO1xyXG4gICAgICByZXN1bHRzID0gW107XHJcbiAgICAgIGZvciAoayA9IDAsIGxlbjEgPSByZWYxLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xyXG4gICAgICAgIGRyb3BUYXJnZXQgPSByZWYxW2tdO1xyXG4gICAgICAgIHJlc3VsdHMucHVzaChkcm9wVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3AtdGFyZ2V0LWlzLWFmdGVyJykpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5nZXREcm9wVGFyZ2V0SW5kZXggPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIgZWxlbWVudENlbnRlciwgZWxlbWVudEluZGV4LCBsZWZ0LCByZWYsIHRhYiwgdGFicywgdGFyZ2V0LCB3aWR0aDtcclxuICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICBpZiAodGhpcy5pc1BsYWNlaG9sZGVyKHRhcmdldCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdGFicyA9IHRoaXMuZ2V0VGFicygpO1xyXG4gICAgICB0YWIgPSB0aGlzLnRhYkZvckVsZW1lbnQodGFyZ2V0KTtcclxuICAgICAgaWYgKHRhYiA9PSBudWxsKSB7XHJcbiAgICAgICAgdGFiID0gdGFic1t0YWJzLmxlbmd0aCAtIDFdO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0YWIgPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcbiAgICAgIHJlZiA9IHRhYi5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBsZWZ0ID0gcmVmLmxlZnQsIHdpZHRoID0gcmVmLndpZHRoO1xyXG4gICAgICBlbGVtZW50Q2VudGVyID0gbGVmdCArIHdpZHRoIC8gMjtcclxuICAgICAgZWxlbWVudEluZGV4ID0gdGFicy5pbmRleE9mKHRhYik7XHJcbiAgICAgIGlmIChldmVudC5wYWdlWCA8IGVsZW1lbnRDZW50ZXIpIHtcclxuICAgICAgICByZXR1cm4gZWxlbWVudEluZGV4O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50SW5kZXggKyAxO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFRhYkJhclZpZXcucHJvdG90eXBlLmdldFBsYWNlaG9sZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyRWwgIT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBsYWNlaG9sZGVyRWw7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wbGFjZWhvbGRlckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICB0aGlzLnBsYWNlaG9sZGVyRWwuY2xhc3NMaXN0LmFkZChcInBsYWNlaG9sZGVyXCIpO1xyXG4gICAgICByZXR1cm4gdGhpcy5wbGFjZWhvbGRlckVsO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5yZW1vdmVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgcmVmO1xyXG4gICAgICBpZiAoKHJlZiA9IHRoaXMucGxhY2Vob2xkZXJFbCkgIT0gbnVsbCkge1xyXG4gICAgICAgIHJlZi5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5wbGFjZWhvbGRlckVsID0gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgVGFiQmFyVmlldy5wcm90b3R5cGUuaXNQbGFjZWhvbGRlciA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwbGFjZWhvbGRlcicpO1xyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5vbk1vdXNlRW50ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGosIGxlbiwgcmVmLCB0YWIsIHdpZHRoO1xyXG4gICAgICByZWYgPSB0aGlzLmdldFRhYnMoKTtcclxuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgdGFiID0gcmVmW2pdO1xyXG4gICAgICAgIHdpZHRoID0gdGFiLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgICAgICAgdGFiLmVsZW1lbnQuc3R5bGUubWF4V2lkdGggPSB3aWR0aC50b0ZpeGVkKDIpICsgJ3B4JztcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS5vbk1vdXNlTGVhdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGosIGxlbiwgcmVmLCB0YWI7XHJcbiAgICAgIHJlZiA9IHRoaXMuZ2V0VGFicygpO1xyXG4gICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICB0YWIgPSByZWZbal07XHJcbiAgICAgICAgdGFiLmVsZW1lbnQuc3R5bGUubWF4V2lkdGggPSAnJztcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBUYWJCYXJWaWV3LnByb3RvdHlwZS50YWJGb3JFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICB2YXIgY3VycmVudEVsZW1lbnQsIHRhYjtcclxuICAgICAgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICB3aGlsZSAoY3VycmVudEVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgIGlmICh0YWIgPSB0aGlzLnRhYnNCeUVsZW1lbnQuZ2V0KGN1cnJlbnRFbGVtZW50KSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRhYjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gVGFiQmFyVmlldztcclxuXHJcbiAgfSkoKTtcclxuXHJcbiAgaXNBdG9tRXZlbnQgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgdmFyIGl0ZW0sIGosIGxlbiwgcmVmO1xyXG4gICAgcmVmID0gZXZlbnQuZGF0YVRyYW5zZmVyLml0ZW1zO1xyXG4gICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgIGl0ZW0gPSByZWZbal07XHJcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdhdG9tLWV2ZW50Jykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfTtcclxuXHJcbiAgaXRlbUlzQWxsb3dlZCA9IGZ1bmN0aW9uKGV2ZW50LCBsb2NhdGlvbikge1xyXG4gICAgdmFyIGl0ZW0sIGosIGxlbiwgcmVmO1xyXG4gICAgcmVmID0gZXZlbnQuZGF0YVRyYW5zZmVyLml0ZW1zO1xyXG4gICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgIGl0ZW0gPSByZWZbal07XHJcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdhbGxvdy1hbGwtbG9jYXRpb25zJyB8fCBpdGVtLnR5cGUgPT09IChcImFsbG93ZWQtbG9jYXRpb24tXCIgKyBsb2NhdGlvbikpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG59KS5jYWxsKHRoaXMpO1xyXG4iXX0=