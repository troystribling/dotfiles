"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var DebugProtocol = _interopRequireWildcard(require("vscode-debugprotocol"));

var _VsAdapterSpawner = _interopRequireDefault(require("./VsAdapterSpawner"));

var _V8Protocol = _interopRequireDefault(require("./V8Protocol"));

var _rxjsCompatUmdMin = require("rxjs-compat/bundles/rxjs-compat.umd.min.js");

var _idx = _interopRequireDefault(require("idx"));

var _assert = _interopRequireDefault(require("assert"));

var _analytics = require("@atom-ide-community/nuclide-commons/analytics");

var _uuid = _interopRequireDefault(require("uuid"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
function raiseAdapterExitedEvent(exitCode) {
  return {
    seq: 0,
    type: 'event',
    event: 'adapter-exited',
    body: {
      exitCode
    }
  };
}

/**
 * Use V8 JSON-RPC protocol to send & receive messages
 * (requests, responses & events) over `stdio` of adapter child processes.
 */
class VsDebugSession extends _V8Protocol.default {
  constructor(id, logger, adapterExecutable, adapterAnalyticsExtras, spawner, sendPreprocessors = [], receivePreprocessors = [], runInTerminalHandler, isReadOnly = false) {
    super(id, logger, sendPreprocessors, receivePreprocessors);
    this._readyForBreakpoints = void 0;
    this._disconnected = void 0;
    this._adapterProcessSubscription = void 0;
    this._startTime = void 0;
    this.capabilities = void 0;
    this._adapterExecutable = void 0;
    this._spawner = void 0;
    this._adapterAnalyticsExtras = void 0;
    this._adapterErrorOutput = void 0;
    this._onDidInitialize = void 0;
    this._onDidStop = void 0;
    this._onDidContinued = void 0;
    this._onDidTerminateDebugee = void 0;
    this._onDidExitDebugee = void 0;
    this._onDidExitAdapter = void 0;
    this._onDidThread = void 0;
    this._onDidOutput = void 0;
    this._onDidBreakpoint = void 0;
    this._onDidModule = void 0;
    this._onDidLoadSource = void 0;
    this._onDidCustom = void 0;
    this._onDidEvent = void 0;
    this._onDidEvaluate = void 0;
    this._runInTerminalHandler = void 0;
    this._isReadOnly = void 0;
    this._adapterExecutable = adapterExecutable;
    this._readyForBreakpoints = false;
    this._spawner = spawner == null ? new _VsAdapterSpawner.default() : spawner;
    this._isReadOnly = isReadOnly;
    this._adapterAnalyticsExtras = { ...adapterAnalyticsExtras,
      // $FlowFixMe flow doesn't consider uuid callable, but it is
      debuggerSessionId: (0, _uuid.default)()
    };
    this._adapterErrorOutput = '';
    this._onDidInitialize = new _rxjsCompatUmdMin.Subject();
    this._onDidStop = new _rxjsCompatUmdMin.Subject();
    this._onDidContinued = new _rxjsCompatUmdMin.Subject();
    this._onDidTerminateDebugee = new _rxjsCompatUmdMin.Subject();
    this._onDidExitDebugee = new _rxjsCompatUmdMin.Subject();
    this._onDidExitAdapter = new _rxjsCompatUmdMin.Subject();
    this._onDidThread = new _rxjsCompatUmdMin.Subject();
    this._onDidOutput = new _rxjsCompatUmdMin.Subject();
    this._onDidBreakpoint = new _rxjsCompatUmdMin.Subject();
    this._onDidModule = new _rxjsCompatUmdMin.Subject();
    this._onDidLoadSource = new _rxjsCompatUmdMin.Subject();
    this._onDidCustom = new _rxjsCompatUmdMin.Subject();
    this._onDidEvent = new _rxjsCompatUmdMin.Subject();
    this._onDidEvaluate = new _rxjsCompatUmdMin.Subject();
    this.capabilities = {};
    this._runInTerminalHandler = runInTerminalHandler || null;
  }

  observeInitializeEvents() {
    return this._onDidInitialize.asObservable();
  }

  observeStopEvents() {
    return this._onDidStop.asObservable();
  }

  observeContinuedEvents() {
    return this._onDidContinued.asObservable();
  }

  observeTerminateDebugeeEvents() {
    return this._onDidTerminateDebugee.asObservable();
  }

  observeExitedDebugeeEvents() {
    return this._onDidExitDebugee.asObservable();
  }

  observeAdapterExitedEvents() {
    return this._onDidExitAdapter.asObservable();
  }

  observeThreadEvents() {
    return this._onDidThread.asObservable();
  }

  observeOutputEvents() {
    return this._onDidOutput.asObservable();
  }

  observeBreakpointEvents() {
    return this._onDidBreakpoint.asObservable();
  }

  observeModuleEvents() {
    return this._onDidModule.asObservable();
  }

  observeSourceLoadedEvents() {
    return this._onDidLoadSource.asObservable();
  }

  observeCustomEvents() {
    return this._onDidCustom.asObservable();
  }

  observeEvaluations() {
    return this._onDidEvaluate.asObservable();
  }

  observeAllEvents() {
    return this._onDidEvent.asObservable();
  }

  _initServer() {
    if (this._adapterProcessSubscription != null) {
      return;
    }

    this._startServer();

    this._startTime = new Date().getTime();
  }

  custom(request, args) {
    return this.send(request, args);
  }

  send(command, args) {
    this._initServer();

    const operation = () => {
      // Babel Bug: `super` isn't working with `async`
      return super.send(command, args).then(response => {
        const sanitizedResponse = this._sanitizeResponse(response);

        (0, _analytics.track)('vs-debug-session:transaction', { ...this._adapterAnalyticsExtras,
          request: {
            command,
            arguments: args
          },
          response: sanitizedResponse
        });
        return response;
      }, errorResponse => {
        var _errorResponse$body, _errorResponse$body$e;

        let errorMessage = null;
        let showUser = false;
        const errorFormatString = ((_errorResponse$body = errorResponse.body) === null || _errorResponse$body === void 0 ? void 0 : (_errorResponse$body$e = _errorResponse$body.error) === null || _errorResponse$body$e === void 0 ? void 0 : _errorResponse$body$e.format) || '';

        if (errorFormatString !== '') {
          const errorObject = errorResponse.body.error; // Protocol response contained an ErrorResponse with details
          // about how the debug adapter wants us to handle the error.

          errorMessage = String(errorFormatString);
          showUser = Boolean(errorObject.showUser);
          const variables = errorObject.variables;

          if (variables != null) {
            for (const key of Object.keys(variables)) {
              const pattern = new RegExp('{' + key + '}', 'g');
              errorMessage = errorMessage.replace(pattern, variables[key]);
            }
          } // TODO: Allow the consumer of the session to register a global
          // error handler routine so we can still present errors even
          // when running outside of Atom.


          if (Boolean(showUser) && typeof atom !== 'undefined') {
            atom.notifications.addError(errorMessage);
          }
        } else if (errorResponse.message != null) {
          // Response message contained a user-facing string to display.
          errorMessage = errorResponse.message;
        } else {
          var _errorResponse$body2;

          // See if Response message contained a user-facing string to display.
          // The protocol expects message to be on result, not result.body
          // but some debug adapters are doing this incorrectly. Work with
          // them anyway...
          // $FlowIgnore
          errorMessage = (_errorResponse$body2 = errorResponse.body) === null || _errorResponse$body2 === void 0 ? void 0 : _errorResponse$body2.message;
        }

        (0, _analytics.track)('vs-debug-session:transaction', { ...this._adapterAnalyticsExtras,
          request: {
            command,
            arguments: args
          },
          response: errorResponse
        });

        if (errorMessage != null) {
          throw new Error(errorMessage);
        } // If the debug adapter didn't specify what error to
        // show the user, fallback to logging the request/response info.


        let formattedError = (0, _idx.default)(errorResponse, _ => _.body.error.format) || (0, _idx.default)(errorResponse, _ => _.message);

        if (formattedError === '{_stack}') {
          formattedError = JSON.stringify(errorResponse.body.error);
        } else if (formattedError == null) {
          formattedError = [`command: ${command}`, `args: ${JSON.stringify(args)}`, `response: ${JSON.stringify(errorResponse)}`, `adapterExecutable: , ${JSON.stringify(this._adapterExecutable)}`].join(', ');
        }

        throw new Error(formattedError);
      });
    };

    return (0, _analytics.trackTiming)(`vs-debug-session:${command}`, operation, this._adapterAnalyticsExtras);
  }

  _sanitizeResponse(response) {
    try {
      if (response.command === 'variables') {
        const varResponse = response;
        const sanResponse = { ...varResponse,
          body: { ...varResponse.body,
            variables: varResponse.body.variables.map(v => ({ ...v,
              value: '<elided>'
            }))
          }
        }; // $FlowFixMe flow isn't recognizing that ...varResponse is filling in needed members

        return sanResponse;
      }

      if (response.command === 'evaluate') {
        const evalResponse = response;
        const sanResponse = { ...evalResponse,
          body: { ...evalResponse.body,
            result: '<elided>'
          }
        }; // $FlowFixMe flow isn't recognizing that ...evalResponse is filling in needed members

        return sanResponse;
      }

      return response;
    } catch (e) {
      // Don't let a malformed response prevent the response from bubbling up
      // to the debugger
      return {
        type: 'response',
        seq: response.seq,
        request_seq: response.request_seq,
        success: false,
        command: response.command,
        error: 'Error sanitizing response.',
        message: e.message
      };
    }
  }

  onEvent(event) {
    if (event.body != null) {
      // $FlowFixMe `sessionId` isn't in the type def.
      event.body.sessionId = this.getId();
    } else {
      // $FlowFixMe `event.body` type def.
      event.body = {
        sessionId: this.getId()
      };
    }

    (0, _analytics.track)('vs-debug-session:transaction', { ...this._adapterAnalyticsExtras,
      event
    });

    this._onDidEvent.next(event);

    switch (event.event) {
      case 'initialized':
        this._readyForBreakpoints = true;

        this._onDidInitialize.next(event);

        break;

      case 'stopped':
        this._onDidStop.next(event);

        break;

      case 'continued':
        this._onDidContinued.next(event);

        break;

      case 'thread':
        this._onDidThread.next(event);

        break;

      case 'output':
        this._onDidOutput.next(event);

        break;

      case 'breakpoint':
        this._onDidBreakpoint.next(event);

        break;

      case 'terminated':
        this._onDidTerminateDebugee.next(event);

        break;

      case 'exited':
        this._onDidExitDebugee.next(event);

        break;

      case 'adapter-exited':
        this._onDidExitAdapter.next(event);

        break;

      case 'module':
        this._onDidModule.next(event);

        break;

      case 'loadedSource':
        this._onDidLoadSource.next(event);

        break;

      default:
        this._onDidCustom.next(event);

        this._logger.info('Custom event type:', event);

        break;
    }
  }

  getCapabilities() {
    return this.capabilities;
  }

  async initialize(args) {
    const response = await this.send('initialize', args);
    return this._readCapabilities(response);
  }

  _readCapabilities(response) {
    if (response) {
      this.capabilities = { ...this.capabilities,
        ...response.body
      };
    }

    return response;
  }

  async launch(args) {
    const response = await this.send('launch', args);
    return this._readCapabilities(response);
  }

  async attach(args) {
    const response = await this.send('attach', args);
    return this._readCapabilities(response);
  }

  next(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot step.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('next', args);
  }

  stepIn(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot step.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('stepIn', args);
  }

  stepOut(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot step.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('stepOut', args);
  }

  continue(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot continue.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('continue', args);
  }

  pause(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot pause.');
    }

    return this.send('pause', args);
  }

  setVariable(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot set variable.');
    }

    return this.send('setVariable', args).then(response => {
      this._onDidEvaluate.next();

      return response;
    });
  }

  restartFrame(args, threadId) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot restart frame.');
    }

    this._fireFakeContinued(threadId);

    return this.send('restartFrame', args);
  }

  completions(args) {
    return this.send('completions', args);
  }

  async disconnect(restart = false, force = false) {
    if (this._disconnected && force) {
      this._stopServer();

      return;
    }

    if (this._adapterProcessSubscription != null && !this._disconnected) {
      // point of no return: from now on don't report any errors
      this._disconnected = true;
      await _rxjsCompatUmdMin.Observable.fromPromise(this.send('disconnect', {
        restart
      })).timeout(5000).catch(err => {
        if (!(err instanceof _rxjsCompatUmdMin.TimeoutError)) {
          throw err;
        }

        return _rxjsCompatUmdMin.Observable.empty();
      }).toPromise();

      this._stopServer();
    }
  }

  setBreakpoints(args) {
    return this.send('setBreakpoints', args);
  }

  setFunctionBreakpoints(args) {
    return this.send('setFunctionBreakpoints', args);
  }

  setExceptionBreakpoints(args) {
    return this.send('setExceptionBreakpoints', args);
  }

  configurationDone() {
    return this.send('configurationDone', null);
  }

  stackTrace(args) {
    return this.send('stackTrace', args);
  }

  exceptionInfo(args) {
    return this.send('exceptionInfo', args);
  }

  info(args) {
    return this.send('info', args);
  }

  scopes(args) {
    return this.send('scopes', args);
  }

  variables(args) {
    return this.send('variables', args);
  }

  source(args) {
    return this.send('source', args);
  }

  threads() {
    return this.send('threads', null);
  }

  evaluate(args) {
    return this.send('evaluate', args).then(result => {
      if (args.context === 'repl') {
        this._onDidEvaluate.next();
      }

      return result;
    });
  }

  stepBack(args) {
    this._fireFakeContinued(args.threadId);

    return this.send('stepBack', args);
  }

  reverseContinue(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot reverse continue.');
    }

    this._fireFakeContinued(args.threadId);

    return this.send('reverseContinue', args);
  }

  nuclide_continueToLocation(args) {
    if (this._isReadOnly) {
      throw new Error('Read only target cannot run to location.');
    }

    return this.custom('nuclide_continueToLocation', args);
  }

  getLengthInSeconds() {
    return (new Date().getTime() - this._startTime) / 1000;
  }

  async dispatchRequest(request, response) {
    if (request.command === 'runInTerminal') {
      const runInTerminalHandler = this._runInTerminalHandler;

      if (runInTerminalHandler == null) {
        this._logger.error("'runInTerminal' isn't supported for this debug session", request);

        return;
      }

      try {
        await runInTerminalHandler(request.arguments);
      } catch (error) {
        response.success = false;
        response.message = error.message;
      }

      this.sendResponse(response);
    } else if (request.command === 'handshake') {
      this._logger.error('TODO: handshake', request);
    } else {
      response.success = false;
      response.message = `unknown request '${request.command}'`;
      this.sendResponse(response);
    }
  }

  _fireFakeContinued(threadId, allThreadsContinued = false) {
    const event = {
      type: 'event',
      event: 'continued',
      body: {
        threadId,
        // $FlowFixMe
        allThreadsContinued
      },
      seq: 0
    };

    this._onDidContinued.next(event);

    this._onDidEvent.next(event);
  }

  _startServer() {
    this._adapterProcessSubscription = this._spawner.spawnAdapter(this._adapterExecutable).refCount().subscribe(message => {
      if (message.kind === 'stdout') {
        this.handleData(new Buffer(message.data));
      } else if (message.kind === 'stderr') {
        const event = {
          type: 'event',
          event: 'output',
          body: {
            category: 'stderr',
            output: message.data
          },
          seq: 0
        };

        this._onDidOutput.next(event);

        this._onDidEvent.next(event);

        this._logger.error(`adapter stderr: ${message.data}`);

        this._adapterErrorOutput = this._adapterErrorOutput + message.data;
      } else {
        (0, _assert.default)(message.kind === 'exit');
        const exitCode = message.exitCode || 0;

        if (exitCode === 0) {
          this.onServerExit(message.exitCode || 0);
        } else {
          this.onServerError(new Error(`Debug adapter exited with code: ${exitCode}`));
        }
      }
    });
    this.setOutput(this._spawner.write.bind(this._spawner));
  }

  _stopServer() {
    this.onEvent(raiseAdapterExitedEvent(0));

    if (this._adapterProcessSubscription == null) {
      return;
    }

    this._disconnected = true;

    this._adapterProcessSubscription.unsubscribe();

    this._endHandlers();
  }

  _endHandlers() {
    this._onDidInitialize.complete();

    this._onDidStop.complete();

    this._onDidContinued.complete();

    this._onDidTerminateDebugee.complete();

    this._onDidExitDebugee.complete();

    this._onDidExitAdapter.complete();

    this._onDidThread.complete();

    this._onDidOutput.complete();

    this._onDidBreakpoint.complete();

    this._onDidModule.complete();

    this._onDidLoadSource.complete();

    this._onDidCustom.complete();

    this._onDidEvent.complete();
  }

  onServerError(error) {
    this._logger.error('Adapter error:', error);

    this._stopServer();
  }

  onServerExit(code) {
    if (this._adapterProcessSubscription != null) {
      this._adapterProcessSubscription.unsubscribe();

      this._adapterProcessSubscription = null;
    }

    if (!this._disconnected) {
      this._logger.error(`Debug adapter process has terminated unexpectedly ${code}`);
    }

    this.onEvent(raiseAdapterExitedEvent(code));
  }

  isReadyForBreakpoints() {
    return this._readyForBreakpoints;
  }

  isDisconnected() {
    return this._disconnected;
  }

  dispose() {
    if (this._adapterErrorOutput) {
      (0, _analytics.track)('vs-debug-session:transaction', { ...this._adapterAnalyticsExtras,
        response: this._adapterErrorOutput
      });
    }

    this.disconnect();
  }

}

exports.default = VsDebugSession;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1kZWJ1Z2dlci1jb21tb24vVnNEZWJ1Z1Nlc3Npb24uanMiXSwibmFtZXMiOlsicmFpc2VBZGFwdGVyRXhpdGVkRXZlbnQiLCJleGl0Q29kZSIsInNlcSIsInR5cGUiLCJldmVudCIsImJvZHkiLCJWc0RlYnVnU2Vzc2lvbiIsIlY4UHJvdG9jb2wiLCJjb25zdHJ1Y3RvciIsImlkIiwibG9nZ2VyIiwiYWRhcHRlckV4ZWN1dGFibGUiLCJhZGFwdGVyQW5hbHl0aWNzRXh0cmFzIiwic3Bhd25lciIsInNlbmRQcmVwcm9jZXNzb3JzIiwicmVjZWl2ZVByZXByb2Nlc3NvcnMiLCJydW5JblRlcm1pbmFsSGFuZGxlciIsImlzUmVhZE9ubHkiLCJfcmVhZHlGb3JCcmVha3BvaW50cyIsIl9kaXNjb25uZWN0ZWQiLCJfYWRhcHRlclByb2Nlc3NTdWJzY3JpcHRpb24iLCJfc3RhcnRUaW1lIiwiY2FwYWJpbGl0aWVzIiwiX2FkYXB0ZXJFeGVjdXRhYmxlIiwiX3NwYXduZXIiLCJfYWRhcHRlckFuYWx5dGljc0V4dHJhcyIsIl9hZGFwdGVyRXJyb3JPdXRwdXQiLCJfb25EaWRJbml0aWFsaXplIiwiX29uRGlkU3RvcCIsIl9vbkRpZENvbnRpbnVlZCIsIl9vbkRpZFRlcm1pbmF0ZURlYnVnZWUiLCJfb25EaWRFeGl0RGVidWdlZSIsIl9vbkRpZEV4aXRBZGFwdGVyIiwiX29uRGlkVGhyZWFkIiwiX29uRGlkT3V0cHV0IiwiX29uRGlkQnJlYWtwb2ludCIsIl9vbkRpZE1vZHVsZSIsIl9vbkRpZExvYWRTb3VyY2UiLCJfb25EaWRDdXN0b20iLCJfb25EaWRFdmVudCIsIl9vbkRpZEV2YWx1YXRlIiwiX3J1bkluVGVybWluYWxIYW5kbGVyIiwiX2lzUmVhZE9ubHkiLCJWc0FkYXB0ZXJTcGF3bmVyIiwiZGVidWdnZXJTZXNzaW9uSWQiLCJTdWJqZWN0Iiwib2JzZXJ2ZUluaXRpYWxpemVFdmVudHMiLCJhc09ic2VydmFibGUiLCJvYnNlcnZlU3RvcEV2ZW50cyIsIm9ic2VydmVDb250aW51ZWRFdmVudHMiLCJvYnNlcnZlVGVybWluYXRlRGVidWdlZUV2ZW50cyIsIm9ic2VydmVFeGl0ZWREZWJ1Z2VlRXZlbnRzIiwib2JzZXJ2ZUFkYXB0ZXJFeGl0ZWRFdmVudHMiLCJvYnNlcnZlVGhyZWFkRXZlbnRzIiwib2JzZXJ2ZU91dHB1dEV2ZW50cyIsIm9ic2VydmVCcmVha3BvaW50RXZlbnRzIiwib2JzZXJ2ZU1vZHVsZUV2ZW50cyIsIm9ic2VydmVTb3VyY2VMb2FkZWRFdmVudHMiLCJvYnNlcnZlQ3VzdG9tRXZlbnRzIiwib2JzZXJ2ZUV2YWx1YXRpb25zIiwib2JzZXJ2ZUFsbEV2ZW50cyIsIl9pbml0U2VydmVyIiwiX3N0YXJ0U2VydmVyIiwiRGF0ZSIsImdldFRpbWUiLCJjdXN0b20iLCJyZXF1ZXN0IiwiYXJncyIsInNlbmQiLCJjb21tYW5kIiwib3BlcmF0aW9uIiwidGhlbiIsInJlc3BvbnNlIiwic2FuaXRpemVkUmVzcG9uc2UiLCJfc2FuaXRpemVSZXNwb25zZSIsImFyZ3VtZW50cyIsImVycm9yUmVzcG9uc2UiLCJlcnJvck1lc3NhZ2UiLCJzaG93VXNlciIsImVycm9yRm9ybWF0U3RyaW5nIiwiZXJyb3IiLCJmb3JtYXQiLCJlcnJvck9iamVjdCIsIlN0cmluZyIsIkJvb2xlYW4iLCJ2YXJpYWJsZXMiLCJrZXkiLCJPYmplY3QiLCJrZXlzIiwicGF0dGVybiIsIlJlZ0V4cCIsInJlcGxhY2UiLCJhdG9tIiwibm90aWZpY2F0aW9ucyIsImFkZEVycm9yIiwibWVzc2FnZSIsIkVycm9yIiwiZm9ybWF0dGVkRXJyb3IiLCJfIiwiSlNPTiIsInN0cmluZ2lmeSIsImpvaW4iLCJ2YXJSZXNwb25zZSIsInNhblJlc3BvbnNlIiwibWFwIiwidiIsInZhbHVlIiwiZXZhbFJlc3BvbnNlIiwicmVzdWx0IiwiZSIsInJlcXVlc3Rfc2VxIiwic3VjY2VzcyIsIm9uRXZlbnQiLCJzZXNzaW9uSWQiLCJnZXRJZCIsIm5leHQiLCJfbG9nZ2VyIiwiaW5mbyIsImdldENhcGFiaWxpdGllcyIsImluaXRpYWxpemUiLCJfcmVhZENhcGFiaWxpdGllcyIsImxhdW5jaCIsImF0dGFjaCIsIl9maXJlRmFrZUNvbnRpbnVlZCIsInRocmVhZElkIiwic3RlcEluIiwic3RlcE91dCIsImNvbnRpbnVlIiwicGF1c2UiLCJzZXRWYXJpYWJsZSIsInJlc3RhcnRGcmFtZSIsImNvbXBsZXRpb25zIiwiZGlzY29ubmVjdCIsInJlc3RhcnQiLCJmb3JjZSIsIl9zdG9wU2VydmVyIiwiT2JzZXJ2YWJsZSIsImZyb21Qcm9taXNlIiwidGltZW91dCIsImNhdGNoIiwiZXJyIiwiVGltZW91dEVycm9yIiwiZW1wdHkiLCJ0b1Byb21pc2UiLCJzZXRCcmVha3BvaW50cyIsInNldEZ1bmN0aW9uQnJlYWtwb2ludHMiLCJzZXRFeGNlcHRpb25CcmVha3BvaW50cyIsImNvbmZpZ3VyYXRpb25Eb25lIiwic3RhY2tUcmFjZSIsImV4Y2VwdGlvbkluZm8iLCJzY29wZXMiLCJzb3VyY2UiLCJ0aHJlYWRzIiwiZXZhbHVhdGUiLCJjb250ZXh0Iiwic3RlcEJhY2siLCJyZXZlcnNlQ29udGludWUiLCJudWNsaWRlX2NvbnRpbnVlVG9Mb2NhdGlvbiIsImdldExlbmd0aEluU2Vjb25kcyIsImRpc3BhdGNoUmVxdWVzdCIsInNlbmRSZXNwb25zZSIsImFsbFRocmVhZHNDb250aW51ZWQiLCJzcGF3bkFkYXB0ZXIiLCJyZWZDb3VudCIsInN1YnNjcmliZSIsImtpbmQiLCJoYW5kbGVEYXRhIiwiQnVmZmVyIiwiZGF0YSIsImNhdGVnb3J5Iiwib3V0cHV0Iiwib25TZXJ2ZXJFeGl0Iiwib25TZXJ2ZXJFcnJvciIsInNldE91dHB1dCIsIndyaXRlIiwiYmluZCIsInVuc3Vic2NyaWJlIiwiX2VuZEhhbmRsZXJzIiwiY29tcGxldGUiLCJjb2RlIiwiaXNSZWFkeUZvckJyZWFrcG9pbnRzIiwiaXNEaXNjb25uZWN0ZWQiLCJkaXNwb3NlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBWUE7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IDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cclxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXHJcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxyXG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cclxuICpcclxuICogQGZsb3dcclxuICogQGZvcm1hdFxyXG4gKi9cclxuXHJcbmltcG9ydCAqIGFzIERlYnVnUHJvdG9jb2wgZnJvbSAndnNjb2RlLWRlYnVncHJvdG9jb2wnO1xyXG5pbXBvcnQgdHlwZSB7XHJcbiAgSVZzQWRhcHRlclNwYXduZXIsXHJcbiAgTWVzc2FnZVByb2Nlc3NvcixcclxuICBWU0FkYXB0ZXJFeGVjdXRhYmxlSW5mbyxcclxufSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IHR5cGUge1Byb2Nlc3NNZXNzYWdlfSBmcm9tICdAYXRvbS1pZGUtY29tbXVuaXR5L251Y2xpZGUtY29tbW9ucy9wcm9jZXNzJztcclxuXHJcbmltcG9ydCBWc0FkYXB0ZXJTcGF3bmVyIGZyb20gJy4vVnNBZGFwdGVyU3Bhd25lcic7XHJcbmltcG9ydCBWOFByb3RvY29sIGZyb20gJy4vVjhQcm90b2NvbCc7XHJcbmltcG9ydCB7T2JzZXJ2YWJsZSwgU3ViamVjdCwgVGltZW91dEVycm9yfSBmcm9tICdyeGpzLWNvbXBhdC9idW5kbGVzL3J4anMtY29tcGF0LnVtZC5taW4uanMnO1xyXG5pbXBvcnQgaWR4IGZyb20gJ2lkeCc7XHJcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnYXNzZXJ0JztcclxuaW1wb3J0IHt0cmFjaywgdHJhY2tUaW1pbmd9IGZyb20gJ0BhdG9tLWlkZS1jb21tdW5pdHkvbnVjbGlkZS1jb21tb25zL2FuYWx5dGljcyc7XHJcbmltcG9ydCB1dWlkIGZyb20gJ3V1aWQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZGFwdGVyRXhpdGVkRXZlbnQgZXh0ZW5kcyBEZWJ1Z1Byb3RvY29sLkRlYnVnRXZlbnQge1xyXG4gIGV2ZW50OiAnYWRhcHRlci1leGl0ZWQnO1xyXG4gIGJvZHk6IHtleGl0Q29kZTogbnVtYmVyfTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgQWRhcHRlckFuYWx5dGljc0V4dHJhcyA9IHtcclxuICBhZGFwdGVyOiBzdHJpbmcsXHJcbiAgaG9zdDogc3RyaW5nLFxyXG4gIGlzUmVtb3RlOiBib29sZWFuLFxyXG59O1xyXG5cclxuZnVuY3Rpb24gcmFpc2VBZGFwdGVyRXhpdGVkRXZlbnQoZXhpdENvZGU6IG51bWJlcik6IEFkYXB0ZXJFeGl0ZWRFdmVudCB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNlcTogMCxcclxuICAgIHR5cGU6ICdldmVudCcsXHJcbiAgICBldmVudDogJ2FkYXB0ZXItZXhpdGVkJyxcclxuICAgIGJvZHk6IHtleGl0Q29kZX0sXHJcbiAgfTtcclxufVxyXG5cclxudHlwZSBSdW5JblRlcm1pbmFsSGFuZGxlciA9IChcclxuICBhcmd1bWVudHM6IERlYnVnUHJvdG9jb2wuUnVuSW5UZXJtaW5hbFJlcXVlc3RBcmd1bWVudHMsXHJcbikgPT4gUHJvbWlzZTx2b2lkPjtcclxuXHJcbi8qKlxyXG4gKiBVc2UgVjggSlNPTi1SUEMgcHJvdG9jb2wgdG8gc2VuZCAmIHJlY2VpdmUgbWVzc2FnZXNcclxuICogKHJlcXVlc3RzLCByZXNwb25zZXMgJiBldmVudHMpIG92ZXIgYHN0ZGlvYCBvZiBhZGFwdGVyIGNoaWxkIHByb2Nlc3Nlcy5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZzRGVidWdTZXNzaW9uIGV4dGVuZHMgVjhQcm90b2NvbCB7XHJcbiAgX3JlYWR5Rm9yQnJlYWtwb2ludHM6IGJvb2xlYW47XHJcbiAgX2Rpc2Nvbm5lY3RlZDogYm9vbGVhbjtcclxuXHJcbiAgX2FkYXB0ZXJQcm9jZXNzU3Vic2NyaXB0aW9uOiA/cnhqcyRTdWJzY3JpcHRpb247XHJcbiAgX3N0YXJ0VGltZTogbnVtYmVyO1xyXG5cclxuICBjYXBhYmlsaXRpZXM6IERlYnVnUHJvdG9jb2wuQ2FwYWJpbGl0aWVzO1xyXG4gIF9hZGFwdGVyRXhlY3V0YWJsZTogVlNBZGFwdGVyRXhlY3V0YWJsZUluZm87XHJcbiAgX3NwYXduZXI6IElWc0FkYXB0ZXJTcGF3bmVyO1xyXG4gIF9hZGFwdGVyQW5hbHl0aWNzRXh0cmFzOiBBZGFwdGVyQW5hbHl0aWNzRXh0cmFzO1xyXG4gIF9hZGFwdGVyRXJyb3JPdXRwdXQ6IHN0cmluZztcclxuXHJcbiAgX29uRGlkSW5pdGlhbGl6ZTogU3ViamVjdDxEZWJ1Z1Byb3RvY29sLkluaXRpYWxpemVkRXZlbnQ+O1xyXG4gIF9vbkRpZFN0b3A6IFN1YmplY3Q8RGVidWdQcm90b2NvbC5TdG9wcGVkRXZlbnQ+O1xyXG4gIF9vbkRpZENvbnRpbnVlZDogU3ViamVjdDxEZWJ1Z1Byb3RvY29sLkNvbnRpbnVlZEV2ZW50PjtcclxuICBfb25EaWRUZXJtaW5hdGVEZWJ1Z2VlOiBTdWJqZWN0PERlYnVnUHJvdG9jb2wuVGVybWluYXRlZEV2ZW50PjtcclxuICBfb25EaWRFeGl0RGVidWdlZTogU3ViamVjdDxEZWJ1Z1Byb3RvY29sLkV4aXRlZEV2ZW50PjtcclxuICBfb25EaWRFeGl0QWRhcHRlcjogU3ViamVjdDxBZGFwdGVyRXhpdGVkRXZlbnQ+O1xyXG4gIF9vbkRpZFRocmVhZDogU3ViamVjdDxEZWJ1Z1Byb3RvY29sLlRocmVhZEV2ZW50PjtcclxuICBfb25EaWRPdXRwdXQ6IFN1YmplY3Q8RGVidWdQcm90b2NvbC5PdXRwdXRFdmVudD47XHJcbiAgX29uRGlkQnJlYWtwb2ludDogU3ViamVjdDxEZWJ1Z1Byb3RvY29sLkJyZWFrcG9pbnRFdmVudD47XHJcbiAgX29uRGlkTW9kdWxlOiBTdWJqZWN0PERlYnVnUHJvdG9jb2wuTW9kdWxlRXZlbnQ+O1xyXG4gIF9vbkRpZExvYWRTb3VyY2U6IFN1YmplY3Q8RGVidWdQcm90b2NvbC5Mb2FkZWRTb3VyY2VFdmVudD47XHJcbiAgX29uRGlkQ3VzdG9tOiBTdWJqZWN0PERlYnVnUHJvdG9jb2wuRGVidWdFdmVudD47XHJcbiAgX29uRGlkRXZlbnQ6IFN1YmplY3Q8RGVidWdQcm90b2NvbC5FdmVudCB8IEFkYXB0ZXJFeGl0ZWRFdmVudD47XHJcbiAgX29uRGlkRXZhbHVhdGU6IFN1YmplY3Q8dm9pZD47XHJcbiAgX3J1bkluVGVybWluYWxIYW5kbGVyOiA/UnVuSW5UZXJtaW5hbEhhbmRsZXI7XHJcbiAgX2lzUmVhZE9ubHk6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgaWQ6IHN0cmluZyxcclxuICAgIGxvZ2dlcjogbG9nNGpzJExvZ2dlcixcclxuICAgIGFkYXB0ZXJFeGVjdXRhYmxlOiBWU0FkYXB0ZXJFeGVjdXRhYmxlSW5mbyxcclxuICAgIGFkYXB0ZXJBbmFseXRpY3NFeHRyYXM6ID9BZGFwdGVyQW5hbHl0aWNzRXh0cmFzLFxyXG4gICAgc3Bhd25lcj86IElWc0FkYXB0ZXJTcGF3bmVyLFxyXG4gICAgc2VuZFByZXByb2Nlc3NvcnM/OiBNZXNzYWdlUHJvY2Vzc29yW10gPSBbXSxcclxuICAgIHJlY2VpdmVQcmVwcm9jZXNzb3JzPzogTWVzc2FnZVByb2Nlc3NvcltdID0gW10sXHJcbiAgICBydW5JblRlcm1pbmFsSGFuZGxlcj86IFJ1bkluVGVybWluYWxIYW5kbGVyLFxyXG4gICAgaXNSZWFkT25seT86IGJvb2xlYW4gPSBmYWxzZSxcclxuICApIHtcclxuICAgIHN1cGVyKGlkLCBsb2dnZXIsIHNlbmRQcmVwcm9jZXNzb3JzLCByZWNlaXZlUHJlcHJvY2Vzc29ycyk7XHJcbiAgICB0aGlzLl9hZGFwdGVyRXhlY3V0YWJsZSA9IGFkYXB0ZXJFeGVjdXRhYmxlO1xyXG4gICAgdGhpcy5fcmVhZHlGb3JCcmVha3BvaW50cyA9IGZhbHNlO1xyXG4gICAgdGhpcy5fc3Bhd25lciA9IHNwYXduZXIgPT0gbnVsbCA/IG5ldyBWc0FkYXB0ZXJTcGF3bmVyKCkgOiBzcGF3bmVyO1xyXG4gICAgdGhpcy5faXNSZWFkT25seSA9IGlzUmVhZE9ubHk7XHJcbiAgICB0aGlzLl9hZGFwdGVyQW5hbHl0aWNzRXh0cmFzID0ge1xyXG4gICAgICAuLi5hZGFwdGVyQW5hbHl0aWNzRXh0cmFzLFxyXG4gICAgICAvLyAkRmxvd0ZpeE1lIGZsb3cgZG9lc24ndCBjb25zaWRlciB1dWlkIGNhbGxhYmxlLCBidXQgaXQgaXNcclxuICAgICAgZGVidWdnZXJTZXNzaW9uSWQ6IHV1aWQoKSxcclxuICAgIH07XHJcbiAgICB0aGlzLl9hZGFwdGVyRXJyb3JPdXRwdXQgPSAnJztcclxuXHJcbiAgICB0aGlzLl9vbkRpZEluaXRpYWxpemUgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5fb25EaWRTdG9wID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkQ29udGludWVkID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkVGVybWluYXRlRGVidWdlZSA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLl9vbkRpZEV4aXREZWJ1Z2VlID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkRXhpdEFkYXB0ZXIgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5fb25EaWRUaHJlYWQgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5fb25EaWRPdXRwdXQgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5fb25EaWRCcmVha3BvaW50ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkTW9kdWxlID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkTG9hZFNvdXJjZSA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLl9vbkRpZEN1c3RvbSA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB0aGlzLl9vbkRpZEV2ZW50ID0gbmV3IFN1YmplY3QoKTtcclxuICAgIHRoaXMuX29uRGlkRXZhbHVhdGUgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgdGhpcy5jYXBhYmlsaXRpZXMgPSB7fTtcclxuICAgIHRoaXMuX3J1bkluVGVybWluYWxIYW5kbGVyID0gcnVuSW5UZXJtaW5hbEhhbmRsZXIgfHwgbnVsbDtcclxuICB9XHJcblxyXG4gIG9ic2VydmVJbml0aWFsaXplRXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5Jbml0aWFsaXplZEV2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRJbml0aWFsaXplLmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgb2JzZXJ2ZVN0b3BFdmVudHMoKTogT2JzZXJ2YWJsZTxEZWJ1Z1Byb3RvY29sLlN0b3BwZWRFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkU3RvcC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVDb250aW51ZWRFdmVudHMoKTogT2JzZXJ2YWJsZTxEZWJ1Z1Byb3RvY29sLkNvbnRpbnVlZEV2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRDb250aW51ZWQuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlVGVybWluYXRlRGVidWdlZUV2ZW50cygpOiBPYnNlcnZhYmxlPERlYnVnUHJvdG9jb2wuVGVybWluYXRlZEV2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRUZXJtaW5hdGVEZWJ1Z2VlLmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgb2JzZXJ2ZUV4aXRlZERlYnVnZWVFdmVudHMoKTogT2JzZXJ2YWJsZTxEZWJ1Z1Byb3RvY29sLkV4aXRlZEV2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRFeGl0RGVidWdlZS5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVBZGFwdGVyRXhpdGVkRXZlbnRzKCk6IE9ic2VydmFibGU8QWRhcHRlckV4aXRlZEV2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRFeGl0QWRhcHRlci5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVUaHJlYWRFdmVudHMoKTogT2JzZXJ2YWJsZTxEZWJ1Z1Byb3RvY29sLlRocmVhZEV2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRUaHJlYWQuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlT3V0cHV0RXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5PdXRwdXRFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkT3V0cHV0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgb2JzZXJ2ZUJyZWFrcG9pbnRFdmVudHMoKTogT2JzZXJ2YWJsZTxEZWJ1Z1Byb3RvY29sLkJyZWFrcG9pbnRFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkQnJlYWtwb2ludC5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVNb2R1bGVFdmVudHMoKTogT2JzZXJ2YWJsZTxEZWJ1Z1Byb3RvY29sLk1vZHVsZUV2ZW50PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb25EaWRNb2R1bGUuYXNPYnNlcnZhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlU291cmNlTG9hZGVkRXZlbnRzKCk6IE9ic2VydmFibGU8RGVidWdQcm90b2NvbC5Mb2FkZWRTb3VyY2VFdmVudD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX29uRGlkTG9hZFNvdXJjZS5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVDdXN0b21FdmVudHMoKTogT2JzZXJ2YWJsZTxEZWJ1Z1Byb3RvY29sLkRlYnVnRXZlbnQ+IHtcclxuICAgIHJldHVybiB0aGlzLl9vbkRpZEN1c3RvbS5hc09ic2VydmFibGUoKTtcclxuICB9XHJcblxyXG4gIG9ic2VydmVFdmFsdWF0aW9ucygpOiBPYnNlcnZhYmxlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLl9vbkRpZEV2YWx1YXRlLmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgb2JzZXJ2ZUFsbEV2ZW50cygpOiBPYnNlcnZhYmxlPERlYnVnUHJvdG9jb2wuRXZlbnQgfCBBZGFwdGVyRXhpdGVkRXZlbnQ+IHtcclxuICAgIHJldHVybiB0aGlzLl9vbkRpZEV2ZW50LmFzT2JzZXJ2YWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgX2luaXRTZXJ2ZXIoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5fYWRhcHRlclByb2Nlc3NTdWJzY3JpcHRpb24gIT0gbnVsbCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc3RhcnRTZXJ2ZXIoKTtcclxuICAgIHRoaXMuX3N0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gIH1cclxuXHJcbiAgY3VzdG9tKHJlcXVlc3Q6IHN0cmluZywgYXJnczogYW55KTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLkN1c3RvbVJlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKHJlcXVlc3QsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgc2VuZChjb21tYW5kOiBzdHJpbmcsIGFyZ3M6IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgICB0aGlzLl9pbml0U2VydmVyKCk7XHJcblxyXG4gICAgY29uc3Qgb3BlcmF0aW9uID0gKCk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgICAgIC8vIEJhYmVsIEJ1ZzogYHN1cGVyYCBpc24ndCB3b3JraW5nIHdpdGggYGFzeW5jYFxyXG4gICAgICByZXR1cm4gc3VwZXIuc2VuZChjb21tYW5kLCBhcmdzKS50aGVuKFxyXG4gICAgICAgIChyZXNwb25zZTogRGVidWdQcm90b2NvbC5SZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qgc2FuaXRpemVkUmVzcG9uc2UgPSB0aGlzLl9zYW5pdGl6ZVJlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgIHRyYWNrKCd2cy1kZWJ1Zy1zZXNzaW9uOnRyYW5zYWN0aW9uJywge1xyXG4gICAgICAgICAgICAuLi50aGlzLl9hZGFwdGVyQW5hbHl0aWNzRXh0cmFzLFxyXG4gICAgICAgICAgICByZXF1ZXN0OiB7Y29tbWFuZCwgYXJndW1lbnRzOiBhcmdzfSxcclxuICAgICAgICAgICAgcmVzcG9uc2U6IHNhbml0aXplZFJlc3BvbnNlLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAoZXJyb3JSZXNwb25zZTogRGVidWdQcm90b2NvbC5FcnJvclJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gbnVsbDtcclxuICAgICAgICAgIGxldCBzaG93VXNlciA9IGZhbHNlO1xyXG4gICAgICAgICAgY29uc3QgZXJyb3JGb3JtYXRTdHJpbmcgPSBlcnJvclJlc3BvbnNlLmJvZHk/LmVycm9yPy5mb3JtYXQgfHwgJyc7XHJcbiAgICAgICAgICBpZiAoZXJyb3JGb3JtYXRTdHJpbmcgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yT2JqZWN0OiBEZWJ1Z1Byb3RvY29sLk1lc3NhZ2UgPSAoZXJyb3JSZXNwb25zZS5ib2R5XHJcbiAgICAgICAgICAgICAgLmVycm9yOiBhbnkpO1xyXG4gICAgICAgICAgICAvLyBQcm90b2NvbCByZXNwb25zZSBjb250YWluZWQgYW4gRXJyb3JSZXNwb25zZSB3aXRoIGRldGFpbHNcclxuICAgICAgICAgICAgLy8gYWJvdXQgaG93IHRoZSBkZWJ1ZyBhZGFwdGVyIHdhbnRzIHVzIHRvIGhhbmRsZSB0aGUgZXJyb3IuXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFN0cmluZyhlcnJvckZvcm1hdFN0cmluZyk7XHJcbiAgICAgICAgICAgIHNob3dVc2VyID0gQm9vbGVhbihlcnJvck9iamVjdC5zaG93VXNlcik7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlcyA9IGVycm9yT2JqZWN0LnZhcmlhYmxlcztcclxuICAgICAgICAgICAgaWYgKHZhcmlhYmxlcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFyaWFibGVzKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0dGVybiA9IG5ldyBSZWdFeHAoJ3snICsga2V5ICsgJ30nLCAnZycpO1xyXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlLnJlcGxhY2UocGF0dGVybiwgdmFyaWFibGVzW2tleV0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogQWxsb3cgdGhlIGNvbnN1bWVyIG9mIHRoZSBzZXNzaW9uIHRvIHJlZ2lzdGVyIGEgZ2xvYmFsXHJcbiAgICAgICAgICAgIC8vIGVycm9yIGhhbmRsZXIgcm91dGluZSBzbyB3ZSBjYW4gc3RpbGwgcHJlc2VudCBlcnJvcnMgZXZlblxyXG4gICAgICAgICAgICAvLyB3aGVuIHJ1bm5pbmcgb3V0c2lkZSBvZiBBdG9tLlxyXG4gICAgICAgICAgICBpZiAoQm9vbGVhbihzaG93VXNlcikgJiYgdHlwZW9mIGF0b20gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgYXRvbS5ub3RpZmljYXRpb25zLmFkZEVycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3JSZXNwb25zZS5tZXNzYWdlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gUmVzcG9uc2UgbWVzc2FnZSBjb250YWluZWQgYSB1c2VyLWZhY2luZyBzdHJpbmcgdG8gZGlzcGxheS5cclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JSZXNwb25zZS5tZXNzYWdlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gU2VlIGlmIFJlc3BvbnNlIG1lc3NhZ2UgY29udGFpbmVkIGEgdXNlci1mYWNpbmcgc3RyaW5nIHRvIGRpc3BsYXkuXHJcbiAgICAgICAgICAgIC8vIFRoZSBwcm90b2NvbCBleHBlY3RzIG1lc3NhZ2UgdG8gYmUgb24gcmVzdWx0LCBub3QgcmVzdWx0LmJvZHlcclxuICAgICAgICAgICAgLy8gYnV0IHNvbWUgZGVidWcgYWRhcHRlcnMgYXJlIGRvaW5nIHRoaXMgaW5jb3JyZWN0bHkuIFdvcmsgd2l0aFxyXG4gICAgICAgICAgICAvLyB0aGVtIGFueXdheS4uLlxyXG4gICAgICAgICAgICAvLyAkRmxvd0lnbm9yZVxyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvclJlc3BvbnNlLmJvZHk/Lm1lc3NhZ2U7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdHJhY2soJ3ZzLWRlYnVnLXNlc3Npb246dHJhbnNhY3Rpb24nLCB7XHJcbiAgICAgICAgICAgIC4uLnRoaXMuX2FkYXB0ZXJBbmFseXRpY3NFeHRyYXMsXHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IHtjb21tYW5kLCBhcmd1bWVudHM6IGFyZ3N9LFxyXG4gICAgICAgICAgICByZXNwb25zZTogZXJyb3JSZXNwb25zZSxcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGlmIChlcnJvck1lc3NhZ2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBJZiB0aGUgZGVidWcgYWRhcHRlciBkaWRuJ3Qgc3BlY2lmeSB3aGF0IGVycm9yIHRvXHJcbiAgICAgICAgICAvLyBzaG93IHRoZSB1c2VyLCBmYWxsYmFjayB0byBsb2dnaW5nIHRoZSByZXF1ZXN0L3Jlc3BvbnNlIGluZm8uXHJcbiAgICAgICAgICBsZXQgZm9ybWF0dGVkRXJyb3IgPVxyXG4gICAgICAgICAgICBpZHgoZXJyb3JSZXNwb25zZSwgXyA9PiBfLmJvZHkuZXJyb3IuZm9ybWF0KSB8fFxyXG4gICAgICAgICAgICBpZHgoZXJyb3JSZXNwb25zZSwgXyA9PiBfLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgaWYgKGZvcm1hdHRlZEVycm9yID09PSAne19zdGFja30nKSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHRlZEVycm9yID0gSlNPTi5zdHJpbmdpZnkoZXJyb3JSZXNwb25zZS5ib2R5LmVycm9yKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0dGVkRXJyb3IgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWRFcnJvciA9IFtcclxuICAgICAgICAgICAgICBgY29tbWFuZDogJHtjb21tYW5kfWAsXHJcbiAgICAgICAgICAgICAgYGFyZ3M6ICR7SlNPTi5zdHJpbmdpZnkoYXJncyl9YCxcclxuICAgICAgICAgICAgICBgcmVzcG9uc2U6ICR7SlNPTi5zdHJpbmdpZnkoZXJyb3JSZXNwb25zZSl9YCxcclxuICAgICAgICAgICAgICBgYWRhcHRlckV4ZWN1dGFibGU6ICwgJHtKU09OLnN0cmluZ2lmeSh0aGlzLl9hZGFwdGVyRXhlY3V0YWJsZSl9YCxcclxuICAgICAgICAgICAgXS5qb2luKCcsICcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdHRlZEVycm9yKTtcclxuICAgICAgICB9LFxyXG4gICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdHJhY2tUaW1pbmcoXHJcbiAgICAgIGB2cy1kZWJ1Zy1zZXNzaW9uOiR7Y29tbWFuZH1gLFxyXG4gICAgICBvcGVyYXRpb24sXHJcbiAgICAgIHRoaXMuX2FkYXB0ZXJBbmFseXRpY3NFeHRyYXMsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX3Nhbml0aXplUmVzcG9uc2UoXHJcbiAgICByZXNwb25zZTogRGVidWdQcm90b2NvbC5iYXNlJFJlc3BvbnNlLFxyXG4gICk6IERlYnVnUHJvdG9jb2wuYmFzZSRSZXNwb25zZSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAocmVzcG9uc2UuY29tbWFuZCA9PT0gJ3ZhcmlhYmxlcycpIHtcclxuICAgICAgICBjb25zdCB2YXJSZXNwb25zZSA9ICgocmVzcG9uc2U6IGFueSk6IERlYnVnUHJvdG9jb2wuVmFyaWFibGVzUmVzcG9uc2UpO1xyXG4gICAgICAgIGNvbnN0IHNhblJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgLi4udmFyUmVzcG9uc2UsXHJcbiAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgIC4uLnZhclJlc3BvbnNlLmJvZHksXHJcbiAgICAgICAgICAgIHZhcmlhYmxlczogdmFyUmVzcG9uc2UuYm9keS52YXJpYWJsZXMubWFwKHYgPT4gKHtcclxuICAgICAgICAgICAgICAuLi52LFxyXG4gICAgICAgICAgICAgIHZhbHVlOiAnPGVsaWRlZD4nLFxyXG4gICAgICAgICAgICB9KSksXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gJEZsb3dGaXhNZSBmbG93IGlzbid0IHJlY29nbml6aW5nIHRoYXQgLi4udmFyUmVzcG9uc2UgaXMgZmlsbGluZyBpbiBuZWVkZWQgbWVtYmVyc1xyXG4gICAgICAgIHJldHVybiBzYW5SZXNwb25zZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmVzcG9uc2UuY29tbWFuZCA9PT0gJ2V2YWx1YXRlJykge1xyXG4gICAgICAgIGNvbnN0IGV2YWxSZXNwb25zZSA9ICgocmVzcG9uc2U6IGFueSk6IERlYnVnUHJvdG9jb2wuRXZhbHVhdGVSZXNwb25zZSk7XHJcbiAgICAgICAgY29uc3Qgc2FuUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAuLi5ldmFsUmVzcG9uc2UsXHJcbiAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgIC4uLmV2YWxSZXNwb25zZS5ib2R5LFxyXG4gICAgICAgICAgICByZXN1bHQ6ICc8ZWxpZGVkPicsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gJEZsb3dGaXhNZSBmbG93IGlzbid0IHJlY29nbml6aW5nIHRoYXQgLi4uZXZhbFJlc3BvbnNlIGlzIGZpbGxpbmcgaW4gbmVlZGVkIG1lbWJlcnNcclxuICAgICAgICByZXR1cm4gc2FuUmVzcG9uc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAvLyBEb24ndCBsZXQgYSBtYWxmb3JtZWQgcmVzcG9uc2UgcHJldmVudCB0aGUgcmVzcG9uc2UgZnJvbSBidWJibGluZyB1cFxyXG4gICAgICAvLyB0byB0aGUgZGVidWdnZXJcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0eXBlOiAncmVzcG9uc2UnLFxyXG4gICAgICAgIHNlcTogcmVzcG9uc2Uuc2VxLFxyXG4gICAgICAgIHJlcXVlc3Rfc2VxOiByZXNwb25zZS5yZXF1ZXN0X3NlcSxcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBjb21tYW5kOiByZXNwb25zZS5jb21tYW5kLFxyXG4gICAgICAgIGVycm9yOiAnRXJyb3Igc2FuaXRpemluZyByZXNwb25zZS4nLFxyXG4gICAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRXZlbnQoZXZlbnQ6IERlYnVnUHJvdG9jb2wuRXZlbnQgfCBBZGFwdGVyRXhpdGVkRXZlbnQpOiB2b2lkIHtcclxuICAgIGlmIChldmVudC5ib2R5ICE9IG51bGwpIHtcclxuICAgICAgLy8gJEZsb3dGaXhNZSBgc2Vzc2lvbklkYCBpc24ndCBpbiB0aGUgdHlwZSBkZWYuXHJcbiAgICAgIGV2ZW50LmJvZHkuc2Vzc2lvbklkID0gdGhpcy5nZXRJZCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gJEZsb3dGaXhNZSBgZXZlbnQuYm9keWAgdHlwZSBkZWYuXHJcbiAgICAgIGV2ZW50LmJvZHkgPSB7c2Vzc2lvbklkOiB0aGlzLmdldElkKCl9O1xyXG4gICAgfVxyXG5cclxuICAgIHRyYWNrKCd2cy1kZWJ1Zy1zZXNzaW9uOnRyYW5zYWN0aW9uJywge1xyXG4gICAgICAuLi50aGlzLl9hZGFwdGVyQW5hbHl0aWNzRXh0cmFzLFxyXG4gICAgICBldmVudCxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX29uRGlkRXZlbnQubmV4dChldmVudCk7XHJcblxyXG4gICAgc3dpdGNoIChldmVudC5ldmVudCkge1xyXG4gICAgICBjYXNlICdpbml0aWFsaXplZCc6XHJcbiAgICAgICAgdGhpcy5fcmVhZHlGb3JCcmVha3BvaW50cyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fb25EaWRJbml0aWFsaXplLm5leHQoZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdzdG9wcGVkJzpcclxuICAgICAgICB0aGlzLl9vbkRpZFN0b3AubmV4dChldmVudCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2NvbnRpbnVlZCc6XHJcbiAgICAgICAgdGhpcy5fb25EaWRDb250aW51ZWQubmV4dChldmVudCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3RocmVhZCc6XHJcbiAgICAgICAgdGhpcy5fb25EaWRUaHJlYWQubmV4dChldmVudCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ291dHB1dCc6XHJcbiAgICAgICAgdGhpcy5fb25EaWRPdXRwdXQubmV4dChldmVudCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2JyZWFrcG9pbnQnOlxyXG4gICAgICAgIHRoaXMuX29uRGlkQnJlYWtwb2ludC5uZXh0KGV2ZW50KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAndGVybWluYXRlZCc6XHJcbiAgICAgICAgdGhpcy5fb25EaWRUZXJtaW5hdGVEZWJ1Z2VlLm5leHQoZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdleGl0ZWQnOlxyXG4gICAgICAgIHRoaXMuX29uRGlkRXhpdERlYnVnZWUubmV4dChldmVudCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2FkYXB0ZXItZXhpdGVkJzpcclxuICAgICAgICB0aGlzLl9vbkRpZEV4aXRBZGFwdGVyLm5leHQoZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdtb2R1bGUnOlxyXG4gICAgICAgIHRoaXMuX29uRGlkTW9kdWxlLm5leHQoZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdsb2FkZWRTb3VyY2UnOlxyXG4gICAgICAgIHRoaXMuX29uRGlkTG9hZFNvdXJjZS5uZXh0KGV2ZW50KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0aGlzLl9vbkRpZEN1c3RvbS5uZXh0KGV2ZW50KTtcclxuICAgICAgICB0aGlzLl9sb2dnZXIuaW5mbygnQ3VzdG9tIGV2ZW50IHR5cGU6JywgZXZlbnQpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2FwYWJpbGl0aWVzKCk6IERlYnVnUHJvdG9jb2wuQ2FwYWJpbGl0aWVzIHtcclxuICAgIHJldHVybiB0aGlzLmNhcGFiaWxpdGllcztcclxuICB9XHJcblxyXG4gIGFzeW5jIGluaXRpYWxpemUoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLkluaXRpYWxpemVSZXF1ZXN0QXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5Jbml0aWFsaXplUmVzcG9uc2U+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kKCdpbml0aWFsaXplJywgYXJncyk7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVhZENhcGFiaWxpdGllcyhyZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBfcmVhZENhcGFiaWxpdGllcyhyZXNwb25zZTogYW55KTogYW55IHtcclxuICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICB0aGlzLmNhcGFiaWxpdGllcyA9IHtcclxuICAgICAgICAuLi50aGlzLmNhcGFiaWxpdGllcyxcclxuICAgICAgICAuLi5yZXNwb25zZS5ib2R5LFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbGF1bmNoKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5MYXVuY2hSZXF1ZXN0QXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5MYXVuY2hSZXNwb25zZT4ge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmQoJ2xhdW5jaCcsIGFyZ3MpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlYWRDYXBhYmlsaXRpZXMocmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgYXR0YWNoKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5BdHRhY2hSZXF1ZXN0QXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5BdHRhY2hSZXNwb25zZT4ge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmQoJ2F0dGFjaCcsIGFyZ3MpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlYWRDYXBhYmlsaXRpZXMocmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgbmV4dChhcmdzOiBEZWJ1Z1Byb3RvY29sLk5leHRBcmd1bWVudHMpOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuTmV4dFJlc3BvbnNlPiB7XHJcbiAgICBpZiAodGhpcy5faXNSZWFkT25seSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWQgb25seSB0YXJnZXQgY2Fubm90IHN0ZXAuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZmlyZUZha2VDb250aW51ZWQoYXJncy50aHJlYWRJZCk7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCduZXh0JywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBzdGVwSW4oXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlN0ZXBJbkFyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuU3RlcEluUmVzcG9uc2U+IHtcclxuICAgIGlmICh0aGlzLl9pc1JlYWRPbmx5KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVhZCBvbmx5IHRhcmdldCBjYW5ub3Qgc3RlcC4nKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9maXJlRmFrZUNvbnRpbnVlZChhcmdzLnRocmVhZElkKTtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3N0ZXBJbicsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgc3RlcE91dChcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuU3RlcE91dEFyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuU3RlcE91dFJlc3BvbnNlPiB7XHJcbiAgICBpZiAodGhpcy5faXNSZWFkT25seSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWQgb25seSB0YXJnZXQgY2Fubm90IHN0ZXAuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZmlyZUZha2VDb250aW51ZWQoYXJncy50aHJlYWRJZCk7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdzdGVwT3V0JywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBjb250aW51ZShcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuQ29udGludWVBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLkNvbnRpbnVlUmVzcG9uc2U+IHtcclxuICAgIGlmICh0aGlzLl9pc1JlYWRPbmx5KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVhZCBvbmx5IHRhcmdldCBjYW5ub3QgY29udGludWUuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fZmlyZUZha2VDb250aW51ZWQoYXJncy50aHJlYWRJZCk7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdjb250aW51ZScsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgcGF1c2UoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlBhdXNlQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5QYXVzZVJlc3BvbnNlPiB7XHJcbiAgICBpZiAodGhpcy5faXNSZWFkT25seSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWQgb25seSB0YXJnZXQgY2Fubm90IHBhdXNlLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3BhdXNlJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBzZXRWYXJpYWJsZShcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuU2V0VmFyaWFibGVBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlNldFZhcmlhYmxlUmVzcG9uc2U+IHtcclxuICAgIGlmICh0aGlzLl9pc1JlYWRPbmx5KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVhZCBvbmx5IHRhcmdldCBjYW5ub3Qgc2V0IHZhcmlhYmxlLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3NldFZhcmlhYmxlJywgYXJncykudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIHRoaXMuX29uRGlkRXZhbHVhdGUubmV4dCgpO1xyXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc3RhcnRGcmFtZShcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuUmVzdGFydEZyYW1lQXJndW1lbnRzLFxyXG4gICAgdGhyZWFkSWQ6IG51bWJlcixcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuUmVzdGFydEZyYW1lUmVzcG9uc2U+IHtcclxuICAgIGlmICh0aGlzLl9pc1JlYWRPbmx5KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVhZCBvbmx5IHRhcmdldCBjYW5ub3QgcmVzdGFydCBmcmFtZS4nKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9maXJlRmFrZUNvbnRpbnVlZCh0aHJlYWRJZCk7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdyZXN0YXJ0RnJhbWUnLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIGNvbXBsZXRpb25zKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5Db21wbGV0aW9uc0FyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuQ29tcGxldGlvbnNSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnY29tcGxldGlvbnMnLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRpc2Nvbm5lY3QoXHJcbiAgICByZXN0YXJ0PzogYm9vbGVhbiA9IGZhbHNlLFxyXG4gICAgZm9yY2U/OiBib29sZWFuID0gZmFsc2UsXHJcbiAgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBpZiAodGhpcy5fZGlzY29ubmVjdGVkICYmIGZvcmNlKSB7XHJcbiAgICAgIHRoaXMuX3N0b3BTZXJ2ZXIoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLl9hZGFwdGVyUHJvY2Vzc1N1YnNjcmlwdGlvbiAhPSBudWxsICYmICF0aGlzLl9kaXNjb25uZWN0ZWQpIHtcclxuICAgICAgLy8gcG9pbnQgb2Ygbm8gcmV0dXJuOiBmcm9tIG5vdyBvbiBkb24ndCByZXBvcnQgYW55IGVycm9yc1xyXG4gICAgICB0aGlzLl9kaXNjb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICBhd2FpdCBPYnNlcnZhYmxlLmZyb21Qcm9taXNlKHRoaXMuc2VuZCgnZGlzY29ubmVjdCcsIHtyZXN0YXJ0fSkpXHJcbiAgICAgICAgLnRpbWVvdXQoNTAwMClcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIFRpbWVvdXRFcnJvcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIE9ic2VydmFibGUuZW1wdHkoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50b1Byb21pc2UoKTtcclxuICAgICAgdGhpcy5fc3RvcFNlcnZlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0QnJlYWtwb2ludHMoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlNldEJyZWFrcG9pbnRzQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5TZXRCcmVha3BvaW50c1Jlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdzZXRCcmVha3BvaW50cycsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgc2V0RnVuY3Rpb25CcmVha3BvaW50cyhcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuU2V0RnVuY3Rpb25CcmVha3BvaW50c0FyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuU2V0RnVuY3Rpb25CcmVha3BvaW50c1Jlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdzZXRGdW5jdGlvbkJyZWFrcG9pbnRzJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBzZXRFeGNlcHRpb25CcmVha3BvaW50cyhcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuU2V0RXhjZXB0aW9uQnJlYWtwb2ludHNBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlNldEV4Y2VwdGlvbkJyZWFrcG9pbnRzUmVzcG9uc2U+IHtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3NldEV4Y2VwdGlvbkJyZWFrcG9pbnRzJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBjb25maWd1cmF0aW9uRG9uZSgpOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuQ29uZmlndXJhdGlvbkRvbmVSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnY29uZmlndXJhdGlvbkRvbmUnLCBudWxsKTtcclxuICB9XHJcblxyXG4gIHN0YWNrVHJhY2UoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlN0YWNrVHJhY2VBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlN0YWNrVHJhY2VSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnc3RhY2tUcmFjZScsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgZXhjZXB0aW9uSW5mbyhcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuRXhjZXB0aW9uSW5mb0FyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuRXhjZXB0aW9uSW5mb1Jlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdleGNlcHRpb25JbmZvJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBpbmZvKGFyZ3M6IERlYnVnUHJvdG9jb2wuSW5mb0FyZ3VtZW50cyk6IFByb21pc2U8RGVidWdQcm90b2NvbC5JbmZvUmVzcG9uc2U+IHtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ2luZm8nLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIHNjb3BlcyhcclxuICAgIGFyZ3M6IERlYnVnUHJvdG9jb2wuU2NvcGVzQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5TY29wZXNSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgnc2NvcGVzJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICB2YXJpYWJsZXMoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlZhcmlhYmxlc0FyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuVmFyaWFibGVzUmVzcG9uc2U+IHtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3ZhcmlhYmxlcycsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgc291cmNlKFxyXG4gICAgYXJnczogRGVidWdQcm90b2NvbC5Tb3VyY2VBcmd1bWVudHMsXHJcbiAgKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlNvdXJjZVJlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdzb3VyY2UnLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIHRocmVhZHMoKTogUHJvbWlzZTxEZWJ1Z1Byb3RvY29sLlRocmVhZHNSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VuZCgndGhyZWFkcycsIG51bGwpO1xyXG4gIH1cclxuXHJcbiAgZXZhbHVhdGUoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLkV2YWx1YXRlQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5FdmFsdWF0ZVJlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZW5kKCdldmFsdWF0ZScsIGFyZ3MpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgaWYgKGFyZ3MuY29udGV4dCA9PT0gJ3JlcGwnKSB7XHJcbiAgICAgICAgdGhpcy5fb25EaWRFdmFsdWF0ZS5uZXh0KCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RlcEJhY2soXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlN0ZXBCYWNrQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5TdGVwQmFja1Jlc3BvbnNlPiB7XHJcbiAgICB0aGlzLl9maXJlRmFrZUNvbnRpbnVlZChhcmdzLnRocmVhZElkKTtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3N0ZXBCYWNrJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICByZXZlcnNlQ29udGludWUoXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLlJldmVyc2VDb250aW51ZUFyZ3VtZW50cyxcclxuICApOiBQcm9taXNlPERlYnVnUHJvdG9jb2wuUmV2ZXJzZUNvbnRpbnVlUmVzcG9uc2U+IHtcclxuICAgIGlmICh0aGlzLl9pc1JlYWRPbmx5KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVhZCBvbmx5IHRhcmdldCBjYW5ub3QgcmV2ZXJzZSBjb250aW51ZS4nKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9maXJlRmFrZUNvbnRpbnVlZChhcmdzLnRocmVhZElkKTtcclxuICAgIHJldHVybiB0aGlzLnNlbmQoJ3JldmVyc2VDb250aW51ZScsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgbnVjbGlkZV9jb250aW51ZVRvTG9jYXRpb24oXHJcbiAgICBhcmdzOiBEZWJ1Z1Byb3RvY29sLm51Y2xpZGVfQ29udGludWVUb0xvY2F0aW9uQXJndW1lbnRzLFxyXG4gICk6IFByb21pc2U8RGVidWdQcm90b2NvbC5udWNsaWRlX0NvbnRpbnVlVG9Mb2NhdGlvblJlc3BvbnNlPiB7XHJcbiAgICBpZiAodGhpcy5faXNSZWFkT25seSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWQgb25seSB0YXJnZXQgY2Fubm90IHJ1biB0byBsb2NhdGlvbi4nKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5jdXN0b20oJ251Y2xpZGVfY29udGludWVUb0xvY2F0aW9uJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBnZXRMZW5ndGhJblNlY29uZHMoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLl9zdGFydFRpbWUpIC8gMTAwMDtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRpc3BhdGNoUmVxdWVzdChcclxuICAgIHJlcXVlc3Q6IERlYnVnUHJvdG9jb2wuUmVxdWVzdCxcclxuICAgIHJlc3BvbnNlOiBEZWJ1Z1Byb3RvY29sLlJlc3BvbnNlLFxyXG4gICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgaWYgKHJlcXVlc3QuY29tbWFuZCA9PT0gJ3J1bkluVGVybWluYWwnKSB7XHJcbiAgICAgIGNvbnN0IHJ1bkluVGVybWluYWxIYW5kbGVyID0gdGhpcy5fcnVuSW5UZXJtaW5hbEhhbmRsZXI7XHJcbiAgICAgIGlmIChydW5JblRlcm1pbmFsSGFuZGxlciA9PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nZ2VyLmVycm9yKFxyXG4gICAgICAgICAgXCIncnVuSW5UZXJtaW5hbCcgaXNuJ3Qgc3VwcG9ydGVkIGZvciB0aGlzIGRlYnVnIHNlc3Npb25cIixcclxuICAgICAgICAgIHJlcXVlc3QsXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBydW5JblRlcm1pbmFsSGFuZGxlcigocmVxdWVzdC5hcmd1bWVudHM6IGFueSkpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlc3BvbnNlLnN1Y2Nlc3MgPSBmYWxzZTtcclxuICAgICAgICByZXNwb25zZS5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcXVlc3QuY29tbWFuZCA9PT0gJ2hhbmRzaGFrZScpIHtcclxuICAgICAgdGhpcy5fbG9nZ2VyLmVycm9yKCdUT0RPOiBoYW5kc2hha2UnLCByZXF1ZXN0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc3BvbnNlLnN1Y2Nlc3MgPSBmYWxzZTtcclxuICAgICAgcmVzcG9uc2UubWVzc2FnZSA9IGB1bmtub3duIHJlcXVlc3QgJyR7cmVxdWVzdC5jb21tYW5kfSdgO1xyXG4gICAgICB0aGlzLnNlbmRSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZmlyZUZha2VDb250aW51ZWQoXHJcbiAgICB0aHJlYWRJZDogbnVtYmVyLFxyXG4gICAgYWxsVGhyZWFkc0NvbnRpbnVlZD86IGJvb2xlYW4gPSBmYWxzZSxcclxuICApOiB2b2lkIHtcclxuICAgIGNvbnN0IGV2ZW50OiBEZWJ1Z1Byb3RvY29sLkNvbnRpbnVlZEV2ZW50ID0ge1xyXG4gICAgICB0eXBlOiAnZXZlbnQnLFxyXG4gICAgICBldmVudDogJ2NvbnRpbnVlZCcsXHJcbiAgICAgIGJvZHk6IHtcclxuICAgICAgICB0aHJlYWRJZCxcclxuICAgICAgICAvLyAkRmxvd0ZpeE1lXHJcbiAgICAgICAgYWxsVGhyZWFkc0NvbnRpbnVlZCxcclxuICAgICAgfSxcclxuICAgICAgc2VxOiAwLFxyXG4gICAgfTtcclxuICAgIHRoaXMuX29uRGlkQ29udGludWVkLm5leHQoZXZlbnQpO1xyXG4gICAgdGhpcy5fb25EaWRFdmVudC5uZXh0KGV2ZW50KTtcclxuICB9XHJcblxyXG4gIF9zdGFydFNlcnZlcigpOiB2b2lkIHtcclxuICAgIHRoaXMuX2FkYXB0ZXJQcm9jZXNzU3Vic2NyaXB0aW9uID0gdGhpcy5fc3Bhd25lclxyXG4gICAgICAuc3Bhd25BZGFwdGVyKHRoaXMuX2FkYXB0ZXJFeGVjdXRhYmxlKVxyXG4gICAgICAucmVmQ291bnQoKVxyXG4gICAgICAuc3Vic2NyaWJlKChtZXNzYWdlOiBQcm9jZXNzTWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGlmIChtZXNzYWdlLmtpbmQgPT09ICdzdGRvdXQnKSB7XHJcbiAgICAgICAgICB0aGlzLmhhbmRsZURhdGEobmV3IEJ1ZmZlcihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2Uua2luZCA9PT0gJ3N0ZGVycicpIHtcclxuICAgICAgICAgIGNvbnN0IGV2ZW50OiBEZWJ1Z1Byb3RvY29sLk91dHB1dEV2ZW50ID0gKHtcclxuICAgICAgICAgICAgdHlwZTogJ2V2ZW50JyxcclxuICAgICAgICAgICAgZXZlbnQ6ICdvdXRwdXQnLFxyXG4gICAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdzdGRlcnInLFxyXG4gICAgICAgICAgICAgIG91dHB1dDogbWVzc2FnZS5kYXRhLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXE6IDAsXHJcbiAgICAgICAgICB9OiBhbnkpO1xyXG4gICAgICAgICAgdGhpcy5fb25EaWRPdXRwdXQubmV4dChldmVudCk7XHJcbiAgICAgICAgICB0aGlzLl9vbkRpZEV2ZW50Lm5leHQoZXZlbnQpO1xyXG4gICAgICAgICAgdGhpcy5fbG9nZ2VyLmVycm9yKGBhZGFwdGVyIHN0ZGVycjogJHttZXNzYWdlLmRhdGF9YCk7XHJcbiAgICAgICAgICB0aGlzLl9hZGFwdGVyRXJyb3JPdXRwdXQgPSB0aGlzLl9hZGFwdGVyRXJyb3JPdXRwdXQgKyBtZXNzYWdlLmRhdGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGludmFyaWFudChtZXNzYWdlLmtpbmQgPT09ICdleGl0Jyk7XHJcbiAgICAgICAgICBjb25zdCBleGl0Q29kZSA9IG1lc3NhZ2UuZXhpdENvZGUgfHwgMDtcclxuICAgICAgICAgIGlmIChleGl0Q29kZSA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uU2VydmVyRXhpdChtZXNzYWdlLmV4aXRDb2RlIHx8IDApO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vblNlcnZlckVycm9yKFxyXG4gICAgICAgICAgICAgIG5ldyBFcnJvcihgRGVidWcgYWRhcHRlciBleGl0ZWQgd2l0aCBjb2RlOiAke2V4aXRDb2RlfWApLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5zZXRPdXRwdXQodGhpcy5fc3Bhd25lci53cml0ZS5iaW5kKHRoaXMuX3NwYXduZXIpKTtcclxuICB9XHJcblxyXG4gIF9zdG9wU2VydmVyKCk6IHZvaWQge1xyXG4gICAgdGhpcy5vbkV2ZW50KHJhaXNlQWRhcHRlckV4aXRlZEV2ZW50KDApKTtcclxuICAgIGlmICh0aGlzLl9hZGFwdGVyUHJvY2Vzc1N1YnNjcmlwdGlvbiA9PSBudWxsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9kaXNjb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5fYWRhcHRlclByb2Nlc3NTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIHRoaXMuX2VuZEhhbmRsZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfZW5kSGFuZGxlcnMoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9vbkRpZEluaXRpYWxpemUuY29tcGxldGUoKTtcclxuICAgIHRoaXMuX29uRGlkU3RvcC5jb21wbGV0ZSgpO1xyXG4gICAgdGhpcy5fb25EaWRDb250aW51ZWQuY29tcGxldGUoKTtcclxuICAgIHRoaXMuX29uRGlkVGVybWluYXRlRGVidWdlZS5jb21wbGV0ZSgpO1xyXG4gICAgdGhpcy5fb25EaWRFeGl0RGVidWdlZS5jb21wbGV0ZSgpO1xyXG4gICAgdGhpcy5fb25EaWRFeGl0QWRhcHRlci5jb21wbGV0ZSgpO1xyXG4gICAgdGhpcy5fb25EaWRUaHJlYWQuY29tcGxldGUoKTtcclxuICAgIHRoaXMuX29uRGlkT3V0cHV0LmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLl9vbkRpZEJyZWFrcG9pbnQuY29tcGxldGUoKTtcclxuICAgIHRoaXMuX29uRGlkTW9kdWxlLmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLl9vbkRpZExvYWRTb3VyY2UuY29tcGxldGUoKTtcclxuICAgIHRoaXMuX29uRGlkQ3VzdG9tLmNvbXBsZXRlKCk7XHJcbiAgICB0aGlzLl9vbkRpZEV2ZW50LmNvbXBsZXRlKCk7XHJcbiAgfVxyXG5cclxuICBvblNlcnZlckVycm9yKGVycm9yOiBFcnJvcik6IHZvaWQge1xyXG4gICAgdGhpcy5fbG9nZ2VyLmVycm9yKCdBZGFwdGVyIGVycm9yOicsIGVycm9yKTtcclxuICAgIHRoaXMuX3N0b3BTZXJ2ZXIoKTtcclxuICB9XHJcblxyXG4gIG9uU2VydmVyRXhpdChjb2RlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLl9hZGFwdGVyUHJvY2Vzc1N1YnNjcmlwdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgIHRoaXMuX2FkYXB0ZXJQcm9jZXNzU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIHRoaXMuX2FkYXB0ZXJQcm9jZXNzU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5fZGlzY29ubmVjdGVkKSB7XHJcbiAgICAgIHRoaXMuX2xvZ2dlci5lcnJvcihcclxuICAgICAgICBgRGVidWcgYWRhcHRlciBwcm9jZXNzIGhhcyB0ZXJtaW5hdGVkIHVuZXhwZWN0ZWRseSAke2NvZGV9YCxcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHRoaXMub25FdmVudChyYWlzZUFkYXB0ZXJFeGl0ZWRFdmVudChjb2RlKSk7XHJcbiAgfVxyXG5cclxuICBpc1JlYWR5Rm9yQnJlYWtwb2ludHMoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVhZHlGb3JCcmVha3BvaW50cztcclxuICB9XHJcblxyXG4gIGlzRGlzY29ubmVjdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Rpc2Nvbm5lY3RlZDtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5fYWRhcHRlckVycm9yT3V0cHV0KSB7XHJcbiAgICAgIHRyYWNrKCd2cy1kZWJ1Zy1zZXNzaW9uOnRyYW5zYWN0aW9uJywge1xyXG4gICAgICAgIC4uLnRoaXMuX2FkYXB0ZXJBbmFseXRpY3NFeHRyYXMsXHJcbiAgICAgICAgcmVzcG9uc2U6IHRoaXMuX2FkYXB0ZXJFcnJvck91dHB1dCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICB9XHJcbn1cclxuIl19