"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getAdapterExecutable = getAdapterExecutable;
exports.getAdapterPackageRoot = getAdapterPackageRoot;

var _nuclideUri = _interopRequireDefault(require("@atom-ide-community/nuclide-commons/nuclideUri"));

var _fs = _interopRequireDefault(require("fs"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */
const modulesPath = _nuclideUri.default.dirname(__dirname);

function resolvePackagePath(packageName) {
  const bundledPath = _nuclideUri.default.join(modulesPath, packageName);

  if (_fs.default.existsSync(bundledPath)) {
    return bundledPath;
  } else if (typeof atom !== 'undefined') {
    const pkg = atom.packages.getActivePackage(packageName);

    if (pkg != null) {
      return _nuclideUri.default.join(pkg.path, 'node_modules', packageName);
    }
  }

  return 'DEBUGGER_RUNTIME_NOT_FOUND';
}

const _adapters = new Map([['node', {
  executable: {
    command: 'node',
    args: [_nuclideUri.default.join(resolvePackagePath('atom-ide-debugger-node'), 'VendorLib/vscode-node-debug2/out/src/nodeDebug.js')]
  },
  root: _nuclideUri.default.join(resolvePackagePath('atom-ide-debugger-node'), 'VendorLib/vscode-node-debug2')
}], ['python', {
  executable: {
    command: 'node',
    args: [_nuclideUri.default.join(resolvePackagePath('atom-ide-debugger-python'), 'VendorLib/vs-py-debugger/out/client/debugger/debugAdapter/main.js')]
  },
  root: _nuclideUri.default.join(resolvePackagePath('atom-ide-debugger-python'), 'VendorLib/vs-py-debugger')
}], ['react-native', {
  executable: {
    command: 'node',
    args: [_nuclideUri.default.join(resolvePackagePath('atom-ide-debugger-react-native'), 'VendorLib/vscode-react-native/out/debugger/reactNativeDebugEntryPoint.js')]
  },
  root: _nuclideUri.default.join(resolvePackagePath('atom-ide-debugger-react-native'), 'VendorLib/vscode-react-native')
}], ['prepack', {
  executable: {
    command: 'node',
    args: [_nuclideUri.default.join(__dirname, '../../pkg/nuclide-debugger-prepack/VendorLib/vscode-prepack/adapter/DebugAdapter.js')]
  },
  root: _nuclideUri.default.join(__dirname, '../../pkg/nuclide-debugger-prepack/VendorLib/vscode-prepack')
}], ['ocaml', {
  executable: {
    command: 'node',
    args: [_nuclideUri.default.join(resolvePackagePath('atom-ide-debugger-ocaml'), 'lib/vscode-debugger-entry.js')]
  },
  root: resolvePackagePath('atom-ide-debugger-ocaml')
}], ['native_gdb', {
  executable: {
    command: 'node',
    args: [_nuclideUri.default.join(resolvePackagePath('atom-ide-debugger-native-gdb'), 'lib/RunTranspiledServer.js')]
  },
  root: resolvePackagePath('atom-ide-debugger-native-gdb')
}], ['native_lldb', {
  executable: {
    command: 'lldb-vscode',
    args: []
  },
  root: _nuclideUri.default.join(__dirname, 'fb-native-debugger-lldb-vsp')
}], ['java', {
  executable: {
    command: 'java',
    args: []
  },
  root: resolvePackagePath('atom-ide-debugger-java')
}], ['java_android', {
  executable: {
    command: 'java',
    args: []
  },
  root: resolvePackagePath('atom-ide-debugger-java-android')
}], ['hhvm', {
  executable: {
    command: 'node',
    args: [_nuclideUri.default.join(__dirname, '../../pkg/nuclide-debugger-hhvm-rpc/lib/hhvmWrapper.js')]
  },
  root: _nuclideUri.default.join(__dirname, '../../pkg/nuclide-debugger-hhvm-rpc')
}], ['mobilejs', {
  executable: {
    command: 'node',
    args: [_nuclideUri.default.join(__dirname, '../../pkg/fb-debugger-mobilejs-rpc/lib/vscode/vscode-debugger-entry.js')]
  },
  root: _nuclideUri.default.join(__dirname, '../../pkg/fb-debugger-mobilejs-rpc')
}]]);

function getAdapterExecutable(adapter) {
  const adapterInfo = _adapters.get(adapter);

  if (adapterInfo == null) {
    throw new Error(`Cannot find VSP for given adapter type ${adapter}`);
  }

  return adapterInfo.executable;
}

function getAdapterPackageRoot(adapter) {
  const adapterInfo = _adapters.get(adapter);

  if (adapterInfo == null) {
    throw new Error(`Cannot find VSP for given adapter type ${adapter}`);
  }

  return adapterInfo.root;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL251Y2xpZGUvbnVjbGlkZS1kZWJ1Z2dlci1jb21tb24vZGVidWdnZXItcmVnaXN0cnkuanMiXSwibmFtZXMiOlsibW9kdWxlc1BhdGgiLCJudWNsaWRlVXJpIiwiZGlybmFtZSIsIl9fZGlybmFtZSIsInJlc29sdmVQYWNrYWdlUGF0aCIsInBhY2thZ2VOYW1lIiwiYnVuZGxlZFBhdGgiLCJqb2luIiwiZnMiLCJleGlzdHNTeW5jIiwiYXRvbSIsInBrZyIsInBhY2thZ2VzIiwiZ2V0QWN0aXZlUGFja2FnZSIsInBhdGgiLCJfYWRhcHRlcnMiLCJNYXAiLCJleGVjdXRhYmxlIiwiY29tbWFuZCIsImFyZ3MiLCJyb290IiwiZ2V0QWRhcHRlckV4ZWN1dGFibGUiLCJhZGFwdGVyIiwiYWRhcHRlckluZm8iLCJnZXQiLCJFcnJvciIsImdldEFkYXB0ZXJQYWNrYWdlUm9vdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFZQTs7QUFDQTs7OztBQWJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFZQSxNQUFNQSxXQUFXLEdBQUdDLG9CQUFXQyxPQUFYLENBQW1CQyxTQUFuQixDQUFwQjs7QUFFQSxTQUFTQyxrQkFBVCxDQUE0QkMsV0FBNUIsRUFBeUQ7QUFDdkQsUUFBTUMsV0FBVyxHQUFHTCxvQkFBV00sSUFBWCxDQUFnQlAsV0FBaEIsRUFBNkJLLFdBQTdCLENBQXBCOztBQUNBLE1BQUlHLFlBQUdDLFVBQUgsQ0FBY0gsV0FBZCxDQUFKLEVBQWdDO0FBQzlCLFdBQU9BLFdBQVA7QUFDRCxHQUZELE1BRU8sSUFBSSxPQUFPSSxJQUFQLEtBQWdCLFdBQXBCLEVBQWlDO0FBQ3RDLFVBQU1DLEdBQUcsR0FBR0QsSUFBSSxDQUFDRSxRQUFMLENBQWNDLGdCQUFkLENBQStCUixXQUEvQixDQUFaOztBQUNBLFFBQUlNLEdBQUcsSUFBSSxJQUFYLEVBQWlCO0FBQ2YsYUFBT1Ysb0JBQVdNLElBQVgsQ0FBZ0JJLEdB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QUlFLEtBQUosQ0FBVywwQ0FBeUNILE9BQVEsRUFBNUQsQ0FBTjtBQUNEOztBQUNELFNBQU9DLFdBQVcsQ0FBQ04sVUFBbkI7QUFDRDs7QUFFTSxTQUFTUyxxQkFBVCxDQUErQkosT0FBL0IsRUFBK0Q7QUFDcEUsUUFBTUMsV0FBVyxHQUFHUixTQUFTLENBQUNTLEdBQVYsQ0FBY0YsT0FBZCxDQUFwQjs7QUFDQSxNQUFJQyxXQUFXLElBQUksSUFBbkIsRUFBeUI7QUFDdkIsVUFBTSxJQUFJRSxLQUFKLENBQVcsMENBQXlDSCxPQUFRLEVBQTVELENBQU47QUFDRDs7QUFDRCxTQUFPQyxXQUFXLENBQUNILElBQW5CO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXHJcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxyXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcclxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXHJcbiAqXHJcbiAqIEBmbG93IHN0cmljdC1sb2NhbFxyXG4gKiBAZm9ybWF0XHJcbiAqL1xyXG5cclxuaW1wb3J0IG51Y2xpZGVVcmkgZnJvbSAnQGF0b20taWRlLWNvbW11bml0eS9udWNsaWRlLWNvbW1vbnMvbnVjbGlkZVVyaSc7XHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcblxyXG5pbXBvcnQgdHlwZSB7VlNBZGFwdGVyRXhlY3V0YWJsZUluZm8sIFZzQWRhcHRlclR5cGV9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxudHlwZSBBZGFwdGVySW5mbyA9IHt8XHJcbiAgZXhlY3V0YWJsZTogVlNBZGFwdGVyRXhlY3V0YWJsZUluZm8sXHJcbiAgcm9vdDogc3RyaW5nLFxyXG58fTtcclxuXHJcbmNvbnN0IG1vZHVsZXNQYXRoID0gbnVjbGlkZVVyaS5kaXJuYW1lKF9fZGlybmFtZSk7XHJcblxyXG5mdW5jdGlvbiByZXNvbHZlUGFja2FnZVBhdGgocGFja2FnZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgYnVuZGxlZFBhdGggPSBudWNsaWRlVXJpLmpvaW4obW9kdWxlc1BhdGgsIHBhY2thZ2VOYW1lKTtcclxuICBpZiAoZnMuZXhpc3RzU3luYyhidW5kbGVkUGF0aCkpIHtcclxuICAgIHJldHVybiBidW5kbGVkUGF0aDtcclxuICB9IGVsc2UgaWYgKHR5cGVvZiBhdG9tICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgY29uc3QgcGtnID0gYXRvbS5wYWNrYWdlcy5nZXRBY3RpdmVQYWNrYWdlKHBhY2thZ2VOYW1lKTtcclxuICAgIGlmIChwa2cgIT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gbnVjbGlkZVVyaS5qb2luKHBrZy5wYXRoLCAnbm9kZV9tb2R1bGVzJywgcGFja2FnZU5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gJ0RFQlVHR0VSX1JVTlRJTUVfTk9UX0ZPVU5EJztcclxufVxyXG5cclxuY29uc3QgX2FkYXB0ZXJzOiBNYXA8VnNBZGFwdGVyVHlwZSwgQWRhcHRlckluZm8+ID0gbmV3IE1hcChbXHJcbiAgW1xyXG4gICAgJ25vZGUnLFxyXG4gICAge1xyXG4gICAgICBleGVjdXRhYmxlOiB7XHJcbiAgICAgICAgY29tbWFuZDogJ25vZGUnLFxyXG4gICAgICAgIGFyZ3M6IFtcclxuICAgICAgICAgIG51Y2xpZGVVcmkuam9pbihcclxuICAgICAgICAgICAgcmVzb2x2ZVBhY2thZ2VQYXRoKCdhdG9tLWlkZS1kZWJ1Z2dlci1ub2RlJyksXHJcbiAgICAgICAgICAgICdWZW5kb3JMaWIvdnNjb2RlLW5vZGUtZGVidWcyL291dC9zcmMvbm9kZURlYnVnLmpzJyxcclxuICAgICAgICAgICksXHJcbiAgICAgICAgXSxcclxuICAgICAgfSxcclxuICAgICAgcm9vdDogbnVjbGlkZVVyaS5qb2luKFxyXG4gICAgICAgIHJlc29sdmVQYWNrYWdlUGF0aCgnYXRvbS1pZGUtZGVidWdnZXItbm9kZScpLFxyXG4gICAgICAgICdWZW5kb3JMaWIvdnNjb2RlLW5vZGUtZGVidWcyJyxcclxuICAgICAgKSxcclxuICAgIH0sXHJcbiAgXSxcclxuICBbXHJcbiAgICAncHl0aG9uJyxcclxuICAgIHtcclxuICAgICAgZXhlY3V0YWJsZToge1xyXG4gICAgICAgIGNvbW1hbmQ6ICdub2RlJyxcclxuICAgICAgICBhcmdzOiBbXHJcbiAgICAgICAgICBudWNsaWRlVXJpLmpvaW4oXHJcbiAgICAgICAgICAgIHJlc29sdmVQYWNrYWdlUGF0aCgnYXRvbS1pZGUtZGVidWdnZXItcHl0aG9uJyksXHJcbiAgICAgICAgICAgICdWZW5kb3JMaWIvdnMtcHktZGVidWdnZXIvb3V0L2NsaWVudC9kZWJ1Z2dlci9kZWJ1Z0FkYXB0ZXIvbWFpbi5qcycsXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHJvb3Q6IG51Y2xpZGVVcmkuam9pbihcclxuICAgICAgICByZXNvbHZlUGFja2FnZVBhdGgoJ2F0b20taWRlLWRlYnVnZ2VyLXB5dGhvbicpLFxyXG4gICAgICAgICdWZW5kb3JMaWIvdnMtcHktZGVidWdnZXInLFxyXG4gICAgICApLFxyXG4gICAgfSxcclxuICBdLFxyXG4gIFtcclxuICAgICdyZWFjdC1uYXRpdmUnLFxyXG4gICAge1xyXG4gICAgICBleGVjdXRhYmxlOiB7XHJcbiAgICAgICAgY29tbWFuZDogJ25vZGUnLFxyXG4gICAgICAgIGFyZ3M6IFtcclxuICAgICAgICAgIG51Y2xpZGVVcmkuam9pbihcclxuICAgICAgICAgICAgcmVzb2x2ZVBhY2thZ2VQYXRoKCdhdG9tLWlkZS1kZWJ1Z2dlci1yZWFjdC1uYXRpdmUnKSxcclxuICAgICAgICAgICAgJ1ZlbmRvckxpYi92c2NvZGUtcmVhY3QtbmF0aXZlL291dC9kZWJ1Z2dlci9yZWFjdE5hdGl2ZURlYnVnRW50cnlQb2ludC5qcycsXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHJvb3Q6IG51Y2xpZGVVcmkuam9pbihcclxuICAgICAgICByZXNvbHZlUGFja2FnZVBhdGgoJ2F0b20taWRlLWRlYnVnZ2VyLXJlYWN0LW5hdGl2ZScpLFxyXG4gICAgICAgICdWZW5kb3JMaWIvdnNjb2RlLXJlYWN0LW5hdGl2ZScsXHJcbiAgICAgICksXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgW1xyXG4gICAgJ3ByZXBhY2snLFxyXG4gICAge1xyXG4gICAgICBleGVjdXRhYmxlOiB7XHJcbiAgICAgICAgY29tbWFuZDogJ25vZGUnLFxyXG4gICAgICAgIGFyZ3M6IFtcclxuICAgICAgICAgIG51Y2xpZGVVcmkuam9pbihcclxuICAgICAgICAgICAgX19kaXJuYW1lLFxyXG4gICAgICAgICAgICAnLi4vLi4vcGtnL251Y2xpZGUtZGVidWdnZXItcHJlcGFjay9WZW5kb3JMaWIvdnNjb2RlLXByZXBhY2svYWRhcHRlci9EZWJ1Z0FkYXB0ZXIuanMnLFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICBdLFxyXG4gICAgICB9LFxyXG4gICAgICByb290OiBudWNsaWRlVXJpLmpvaW4oXHJcbiAgICAgICAgX19kaXJuYW1lLFxyXG4gICAgICAgICcuLi8uLi9wa2cvbnVjbGlkZS1kZWJ1Z2dlci1wcmVwYWNrL1ZlbmRvckxpYi92c2NvZGUtcHJlcGFjaycsXHJcbiAgICAgICksXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgW1xyXG4gICAgJ29jYW1sJyxcclxuICAgIHtcclxuICAgICAgZXhlY3V0YWJsZToge1xyXG4gICAgICAgIGNvbW1hbmQ6ICdub2RlJyxcclxuICAgICAgICBhcmdzOiBbXHJcbiAgICAgICAgICBudWNsaWRlVXJpLmpvaW4oXHJcbiAgICAgICAgICAgIHJlc29sdmVQYWNrYWdlUGF0aCgnYXRvbS1pZGUtZGVidWdnZXItb2NhbWwnKSxcclxuICAgICAgICAgICAgJ2xpYi92c2NvZGUtZGVidWdnZXItZW50cnkuanMnLFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICBdLFxyXG4gICAgICB9LFxyXG4gICAgICByb290OiByZXNvbHZlUGFja2FnZVBhdGgoJ2F0b20taWRlLWRlYnVnZ2VyLW9jYW1sJyksXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgW1xyXG4gICAgJ25hdGl2ZV9nZGInLFxyXG4gICAge1xyXG4gICAgICBleGVjdXRhYmxlOiB7XHJcbiAgICAgICAgY29tbWFuZDogJ25vZGUnLFxyXG4gICAgICAgIGFyZ3M6IFtcclxuICAgICAgICAgIG51Y2xpZGVVcmkuam9pbihcclxuICAgICAgICAgICAgcmVzb2x2ZVBhY2thZ2VQYXRoKCdhdG9tLWlkZS1kZWJ1Z2dlci1uYXRpdmUtZ2RiJyksXHJcbiAgICAgICAgICAgICdsaWIvUnVuVHJhbnNwaWxlZFNlcnZlci5qcycsXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHJvb3Q6IHJlc29sdmVQYWNrYWdlUGF0aCgnYXRvbS1pZGUtZGVidWdnZXItbmF0aXZlLWdkYicpLFxyXG4gICAgfSxcclxuICBdLFxyXG4gIFtcclxuICAgICduYXRpdmVfbGxkYicsXHJcbiAgICB7XHJcbiAgICAgIGV4ZWN1dGFibGU6IHtcclxuICAgICAgICBjb21tYW5kOiAnbGxkYi12c2NvZGUnLFxyXG4gICAgICAgIGFyZ3M6IFtdLFxyXG4gICAgICB9LFxyXG4gICAgICByb290OiBudWNsaWRlVXJpLmpvaW4oX19kaXJuYW1lLCAnZmItbmF0aXZlLWRlYnVnZ2VyLWxsZGItdnNwJyksXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgW1xyXG4gICAgJ2phdmEnLFxyXG4gICAge1xyXG4gICAgICBleGVjdXRhYmxlOiB7XHJcbiAgICAgICAgY29tbWFuZDogJ2phdmEnLFxyXG4gICAgICAgIGFyZ3M6IFtdLFxyXG4gICAgICB9LFxyXG4gICAgICByb290OiByZXNvbHZlUGFja2FnZVBhdGgoJ2F0b20taWRlLWRlYnVnZ2VyLWphdmEnKSxcclxuICAgIH0sXHJcbiAgXSxcclxuICBbXHJcbiAgICAnamF2YV9hbmRyb2lkJyxcclxuICAgIHtcclxuICAgICAgZXhlY3V0YWJsZToge1xyXG4gICAgICAgIGNvbW1hbmQ6ICdqYXZhJyxcclxuICAgICAgICBhcmdzOiBbXSxcclxuICAgICAgfSxcclxuICAgICAgcm9vdDogcmVzb2x2ZVBhY2thZ2VQYXRoKCdhdG9tLWlkZS1kZWJ1Z2dlci1qYXZhLWFuZHJvaWQnKSxcclxuICAgIH0sXHJcbiAgXSxcclxuICBbXHJcbiAgICAnaGh2bScsXHJcbiAgICB7XHJcbiAgICAgIGV4ZWN1dGFibGU6IHtcclxuICAgICAgICBjb21tYW5kOiAnbm9kZScsXHJcbiAgICAgICAgYXJnczogW1xyXG4gICAgICAgICAgbnVjbGlkZVVyaS5qb2luKFxyXG4gICAgICAgICAgICBfX2Rpcm5hbWUsXHJcbiAgICAgICAgICAgICcuLi8uLi9wa2cvbnVjbGlkZS1kZWJ1Z2dlci1oaHZtLXJwYy9saWIvaGh2bVdyYXBwZXIuanMnLFxyXG4gICAgICAgICAgKSxcclxuICAgICAgICBdLFxyXG4gICAgICB9LFxyXG4gICAgICByb290OiBudWNsaWRlVXJpLmpvaW4oX19kaXJuYW1lLCAnLi4vLi4vcGtnL251Y2xpZGUtZGVidWdnZXItaGh2bS1ycGMnKSxcclxuICAgIH0sXHJcbiAgXSxcclxuICBbXHJcbiAgICAnbW9iaWxlanMnLFxyXG4gICAge1xyXG4gICAgICBleGVjdXRhYmxlOiB7XHJcbiAgICAgICAgY29tbWFuZDogJ25vZGUnLFxyXG4gICAgICAgIGFyZ3M6IFtcclxuICAgICAgICAgIG51Y2xpZGVVcmkuam9pbihcclxuICAgICAgICAgICAgX19kaXJuYW1lLFxyXG4gICAgICAgICAgICAnLi4vLi4vcGtnL2ZiLWRlYnVnZ2VyLW1vYmlsZWpzLXJwYy9saWIvdnNjb2RlL3ZzY29kZS1kZWJ1Z2dlci1lbnRyeS5qcycsXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHJvb3Q6IG51Y2xpZGVVcmkuam9pbihfX2Rpcm5hbWUsICcuLi8uLi9wa2cvZmItZGVidWdnZXItbW9iaWxlanMtcnBjJyksXHJcbiAgICB9LFxyXG4gIF0sXHJcbl0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFkYXB0ZXJFeGVjdXRhYmxlKFxyXG4gIGFkYXB0ZXI6IFZzQWRhcHRlclR5cGUsXHJcbik6IFZTQWRhcHRlckV4ZWN1dGFibGVJbmZvIHtcclxuICBjb25zdCBhZGFwdGVySW5mbyA9IF9hZGFwdGVycy5nZXQoYWRhcHRlcik7XHJcbiAgaWYgKGFkYXB0ZXJJbmZvID09IG51bGwpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgVlNQIGZvciBnaXZlbiBhZGFwdGVyIHR5cGUgJHthZGFwdGVyfWApO1xyXG4gIH1cclxuICByZXR1cm4gYWRhcHRlckluZm8uZXhlY3V0YWJsZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFkYXB0ZXJQYWNrYWdlUm9vdChhZGFwdGVyOiBWc0FkYXB0ZXJUeXBlKTogc3RyaW5nIHtcclxuICBjb25zdCBhZGFwdGVySW5mbyA9IF9hZGFwdGVycy5nZXQoYWRhcHRlcik7XHJcbiAgaWYgKGFkYXB0ZXJJbmZvID09IG51bGwpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgVlNQIGZvciBnaXZlbiBhZGFwdGVyIHR5cGUgJHthZGFwdGVyfWApO1xyXG4gIH1cclxuICByZXR1cm4gYWRhcHRlckluZm8ucm9vdDtcclxufVxyXG4iXX0=