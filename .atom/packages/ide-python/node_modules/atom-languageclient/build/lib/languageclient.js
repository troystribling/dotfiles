"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.LanguageClientConnection = void 0;
const lsp = require("vscode-languageserver-protocol");
const events_1 = require("events");
const logger_1 = require("./logger");
__exportStar(require("vscode-languageserver-protocol"), exports);
/**
 * TypeScript wrapper around JSONRPC to implement Microsoft Language Server Protocol v3
 * https://github.com/Microsoft/language-server-protocol/blob/master/protocol.md
 */
class LanguageClientConnection extends events_1.EventEmitter {
    constructor(rpc, logger) {
        super();
        this._rpc = rpc;
        this._log = logger || new logger_1.NullLogger();
        this.setupLogging();
        rpc.listen();
        this.isConnected = true;
        this._rpc.onClose(() => {
            this.isConnected = false;
            this._log.warn("rpc.onClose", "The RPC connection closed unexpectedly");
            this.emit("close");
        });
    }
    setupLogging() {
        this._rpc.onError((error) => this._log.error(["rpc.onError", error]));
        this._rpc.onUnhandledNotification((notification) => {
            if (notification.method != null && notification.params != null) {
                this._log.warn(`rpc.onUnhandledNotification ${notification.method}`, notification.params);
            }
            else {
                this._log.warn("rpc.onUnhandledNotification", notification);
            }
        });
        this._rpc.onNotification((...args) => this._log.debug("rpc.onNotification", args));
    }
    dispose() {
        this._rpc.dispose();
    }
    /**
     * Public: Initialize the language server with necessary {InitializeParams}.
     *
     * @param params The {InitializeParams} containing processId, rootPath, options and server capabilities.
     * @returns A {Promise} containing the {InitializeResult} with details of the server's capabilities.
     */
    initialize(params) {
        return this._sendRequest(lsp.InitializeRequest.type, params);
    }
    /** Public: Send an `initialized` notification to the language server. */
    initialized() {
        this._sendNotification(lsp.InitializedNotification.type, {});
    }
    /** Public: Send a `shutdown` request to the language server. */
    shutdown() {
        return this._sendRequest(lsp.ShutdownRequest.type);
    }
    /** Public: Send an `exit` notification to the language server. */
    exit() {
        this._sendNotification(lsp.ExitNotification.type);
    }
    /**
     * Public: Register a callback for a custom notification
     *
     * @param method A string containing the name of the message to listen for.
     * @param callback The function to be called when the message is received. The payload from the message is passed to
     *   the function.
     */
    onCustomNotification(method, callback) {
        this._onNotification({ method }, callback);
    }
    /** @deprecated Use `onCustomNotification` method instead */
    onCustom(method, callback) {
        this.onCustomNotification(method, callback);
    }
    /**
     * Public: Register a callback for a custom request
     *
     * @param method A string containing the name of the message to listen for.
     * @param callback The function to be called when the message is received. The payload from the message is passed to
     *   the function.
     */
    onCustomRequest(method, callback) {
        this._onRequest({ method }, callback);
    }
    /**
     * Public: Send a custom request
     *
     * @param method A string containing the name of the request message.
     * @param params The method's parameters
     */
    sendCustomRequest(method, params) {
        return this._sendRequest(new lsp.ProtocolRequestType(method), params);
    }
    /**
     * Public: Send a custom notification
     *
     * @param method A string containing the name of the notification message.
     * @param params The method's parameters
     */
    sendCustomNotification(method, params) {
        this._sendNotification(new lsp.ProtocolNotificationType(method), params);
    }
    /**
     * Public: Register a callback for the `window/showMessage` message.
     *
     * @param callback The function to be called when the `window/showMessage` message is received with
     *   {ShowMessageParams} being passed.
     */
    onShowMessage(callback) {
        this._onNotification({ method: "window/showMessage" }, callback);
    }
    /**
     * Public: Register a callback for the `window/showMessageRequest` message.
     *
     * @param callback The function to be called when the `window/showMessageRequest` message is received with
     *   {ShowMessageRequestParam}' being passed.
     * @returns A {Promise} containing the {MessageActionItem}.
     */
    onShowMessageRequest(callback) {
        this._onRequest({ method: "window/showMessageRequest" }, callback);
    }
    /**
     * Public: Register a callback for the `window/showDocument` message.
     *
     * @param callback The function to be called when the `window/showDocument` message is received with
     *   {ShowDocumentParams} being passed.
     */
    onShowDocument(callback) {
        this._onRequest({ method: "window/showDocument" }, callback);
    }
    /**
     * Public: Register a callback for the `window/logMessage` message.
     *
     * @param callback The function to be called when the `window/logMessage` message is received with {LogMessageParams}
     *   being passed.
     */
    onLogMessage(callback) {
        this._onNotification({ method: "window/logMessage" }, callback);
    }
    /**
     * Public: Register a callback for the `telemetry/event` message.
     *
     * @param callback The function to be called when the `telemetry/event` message is received with any parameters
     *   received being passed on.
     */
    onTelemetryEvent(callback) {
        this._onNotification({ method: "telemetry/event" }, callback);
    }
    /**
     * Public: Register a callback for the `workspace/applyEdit` message.
     *
     * @param callback The function to be called when the `workspace/applyEdit` message is received with
     *   {ApplyWorkspaceEditParams} being passed.
     * @returns A {Promise} containing the {ApplyWorkspaceEditResponse}.
     */
    onApplyEdit(callback) {
        this._onRequest({ method: "workspace/applyEdit" }, callback);
    }
    /**
     * Public: Send a `workspace/didChangeConfiguration` notification.
     *
     * @param params The {DidChangeConfigurationParams} containing the new configuration.
     */
    didChangeConfiguration(params) {
        this._sendNotification(lsp.DidChangeConfigurationNotification.type, params);
    }
    /**
     * Public: Send a `textDocument/didOpen` notification.
     *
     * @param params The {DidOpenTextDocumentParams} containing the opened text document details.
     */
    didOpenTextDocument(params) {
        this._sendNotification(lsp.DidOpenTextDocumentNotification.type, params);
    }
    /**
     * Public: Send a `textDocument/didChange` notification.
     *
     * @param params The {DidChangeTextDocumentParams} containing the changed text document details including the version
     *   number and actual text changes.
     */
    didChangeTextDocument(params) {
        this._sendNotification(lsp.DidChangeTextDocumentNotification.type, params);
    }
    /**
     * Public: Send a `textDocument/didClose` notification.
     *
     * @param params The {DidCloseTextDocumentParams} containing the opened text document details.
     */
    didCloseTextDocument(params) {
        this._sendNotification(lsp.DidCloseTextDocumentNotification.type, params);
    }
    /**
     * Public: Send a `textDocument/willSave` notification.
     *
     * @param params The {WillSaveTextDocumentParams} containing the to-be-saved text document details and the reason for the save.
     */
    willSaveTextDocument(params) {
        this._sendNotification(lsp.WillSaveTextDocumentNotification.type, params);
    }
    /**
     * Public: Send a `textDocument/willSaveWaitUntil` notification.
     *
     * @param params The {WillSaveTextDocumentParams} containing the to-be-saved text document details and the reason for the save.
     * @returns A {Promise} containing an {Array} of {TextEdit}s to be applied to the text document before it is saved.
     */
    willSaveWaitUntilTextDocument(params) {
        return this._sendRequest(lsp.WillSaveTextDocumentWaitUntilRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/didSave` notification.
     *
     * @param params The {DidSaveTextDocumentParams} containing the saved text document details.
     */
    didSaveTextDocument(params) {
        this._sendNotification(lsp.DidSaveTextDocumentNotification.type, params);
    }
    /**
     * Public: Send a `workspace/didChangeWatchedFiles` notification.
     *
     * @param params The {DidChangeWatchedFilesParams} containing the array of {FileEvent}s that have been observed upon
     *   the watched files.
     */
    didChangeWatchedFiles(params) {
        this._sendNotification(lsp.DidChangeWatchedFilesNotification.type, params);
    }
    /**
     * Public: Register a callback for the `workspace.workspaceFolders` request. This request is sent from the server to
     * Atom to fetch the current open list of workspace folders
     *
     * @param A Callback which returns a {Promise} containing an {Array} of {lsp.WorkspaceFolder[]} or {null} if only a
     *   single file is open in the tool.
     */
    onWorkspaceFolders(callback) {
        return this._onRequest(lsp.WorkspaceFoldersRequest.type, callback);
    }
    /**
     * Public: Send a `workspace/didChangeWorkspaceFolders` notification.
     *
     * @param {DidChangeWorkspaceFoldersParams} params An object that contains the actual workspace folder change event
     *   ({WorkspaceFoldersChangeEvent}) in its {event} property
     */
    didChangeWorkspaceFolders(params) {
        this._sendNotification(lsp.DidChangeWorkspaceFoldersNotification.type, params);
    }
    /**
     * Public: Register a callback for the `textDocument/publishDiagnostics` message.
     *
     * @param callback The function to be called when the `textDocument/publishDiagnostics` message is received a
     *   {PublishDiagnosticsParams} containing new {Diagnostic} messages for a given uri.
     */
    onPublishDiagnostics(callback) {
        this._onNotification({ method: "textDocument/publishDiagnostics" }, callback);
    }
    /**
     * Public: Send a `textDocument/completion` request.
     *
     * @param params The {TextDocumentPositionParams} or {CompletionParams} for which {CompletionItem}s are desired.
     * @param cancellationToken The {CancellationToken} that is used to cancel this request if necessary.
     * @returns A {Promise} containing either a {CompletionList} or an {Array} of {CompletionItem}s.
     */
    completion(params, cancellationToken) {
        // Cancel prior request if necessary
        return this._sendRequest(lsp.CompletionRequest.type, params, cancellationToken);
    }
    /**
     * Public: Send a `completionItem/resolve` request.
     *
     * @param params The {CompletionItem} for which a fully resolved {CompletionItem} is desired.
     * @returns A {Promise} containing a fully resolved {CompletionItem}.
     */
    completionItemResolve(params) {
        return this._sendRequest(lsp.CompletionResolveRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/hover` request.
     *
     * @param params The {TextDocumentPositionParams} for which a {Hover} is desired.
     * @returns A {Promise} containing a {Hover}.
     */
    hover(params) {
        return this._sendRequest(lsp.HoverRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/signatureHelp` request.
     *
     * @param params The {TextDocumentPositionParams} for which a {SignatureHelp} is desired.
     * @returns A {Promise} containing a {SignatureHelp}.
     */
    signatureHelp(params) {
        return this._sendRequest(lsp.SignatureHelpRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/definition` request.
     *
     * @param params The {TextDocumentPositionParams} of a symbol for which one or more {Location}s that define that
     *   symbol are required.
     * @returns A {Promise} containing either a single {Location} or an {Array} of many {Location}s.
     */
    gotoDefinition(params) {
        return this._sendRequest(lsp.DefinitionRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/references` request.
     *
     * @param params The {TextDocumentPositionParams} of a symbol for which all referring {Location}s are desired.
     * @returns A {Promise} containing an {Array} of {Location}s that reference this symbol.
     */
    findReferences(params) {
        return this._sendRequest(lsp.ReferencesRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/documentHighlight` request.
     *
     * @param params The {TextDocumentPositionParams} of a symbol for which all highlights are desired.
     * @returns A {Promise} containing an {Array} of {DocumentHighlight}s that can be used to highlight this symbol.
     */
    documentHighlight(params) {
        return this._sendRequest(lsp.DocumentHighlightRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/documentSymbol` request.
     *
     * @param params The {DocumentSymbolParams} that identifies the document for which symbols are desired.
     * @param cancellationToken The {CancellationToken} that is used to cancel this request if necessary.
     * @returns A {Promise} containing an {Array} of {SymbolInformation}s that can be used to navigate this document.
     */
    documentSymbol(params, _cancellationToken) {
        return this._sendRequest(lsp.DocumentSymbolRequest.type, params);
    }
    /**
     * Public: Send a `workspace/symbol` request.
     *
     * @param params The {WorkspaceSymbolParams} containing the query string to search the workspace for.
     * @returns A {Promise} containing an {Array} of {SymbolInformation}s that identify where the query string occurs
     *   within the workspace.
     */
    workspaceSymbol(params) {
        return this._sendRequest(lsp.WorkspaceSymbolRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/codeAction` request.
     *
     * @param params The {CodeActionParams} identifying the document, range and context for the code action.
     * @returns A {Promise} containing an {Array} of {Command}s or {CodeAction}s that can be performed against the given
     *   documents range.
     */
    codeAction(params) {
        return this._sendRequest(lsp.CodeActionRequest.type, params);
    }
    /**
     * Public: Send a `codeAction/resolve` request.
     *
     * @param params The {CodeAction} whose properties (e.g. `edit`) are to be resolved.
     * @returns A resolved {CodeAction} that can be applied immediately.
     */
    codeActionResolve(params) {
        return this._sendRequest(lsp.CodeActionResolveRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/codeLens` request.
     *
     * @param params The {CodeLensParams} identifying the document for which code lens commands are desired.
     * @returns A {Promise} containing an {Array} of {CodeLens}s that associate commands and data with specified ranges
     *   within the document.
     */
    codeLens(params) {
        return this._sendRequest(lsp.CodeLensRequest.type, params);
    }
    /**
     * Public: Send a `codeLens/resolve` request.
     *
     * @param params The {CodeLens} identifying the code lens to be resolved with full detail.
     * @returns A {Promise} containing the {CodeLens} fully resolved.
     */
    codeLensResolve(params) {
        return this._sendRequest(lsp.CodeLensResolveRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/documentLink` request.
     *
     * @param params The {DocumentLinkParams} identifying the document for which links should be identified.
     * @returns A {Promise} containing an {Array} of {DocumentLink}s relating uri's to specific ranges within the document.
     */
    documentLink(params) {
        return this._sendRequest(lsp.DocumentLinkRequest.type, params);
    }
    /**
     * Public: Send a `documentLink/resolve` request.
     *
     * @param params The {DocumentLink} identifying the document link to be resolved with full detail.
     * @returns A {Promise} containing the {DocumentLink} fully resolved.
     */
    documentLinkResolve(params) {
        return this._sendRequest(lsp.DocumentLinkResolveRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/formatting` request.
     *
     * @param params The {DocumentFormattingParams} identifying the document to be formatted as well as additional
     *   formatting preferences.
     * @returns A {Promise} containing an {Array} of {TextEdit}s to be applied to the document to correctly reformat it.
     */
    documentFormatting(params) {
        return this._sendRequest(lsp.DocumentFormattingRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/rangeFormatting` request.
     *
     * @param params The {DocumentRangeFormattingParams} identifying the document and range to be formatted as well as
     *   additional formatting preferences.
     * @returns A {Promise} containing an {Array} of {TextEdit}s to be applied to the document to correctly reformat it.
     */
    documentRangeFormatting(params) {
        return this._sendRequest(lsp.DocumentRangeFormattingRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/onTypeFormatting` request.
     *
     * @param params The {DocumentOnTypeFormattingParams} identifying the document to be formatted, the character that was
     *   typed and at what position as well as additional formatting preferences.
     * @returns A {Promise} containing an {Array} of {TextEdit}s to be applied to the document to correctly reformat it.
     */
    documentOnTypeFormatting(params) {
        return this._sendRequest(lsp.DocumentOnTypeFormattingRequest.type, params);
    }
    /**
     * Public: Send a `textDocument/rename` request.
     *
     * @param params The {RenameParams} identifying the document containing the symbol to be renamed, as well as the
     *   position and new name.
     * @returns A {Promise} containing an {WorkspaceEdit} that contains a list of {TextEdit}s either on the changes
     *   property (keyed by uri) or the documentChanges property containing an {Array} of {TextDocumentEdit}s (preferred).
     */
    rename(params) {
        return this._sendRequest(lsp.RenameRequest.type, params);
    }
    /**
     * Public: Send a `workspace/executeCommand` request.
     *
     * @param params The {ExecuteCommandParams} specifying the command and arguments the language server should execute
     *   (these commands are usually from {CodeLens} or {CodeAction} responses).
     * @returns A {Promise} containing anything.
     */
    executeCommand(params) {
        return this._sendRequest(lsp.ExecuteCommandRequest.type, params);
    }
    _onRequest(type, callback) {
        this._rpc.onRequest(type.method, (value) => {
            this._log.debug(`rpc.onRequest ${type.method}`, value);
            return callback(value);
        });
    }
    _onNotification(type, callback) {
        this._rpc.onNotification(type.method, (value) => {
            this._log.debug(`rpc.onNotification ${type.method}`, value);
            callback(value);
        });
    }
    _sendNotification(protocol, args) {
        const { method } = protocol;
        this._log.debug(`rpc.sendNotification ${method}`, args);
        this._rpc.sendNotification(method, args);
    }
    _sendRequest(protocol, args, cancellationToken) {
        return __awaiter(this, void 0, void 0, function* () {
            const { method } = protocol;
            this._log.debug(`rpc.sendRequest ${method} sending`, args);
            try {
                const start = performance.now();
                let result;
                if (cancellationToken) {
                    result = yield this._rpc.sendRequest(method, args, cancellationToken);
                }
                else {
                    // If cancellationToken is null or undefined, don't add the third
                    // argument otherwise vscode-jsonrpc will send an additional, null
                    // message parameter to the request
                    result = yield this._rpc.sendRequest(method, args);
                }
                const took = performance.now() - start;
                this._log.debug(`rpc.sendRequest ${method} received (${Math.floor(took)}ms)`, result);
                return result;
            }
            catch (e) {
                const responseError = e;
                if (cancellationToken && responseError.code === lsp.LSPErrorCodes.RequestCancelled) {
                    this._log.debug(`rpc.sendRequest ${method} was cancelled`);
                }
                else {
                    this._log.error(`rpc.sendRequest ${method} threw`, e);
                }
                throw e;
            }
        });
    }
}
exports.LanguageClientConnection = LanguageClientConnection;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGFuZ3VhZ2VjbGllbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9saWIvbGFuZ3VhZ2VjbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLHNEQUFxRDtBQUNyRCxtQ0FBcUM7QUFDckMscUNBQTZDO0FBRTdDLGlFQUE4QztBQXNCOUM7OztHQUdHO0FBQ0gsTUFBYSx3QkFBeUIsU0FBUSxxQkFBWTtJQUt4RCxZQUFZLEdBQThCLEVBQUUsTUFBZTtRQUN6RCxLQUFLLEVBQUUsQ0FBQTtRQUNQLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFBO1FBQ2YsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLElBQUksSUFBSSxtQkFBVSxFQUFFLENBQUE7UUFDdEMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFBO1FBQ25CLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtRQUVaLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFBO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRTtZQUNyQixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQTtZQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsd0NBQXdDLENBQUMsQ0FBQTtZQUN2RSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ3BCLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVPLFlBQVk7UUFDbEIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNyRSxJQUFJLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUMsWUFBWSxFQUFFLEVBQUU7WUFDakQsSUFBSSxZ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TUFBTSxFQUFFLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxDQUFBO2lCQUN0RTtxQkFBTTtvQkFDTCxpRUFBaUU7b0JBQ2pFLGtFQUFrRTtvQkFDbEUsbUNBQW1DO29CQUNuQyxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUE7aUJBQ25EO2dCQUVELE1BQU0sSUFBSSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUE7Z0JBQ3RDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLG1CQUFtQixNQUFNLGNBQWMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFBO2dCQUNyRixPQUFPLE1BQU0sQ0FBQTthQUNkO1lBQUMsT0FBTyxDQUFDLEVBQUU7Z0JBQ1YsTUFBTSxhQUFhLEdBQUcsQ0FBK0IsQ0FBQTtnQkFDckQsSUFBSSxpQkFBaUIsSUFBSSxhQUFhLENBQUMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUU7b0JBQ2xGLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLG1CQUFtQixNQUFNLGdCQUFnQixDQUFDLENBQUE7aUJBQzNEO3FCQUFNO29CQUNMLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLG1CQUFtQixNQUFNLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQTtpQkFDdEQ7Z0JBRUQsTUFBTSxDQUFDLENBQUE7YUFDUjtRQUNILENBQUM7S0FBQTtDQUNGO0FBdGpCRCw0REFzakJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMganNvbnJwYyBmcm9tIFwidnNjb2RlLWpzb25ycGNcIlxuaW1wb3J0ICogYXMgbHNwIGZyb20gXCJ2c2NvZGUtbGFuZ3VhZ2VzZXJ2ZXItcHJvdG9jb2xcIlxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSBcImV2ZW50c1wiXG5pbXBvcnQgeyBOdWxsTG9nZ2VyLCBMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXJcIlxuXG5leHBvcnQgKiBmcm9tIFwidnNjb2RlLWxhbmd1YWdlc2VydmVyLXByb3RvY29sXCJcblxuZXhwb3J0IGludGVyZmFjZSBLbm93bk5vdGlmaWNhdGlvbnMge1xuICBcInRleHREb2N1bWVudC9wdWJsaXNoRGlhZ25vc3RpY3NcIjogbHNwLlB1Ymxpc2hEaWFnbm9zdGljc1BhcmFtc1xuICBcInRlbGVtZXRyeS9ldmVudFwiOiBhbnlcbiAgXCJ3aW5kb3cvbG9nTWVzc2FnZVwiOiBsc3AuTG9nTWVzc2FnZVBhcmFtc1xuICBcIndpbmRvdy9zaG93TWVzc2FnZVJlcXVlc3RcIjogbHNwLlNob3dNZXNzYWdlUmVxdWVzdFBhcmFtc1xuICBcIndpbmRvdy9zaG93TWVzc2FnZVwiOiBsc3AuU2hvd01lc3NhZ2VQYXJhbXNcbiAgW2N1c3RvbTogc3RyaW5nXTogb2JqZWN0XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgS25vd25SZXF1ZXN0cyB7XG4gIFwid2luZG93L3Nob3dEb2N1bWVudFwiOiBbbHNwLlNob3dEb2N1bWVudFBhcmFtcywgbHNwLlNob3dEb2N1bWVudFJlc3VsdF1cbiAgXCJ3aW5kb3cvc2hvd01lc3NhZ2VSZXF1ZXN0XCI6IFtsc3AuU2hvd01lc3NhZ2VSZXF1ZXN0UGFyYW1zLCBsc3AuTWVzc2FnZUFjdGlvbkl0ZW0gfCBudWxsXVxuICBcIndvcmtzcGFjZS9hcHBseUVkaXRcIjogW2xzcC5BcHBseVdvcmtzcGFjZUVkaXRQYXJhbXMsIGxzcC5BcHBseVdvcmtzcGFjZUVkaXRSZXNwb25zZV1cbiAgW2N1c3RvbTogc3RyaW5nXTogW1JlY29yZDxzdHJpbmcsIGFueT4sIFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsXVxufVxuXG5leHBvcnQgdHlwZSBSZXF1ZXN0Q2FsbGJhY2s8VCBleHRlbmRzIGtleW9mIEtub3duUmVxdWVzdHM+ID0gS25vd25SZXF1ZXN0c1tUXSBleHRlbmRzIFtpbmZlciBVLCBpbmZlciBWXVxuICA/IChwYXJhbTogVSkgPT4gUHJvbWlzZTxWPlxuICA6IG5ldmVyXG5cbi8qKlxuICogVHlwZVNjcmlwdCB3cmFwcGVyIGFyb3VuZCBKU09OUlBDIHRvIGltcGxlbWVudCBNaWNyb3NvZnQgTGFuZ3VhZ2UgU2VydmVyIFByb3RvY29sIHYzXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L2xhbmd1YWdlLXNlcnZlci1wcm90b2NvbC9ibG9iL21hc3Rlci9wcm90b2NvbC5tZFxuICovXG5leHBvcnQgY2xhc3MgTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgcHJpdmF0ZSBfcnBjOiBqc29ucnBjLk1lc3NhZ2VDb25uZWN0aW9uXG4gIHByaXZhdGUgX2xvZzogTG9nZ2VyXG4gIHB1YmxpYyBpc0Nvbm5lY3RlZDogYm9vbGVhblxuXG4gIGNvbnN0cnVjdG9yKHJwYzoganNvbnJwYy5NZXNzYWdlQ29ubmVjdGlvbiwgbG9nZ2VyPzogTG9nZ2VyKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMuX3JwYyA9IHJwY1xuICAgIHRoaXMuX2xvZyA9IGxvZ2dlciB8fCBuZXcgTnVsbExvZ2dlcigpXG4gICAgdGhpcy5zZXR1cExvZ2dpbmcoKVxuICAgIHJwYy5saXN0ZW4oKVxuXG4gICAgdGhpcy5pc0Nvbm5lY3RlZCA9IHRydWVcbiAgICB0aGlzLl9ycGMub25DbG9zZSgoKSA9PiB7XG4gICAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2VcbiAgICAgIHRoaXMuX2xvZy53YXJuKFwicnBjLm9uQ2xvc2VcIiwgXCJUaGUgUlBDIGNvbm5lY3Rpb24gY2xvc2VkIHVuZXhwZWN0ZWRseVwiKVxuICAgICAgdGhpcy5lbWl0KFwiY2xvc2VcIilcbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cExvZ2dpbmcoKTogdm9pZCB7XG4gICAgdGhpcy5fcnBjLm9uRXJyb3IoKGVycm9yKSA9PiB0aGlzLl9sb2cuZXJyb3IoW1wicnBjLm9uRXJyb3JcIiwgZXJyb3JdKSlcbiAgICB0aGlzLl9ycGMub25VbmhhbmRsZWROb3RpZmljYXRpb24oKG5vdGlmaWNhdGlvbikgPT4ge1xuICAgICAgaWYgKG5vdGlmaWNhdGlvbi5tZXRob2QgIT0gbnVsbCAmJiBub3RpZmljYXRpb24ucGFyYW1zICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5fbG9nLndhcm4oYHJwYy5vblVuaGFuZGxlZE5vdGlmaWNhdGlvbiAke25vdGlmaWNhdGlvbi5tZXRob2R9YCwgbm90aWZpY2F0aW9uLnBhcmFtcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xvZy53YXJuKFwicnBjLm9uVW5oYW5kbGVkTm90aWZpY2F0aW9uXCIsIG5vdGlmaWNhdGlvbilcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMuX3JwYy5vbk5vdGlmaWNhdGlvbigoLi4uYXJnczogYW55W10pID0+IHRoaXMuX2xvZy5kZWJ1ZyhcInJwYy5vbk5vdGlmaWNhdGlvblwiLCBhcmdzKSlcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JwYy5kaXNwb3NlKClcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IEluaXRpYWxpemUgdGhlIGxhbmd1YWdlIHNlcnZlciB3aXRoIG5lY2Vzc2FyeSB7SW5pdGlhbGl6ZVBhcmFtc30uXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgVGhlIHtJbml0aWFsaXplUGFyYW1zfSBjb250YWluaW5nIHByb2Nlc3NJZCwgcm9vdFBhdGgsIG9wdGlvbnMgYW5kIHNlcnZlciBjYXBhYmlsaXRpZXMuXG4gICAqIEByZXR1cm5zIEEge1Byb21pc2V9IGNvbnRhaW5pbmcgdGhlIHtJbml0aWFsaXplUmVzdWx0fSB3aXRoIGRldGFpbHMgb2YgdGhlIHNlcnZlcidzIGNhcGFiaWxpdGllcy5cbiAgICovXG4gIHB1YmxpYyBpbml0aWFsaXplKHBhcmFtczogbHNwLkluaXRpYWxpemVQYXJhbXMpOiBQcm9taXNlPGxzcC5Jbml0aWFsaXplUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGxzcC5Jbml0aWFsaXplUmVxdWVzdC50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKiogUHVibGljOiBTZW5kIGFuIGBpbml0aWFsaXplZGAgbm90aWZpY2F0aW9uIHRvIHRoZSBsYW5ndWFnZSBzZXJ2ZXIuICovXG4gIHB1YmxpYyBpbml0aWFsaXplZCgpOiB2b2lkIHtcbiAgICB0aGlzLl9zZW5kTm90aWZpY2F0aW9uKGxzcC5Jbml0aWFsaXplZE5vdGlmaWNhdGlvbi50eXBlLCB7fSlcbiAgfVxuXG4gIC8qKiBQdWJsaWM6IFNlbmQgYSBgc2h1dGRvd25gIHJlcXVlc3QgdG8gdGhlIGxhbmd1YWdlIHNlcnZlci4gKi9cbiAgcHVibGljIHNodXRkb3duKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuU2h1dGRvd25SZXF1ZXN0LnR5cGUpXG4gIH1cblxuICAvKiogUHVibGljOiBTZW5kIGFuIGBleGl0YCBub3RpZmljYXRpb24gdG8gdGhlIGxhbmd1YWdlIHNlcnZlci4gKi9cbiAgcHVibGljIGV4aXQoKTogdm9pZCB7XG4gICAgdGhpcy5fc2VuZE5vdGlmaWNhdGlvbihsc3AuRXhpdE5vdGlmaWNhdGlvbi50eXBlKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogUmVnaXN0ZXIgYSBjYWxsYmFjayBmb3IgYSBjdXN0b20gbm90aWZpY2F0aW9uXG4gICAqXG4gICAqIEBwYXJhbSBtZXRob2QgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgbWVzc2FnZSB0byBsaXN0ZW4gZm9yLlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBtZXNzYWdlIGlzIHJlY2VpdmVkLiBUaGUgcGF5bG9hZCBmcm9tIHRoZSBtZXNzYWdlIGlzIHBhc3NlZCB0b1xuICAgKiAgIHRoZSBmdW5jdGlvbi5cbiAgICovXG4gIHB1YmxpYyBvbkN1c3RvbU5vdGlmaWNhdGlvbihtZXRob2Q6IHN0cmluZywgY2FsbGJhY2s6IChvYmo6IG9iamVjdCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX29uTm90aWZpY2F0aW9uKHsgbWV0aG9kIH0sIGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqIEBkZXByZWNhdGVkIFVzZSBgb25DdXN0b21Ob3RpZmljYXRpb25gIG1ldGhvZCBpbnN0ZWFkICovXG4gIHB1YmxpYyBvbkN1c3RvbShtZXRob2Q6IHN0cmluZywgY2FsbGJhY2s6IChvYmo6IG9iamVjdCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMub25DdXN0b21Ob3RpZmljYXRpb24obWV0aG9kLCBjYWxsYmFjaylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFJlZ2lzdGVyIGEgY2FsbGJhY2sgZm9yIGEgY3VzdG9tIHJlcXVlc3RcbiAgICpcbiAgICogQHBhcmFtIG1ldGhvZCBBIHN0cmluZyBjb250YWluaW5nIHRoZSBuYW1lIG9mIHRoZSBtZXNzYWdlIHRvIGxpc3RlbiBmb3IuXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIG1lc3NhZ2UgaXMgcmVjZWl2ZWQuIFRoZSBwYXlsb2FkIGZyb20gdGhlIG1lc3NhZ2UgaXMgcGFzc2VkIHRvXG4gICAqICAgdGhlIGZ1bmN0aW9uLlxuICAgKi9cbiAgcHVibGljIG9uQ3VzdG9tUmVxdWVzdChcbiAgICBtZXRob2Q6IHN0cmluZyxcbiAgICBjYWxsYmFjazogKG9iajogUmVjb3JkPHN0cmluZywgYW55PikgPT4gUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbD5cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fb25SZXF1ZXN0KHsgbWV0aG9kIH0sIGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGN1c3RvbSByZXF1ZXN0XG4gICAqXG4gICAqIEBwYXJhbSBtZXRob2QgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgcmVxdWVzdCBtZXNzYWdlLlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSBtZXRob2QncyBwYXJhbWV0ZXJzXG4gICAqL1xuICBwdWJsaWMgc2VuZEN1c3RvbVJlcXVlc3QobWV0aG9kOiBzdHJpbmcsIHBhcmFtcz86IGFueVtdIHwgb2JqZWN0KTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QobmV3IGxzcC5Qcm90b2NvbFJlcXVlc3RUeXBlPHR5cGVvZiBwYXJhbXMsIGFueSwgYW55LCB2b2lkLCBhbnk+KG1ldGhvZCksIHBhcmFtcylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFNlbmQgYSBjdXN0b20gbm90aWZpY2F0aW9uXG4gICAqXG4gICAqIEBwYXJhbSBtZXRob2QgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgbm90aWZpY2F0aW9uIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSBwYXJhbXMgVGhlIG1ldGhvZCdzIHBhcmFtZXRlcnNcbiAgICovXG4gIHB1YmxpYyBzZW5kQ3VzdG9tTm90aWZpY2F0aW9uKG1ldGhvZDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSB8IG9iamVjdCk6IHZvaWQge1xuICAgIHRoaXMuX3NlbmROb3RpZmljYXRpb24obmV3IGxzcC5Qcm90b2NvbE5vdGlmaWNhdGlvblR5cGU8dHlwZW9mIHBhcmFtcywgYW55PihtZXRob2QpLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBSZWdpc3RlciBhIGNhbGxiYWNrIGZvciB0aGUgYHdpbmRvdy9zaG93TWVzc2FnZWAgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgYHdpbmRvdy9zaG93TWVzc2FnZWAgbWVzc2FnZSBpcyByZWNlaXZlZCB3aXRoXG4gICAqICAge1Nob3dNZXNzYWdlUGFyYW1zfSBiZWluZyBwYXNzZWQuXG4gICAqL1xuICBwdWJsaWMgb25TaG93TWVzc2FnZShjYWxsYmFjazogKHBhcmFtczogbHNwLlNob3dNZXNzYWdlUGFyYW1zKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fb25Ob3RpZmljYXRpb24oeyBtZXRob2Q6IFwid2luZG93L3Nob3dNZXNzYWdlXCIgfSwgY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBSZWdpc3RlciBhIGNhbGxiYWNrIGZvciB0aGUgYHdpbmRvdy9zaG93TWVzc2FnZVJlcXVlc3RgIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGB3aW5kb3cvc2hvd01lc3NhZ2VSZXF1ZXN0YCBtZXNzYWdlIGlzIHJlY2VpdmVkIHdpdGhcbiAgICogICB7U2hvd01lc3NhZ2VSZXF1ZXN0UGFyYW19JyBiZWluZyBwYXNzZWQuXG4gICAqIEByZXR1cm5zIEEge1Byb21pc2V9IGNvbnRhaW5pbmcgdGhlIHtNZXNzYWdlQWN0aW9uSXRlbX0uXG4gICAqL1xuICBwdWJsaWMgb25TaG93TWVzc2FnZVJlcXVlc3QoXG4gICAgY2FsbGJhY2s6IChwYXJhbXM6IGxzcC5TaG93TWVzc2FnZVJlcXVlc3RQYXJhbXMpID0+IFByb21pc2U8bHNwLk1lc3NhZ2VBY3Rpb25JdGVtIHwgbnVsbD5cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fb25SZXF1ZXN0KHsgbWV0aG9kOiBcIndpbmRvdy9zaG93TWVzc2FnZVJlcXVlc3RcIiB9LCBjYWxsYmFjaylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFJlZ2lzdGVyIGEgY2FsbGJhY2sgZm9yIHRoZSBgd2luZG93L3Nob3dEb2N1bWVudGAgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgYHdpbmRvdy9zaG93RG9jdW1lbnRgIG1lc3NhZ2UgaXMgcmVjZWl2ZWQgd2l0aFxuICAgKiAgIHtTaG93RG9jdW1lbnRQYXJhbXN9IGJlaW5nIHBhc3NlZC5cbiAgICovXG4gIHB1YmxpYyBvblNob3dEb2N1bWVudChjYWxsYmFjazogKHBhcmFtczogbHNwLlNob3dEb2N1bWVudFBhcmFtcykgPT4gUHJvbWlzZTxsc3AuU2hvd0RvY3VtZW50UmVzdWx0Pik6IHZvaWQge1xuICAgIHRoaXMuX29uUmVxdWVzdCh7IG1ldGhvZDogXCJ3aW5kb3cvc2hvd0RvY3VtZW50XCIgfSwgY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBSZWdpc3RlciBhIGNhbGxiYWNrIGZvciB0aGUgYHdpbmRvdy9sb2dNZXNzYWdlYCBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBgd2luZG93L2xvZ01lc3NhZ2VgIG1lc3NhZ2UgaXMgcmVjZWl2ZWQgd2l0aCB7TG9nTWVzc2FnZVBhcmFtc31cbiAgICogICBiZWluZyBwYXNzZWQuXG4gICAqL1xuICBwdWJsaWMgb25Mb2dNZXNzYWdlKGNhbGxiYWNrOiAocGFyYW1zOiBsc3AuTG9nTWVzc2FnZVBhcmFtcykgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX29uTm90aWZpY2F0aW9uKHsgbWV0aG9kOiBcIndpbmRvdy9sb2dNZXNzYWdlXCIgfSwgY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBSZWdpc3RlciBhIGNhbGxiYWNrIGZvciB0aGUgYHRlbGVtZXRyeS9ldmVudGAgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgYHRlbGVtZXRyeS9ldmVudGAgbWVzc2FnZSBpcyByZWNlaXZlZCB3aXRoIGFueSBwYXJhbWV0ZXJzXG4gICAqICAgcmVjZWl2ZWQgYmVpbmcgcGFzc2VkIG9uLlxuICAgKi9cbiAgcHVibGljIG9uVGVsZW1ldHJ5RXZlbnQoY2FsbGJhY2s6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX29uTm90aWZpY2F0aW9uKHsgbWV0aG9kOiBcInRlbGVtZXRyeS9ldmVudFwiIH0sIGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogUmVnaXN0ZXIgYSBjYWxsYmFjayBmb3IgdGhlIGB3b3Jrc3BhY2UvYXBwbHlFZGl0YCBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBgd29ya3NwYWNlL2FwcGx5RWRpdGAgbWVzc2FnZSBpcyByZWNlaXZlZCB3aXRoXG4gICAqICAge0FwcGx5V29ya3NwYWNlRWRpdFBhcmFtc30gYmVpbmcgcGFzc2VkLlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIHRoZSB7QXBwbHlXb3Jrc3BhY2VFZGl0UmVzcG9uc2V9LlxuICAgKi9cbiAgcHVibGljIG9uQXBwbHlFZGl0KFxuICAgIGNhbGxiYWNrOiAocGFyYW1zOiBsc3AuQXBwbHlXb3Jrc3BhY2VFZGl0UGFyYW1zKSA9PiBQcm9taXNlPGxzcC5BcHBseVdvcmtzcGFjZUVkaXRSZXNwb25zZT5cbiAgKTogdm9pZCB7XG4gICAgdGhpcy5fb25SZXF1ZXN0KHsgbWV0aG9kOiBcIndvcmtzcGFjZS9hcHBseUVkaXRcIiB9LCBjYWxsYmFjaylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFNlbmQgYSBgd29ya3NwYWNlL2RpZENoYW5nZUNvbmZpZ3VyYXRpb25gIG5vdGlmaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUge0RpZENoYW5nZUNvbmZpZ3VyYXRpb25QYXJhbXN9IGNvbnRhaW5pbmcgdGhlIG5ldyBjb25maWd1cmF0aW9uLlxuICAgKi9cbiAgcHVibGljIGRpZENoYW5nZUNvbmZpZ3VyYXRpb24ocGFyYW1zOiBsc3AuRGlkQ2hhbmdlQ29uZmlndXJhdGlvblBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3NlbmROb3RpZmljYXRpb24obHNwLkRpZENoYW5nZUNvbmZpZ3VyYXRpb25Ob3RpZmljYXRpb24udHlwZSwgcGFyYW1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGB0ZXh0RG9jdW1lbnQvZGlkT3BlbmAgbm90aWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7RGlkT3BlblRleHREb2N1bWVudFBhcmFtc30gY29udGFpbmluZyB0aGUgb3BlbmVkIHRleHQgZG9jdW1lbnQgZGV0YWlscy5cbiAgICovXG4gIHB1YmxpYyBkaWRPcGVuVGV4dERvY3VtZW50KHBhcmFtczogbHNwLkRpZE9wZW5UZXh0RG9jdW1lbnRQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9zZW5kTm90aWZpY2F0aW9uKGxzcC5EaWRPcGVuVGV4dERvY3VtZW50Tm90aWZpY2F0aW9uLnR5cGUsIHBhcmFtcylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFNlbmQgYSBgdGV4dERvY3VtZW50L2RpZENoYW5nZWAgbm90aWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7RGlkQ2hhbmdlVGV4dERvY3VtZW50UGFyYW1zfSBjb250YWluaW5nIHRoZSBjaGFuZ2VkIHRleHQgZG9jdW1lbnQgZGV0YWlscyBpbmNsdWRpbmcgdGhlIHZlcnNpb25cbiAgICogICBudW1iZXIgYW5kIGFjdHVhbCB0ZXh0IGNoYW5nZXMuXG4gICAqL1xuICBwdWJsaWMgZGlkQ2hhbmdlVGV4dERvY3VtZW50KHBhcmFtczogbHNwLkRpZENoYW5nZVRleHREb2N1bWVudFBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3NlbmROb3RpZmljYXRpb24obHNwLkRpZENoYW5nZVRleHREb2N1bWVudE5vdGlmaWNhdGlvbi50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHRleHREb2N1bWVudC9kaWRDbG9zZWAgbm90aWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7RGlkQ2xvc2VUZXh0RG9jdW1lbnRQYXJhbXN9IGNvbnRhaW5pbmcgdGhlIG9wZW5lZCB0ZXh0IGRvY3VtZW50IGRldGFpbHMuXG4gICAqL1xuICBwdWJsaWMgZGlkQ2xvc2VUZXh0RG9jdW1lbnQocGFyYW1zOiBsc3AuRGlkQ2xvc2VUZXh0RG9jdW1lbnRQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9zZW5kTm90aWZpY2F0aW9uKGxzcC5EaWRDbG9zZVRleHREb2N1bWVudE5vdGlmaWNhdGlvbi50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHRleHREb2N1bWVudC93aWxsU2F2ZWAgbm90aWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7V2lsbFNhdmVUZXh0RG9jdW1lbnRQYXJhbXN9IGNvbnRhaW5pbmcgdGhlIHRvLWJlLXNhdmVkIHRleHQgZG9jdW1lbnQgZGV0YWlscyBhbmQgdGhlIHJlYXNvbiBmb3IgdGhlIHNhdmUuXG4gICAqL1xuICBwdWJsaWMgd2lsbFNhdmVUZXh0RG9jdW1lbnQocGFyYW1zOiBsc3AuV2lsbFNhdmVUZXh0RG9jdW1lbnRQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9zZW5kTm90aWZpY2F0aW9uKGxzcC5XaWxsU2F2ZVRleHREb2N1bWVudE5vdGlmaWNhdGlvbi50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHRleHREb2N1bWVudC93aWxsU2F2ZVdhaXRVbnRpbGAgbm90aWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7V2lsbFNhdmVUZXh0RG9jdW1lbnRQYXJhbXN9IGNvbnRhaW5pbmcgdGhlIHRvLWJlLXNhdmVkIHRleHQgZG9jdW1lbnQgZGV0YWlscyBhbmQgdGhlIHJlYXNvbiBmb3IgdGhlIHNhdmUuXG4gICAqIEByZXR1cm5zIEEge1Byb21pc2V9IGNvbnRhaW5pbmcgYW4ge0FycmF5fSBvZiB7VGV4dEVkaXR9cyB0byBiZSBhcHBsaWVkIHRvIHRoZSB0ZXh0IGRvY3VtZW50IGJlZm9yZSBpdCBpcyBzYXZlZC5cbiAgICovXG4gIHB1YmxpYyB3aWxsU2F2ZVdhaXRVbnRpbFRleHREb2N1bWVudChwYXJhbXM6IGxzcC5XaWxsU2F2ZVRleHREb2N1bWVudFBhcmFtcyk6IFByb21pc2U8bHNwLlRleHRFZGl0W10gfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGxzcC5XaWxsU2F2ZVRleHREb2N1bWVudFdhaXRVbnRpbFJlcXVlc3QudHlwZSwgcGFyYW1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGB0ZXh0RG9jdW1lbnQvZGlkU2F2ZWAgbm90aWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7RGlkU2F2ZVRleHREb2N1bWVudFBhcmFtc30gY29udGFpbmluZyB0aGUgc2F2ZWQgdGV4dCBkb2N1bWVudCBkZXRhaWxzLlxuICAgKi9cbiAgcHVibGljIGRpZFNhdmVUZXh0RG9jdW1lbnQocGFyYW1zOiBsc3AuRGlkU2F2ZVRleHREb2N1bWVudFBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3NlbmROb3RpZmljYXRpb24obHNwLkRpZFNhdmVUZXh0RG9jdW1lbnROb3RpZmljYXRpb24udHlwZSwgcGFyYW1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGB3b3Jrc3BhY2UvZGlkQ2hhbmdlV2F0Y2hlZEZpbGVzYCBub3RpZmljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgVGhlIHtEaWRDaGFuZ2VXYXRjaGVkRmlsZXNQYXJhbXN9IGNvbnRhaW5pbmcgdGhlIGFycmF5IG9mIHtGaWxlRXZlbnR9cyB0aGF0IGhhdmUgYmVlbiBvYnNlcnZlZCB1cG9uXG4gICAqICAgdGhlIHdhdGNoZWQgZmlsZXMuXG4gICAqL1xuICBwdWJsaWMgZGlkQ2hhbmdlV2F0Y2hlZEZpbGVzKHBhcmFtczogbHNwLkRpZENoYW5nZVdhdGNoZWRGaWxlc1BhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3NlbmROb3RpZmljYXRpb24obHNwLkRpZENoYW5nZVdhdGNoZWRGaWxlc05vdGlmaWNhdGlvbi50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBSZWdpc3RlciBhIGNhbGxiYWNrIGZvciB0aGUgYHdvcmtzcGFjZS53b3Jrc3BhY2VGb2xkZXJzYCByZXF1ZXN0LiBUaGlzIHJlcXVlc3QgaXMgc2VudCBmcm9tIHRoZSBzZXJ2ZXIgdG9cbiAgICogQXRvbSB0byBmZXRjaCB0aGUgY3VycmVudCBvcGVuIGxpc3Qgb2Ygd29ya3NwYWNlIGZvbGRlcnNcbiAgICpcbiAgICogQHBhcmFtIEEgQ2FsbGJhY2sgd2hpY2ggcmV0dXJucyBhIHtQcm9taXNlfSBjb250YWluaW5nIGFuIHtBcnJheX0gb2Yge2xzcC5Xb3Jrc3BhY2VGb2xkZXJbXX0gb3Ige251bGx9IGlmIG9ubHkgYVxuICAgKiAgIHNpbmdsZSBmaWxlIGlzIG9wZW4gaW4gdGhlIHRvb2wuXG4gICAqL1xuICBwdWJsaWMgb25Xb3Jrc3BhY2VGb2xkZXJzKGNhbGxiYWNrOiAoKSA9PiBQcm9taXNlPGxzcC5Xb3Jrc3BhY2VGb2xkZXJbXSB8IG51bGw+KTogdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMuX29uUmVxdWVzdChsc3AuV29ya3NwYWNlRm9sZGVyc1JlcXVlc3QudHlwZSwgY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHdvcmtzcGFjZS9kaWRDaGFuZ2VXb3Jrc3BhY2VGb2xkZXJzYCBub3RpZmljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RGlkQ2hhbmdlV29ya3NwYWNlRm9sZGVyc1BhcmFtc30gcGFyYW1zIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBhY3R1YWwgd29ya3NwYWNlIGZvbGRlciBjaGFuZ2UgZXZlbnRcbiAgICogICAoe1dvcmtzcGFjZUZvbGRlcnNDaGFuZ2VFdmVudH0pIGluIGl0cyB7ZXZlbnR9IHByb3BlcnR5XG4gICAqL1xuICBwdWJsaWMgZGlkQ2hhbmdlV29ya3NwYWNlRm9sZGVycyhwYXJhbXM6IGxzcC5EaWRDaGFuZ2VXb3Jrc3BhY2VGb2xkZXJzUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fc2VuZE5vdGlmaWNhdGlvbihsc3AuRGlkQ2hhbmdlV29ya3NwYWNlRm9sZGVyc05vdGlmaWNhdGlvbi50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBSZWdpc3RlciBhIGNhbGxiYWNrIGZvciB0aGUgYHRleHREb2N1bWVudC9wdWJsaXNoRGlhZ25vc3RpY3NgIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGB0ZXh0RG9jdW1lbnQvcHVibGlzaERpYWdub3N0aWNzYCBtZXNzYWdlIGlzIHJlY2VpdmVkIGFcbiAgICogICB7UHVibGlzaERpYWdub3N0aWNzUGFyYW1zfSBjb250YWluaW5nIG5ldyB7RGlhZ25vc3RpY30gbWVzc2FnZXMgZm9yIGEgZ2l2ZW4gdXJpLlxuICAgKi9cbiAgcHVibGljIG9uUHVibGlzaERpYWdub3N0aWNzKGNhbGxiYWNrOiAocGFyYW1zOiBsc3AuUHVibGlzaERpYWdub3N0aWNzUGFyYW1zKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fb25Ob3RpZmljYXRpb24oeyBtZXRob2Q6IFwidGV4dERvY3VtZW50L3B1Ymxpc2hEaWFnbm9zdGljc1wiIH0sIGNhbGxiYWNrKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGB0ZXh0RG9jdW1lbnQvY29tcGxldGlvbmAgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUge1RleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zfSBvciB7Q29tcGxldGlvblBhcmFtc30gZm9yIHdoaWNoIHtDb21wbGV0aW9uSXRlbX1zIGFyZSBkZXNpcmVkLlxuICAgKiBAcGFyYW0gY2FuY2VsbGF0aW9uVG9rZW4gVGhlIHtDYW5jZWxsYXRpb25Ub2tlbn0gdGhhdCBpcyB1c2VkIHRvIGNhbmNlbCB0aGlzIHJlcXVlc3QgaWYgbmVjZXNzYXJ5LlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIGVpdGhlciBhIHtDb21wbGV0aW9uTGlzdH0gb3IgYW4ge0FycmF5fSBvZiB7Q29tcGxldGlvbkl0ZW19cy5cbiAgICovXG4gIHB1YmxpYyBjb21wbGV0aW9uKFxuICAgIHBhcmFtczogbHNwLlRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zIHwgQ29tcGxldGlvblBhcmFtcyxcbiAgICBjYW5jZWxsYXRpb25Ub2tlbj86IGpzb25ycGMuQ2FuY2VsbGF0aW9uVG9rZW5cbiAgKTogUHJvbWlzZTxsc3AuQ29tcGxldGlvbkl0ZW1bXSB8IGxzcC5Db21wbGV0aW9uTGlzdCB8IG51bGw+IHtcbiAgICAvLyBDYW5jZWwgcHJpb3IgcmVxdWVzdCBpZiBuZWNlc3NhcnlcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QobHNwLkNvbXBsZXRpb25SZXF1ZXN0LnR5cGUsIHBhcmFtcywgY2FuY2VsbGF0aW9uVG9rZW4pXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYGNvbXBsZXRpb25JdGVtL3Jlc29sdmVgIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgVGhlIHtDb21wbGV0aW9uSXRlbX0gZm9yIHdoaWNoIGEgZnVsbHkgcmVzb2x2ZWQge0NvbXBsZXRpb25JdGVtfSBpcyBkZXNpcmVkLlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIGEgZnVsbHkgcmVzb2x2ZWQge0NvbXBsZXRpb25JdGVtfS5cbiAgICovXG4gIHB1YmxpYyBjb21wbGV0aW9uSXRlbVJlc29sdmUocGFyYW1zOiBsc3AuQ29tcGxldGlvbkl0ZW0pOiBQcm9taXNlPGxzcC5Db21wbGV0aW9uSXRlbT4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuQ29tcGxldGlvblJlc29sdmVSZXF1ZXN0LnR5cGUsIHBhcmFtcylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFNlbmQgYSBgdGV4dERvY3VtZW50L2hvdmVyYCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7VGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXN9IGZvciB3aGljaCBhIHtIb3Zlcn0gaXMgZGVzaXJlZC5cbiAgICogQHJldHVybnMgQSB7UHJvbWlzZX0gY29udGFpbmluZyBhIHtIb3Zlcn0uXG4gICAqL1xuICBwdWJsaWMgaG92ZXIocGFyYW1zOiBsc3AuVGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpOiBQcm9taXNlPGxzcC5Ib3ZlciB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QobHNwLkhvdmVyUmVxdWVzdC50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHRleHREb2N1bWVudC9zaWduYXR1cmVIZWxwYCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7VGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXN9IGZvciB3aGljaCBhIHtTaWduYXR1cmVIZWxwfSBpcyBkZXNpcmVkLlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIGEge1NpZ25hdHVyZUhlbHB9LlxuICAgKi9cbiAgcHVibGljIHNpZ25hdHVyZUhlbHAocGFyYW1zOiBsc3AuVGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpOiBQcm9taXNlPGxzcC5TaWduYXR1cmVIZWxwIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuU2lnbmF0dXJlSGVscFJlcXVlc3QudHlwZSwgcGFyYW1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGB0ZXh0RG9jdW1lbnQvZGVmaW5pdGlvbmAgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUge1RleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zfSBvZiBhIHN5bWJvbCBmb3Igd2hpY2ggb25lIG9yIG1vcmUge0xvY2F0aW9ufXMgdGhhdCBkZWZpbmUgdGhhdFxuICAgKiAgIHN5bWJvbCBhcmUgcmVxdWlyZWQuXG4gICAqIEByZXR1cm5zIEEge1Byb21pc2V9IGNvbnRhaW5pbmcgZWl0aGVyIGEgc2luZ2xlIHtMb2NhdGlvbn0gb3IgYW4ge0FycmF5fSBvZiBtYW55IHtMb2NhdGlvbn1zLlxuICAgKi9cbiAgcHVibGljIGdvdG9EZWZpbml0aW9uKFxuICAgIHBhcmFtczogbHNwLlRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zXG4gICk6IFByb21pc2U8bHNwLkxvY2F0aW9uIHwgbHNwLkxvY2F0aW9uW10gfCBsc3AuTG9jYXRpb25MaW5rW10gfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGxzcC5EZWZpbml0aW9uUmVxdWVzdC50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHRleHREb2N1bWVudC9yZWZlcmVuY2VzYCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7VGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXN9IG9mIGEgc3ltYm9sIGZvciB3aGljaCBhbGwgcmVmZXJyaW5nIHtMb2NhdGlvbn1zIGFyZSBkZXNpcmVkLlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIGFuIHtBcnJheX0gb2Yge0xvY2F0aW9ufXMgdGhhdCByZWZlcmVuY2UgdGhpcyBzeW1ib2wuXG4gICAqL1xuICBwdWJsaWMgZmluZFJlZmVyZW5jZXMocGFyYW1zOiBsc3AuUmVmZXJlbmNlUGFyYW1zKTogUHJvbWlzZTxsc3AuTG9jYXRpb25bXSB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QobHNwLlJlZmVyZW5jZXNSZXF1ZXN0LnR5cGUsIHBhcmFtcylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFNlbmQgYSBgdGV4dERvY3VtZW50L2RvY3VtZW50SGlnaGxpZ2h0YCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7VGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXN9IG9mIGEgc3ltYm9sIGZvciB3aGljaCBhbGwgaGlnaGxpZ2h0cyBhcmUgZGVzaXJlZC5cbiAgICogQHJldHVybnMgQSB7UHJvbWlzZX0gY29udGFpbmluZyBhbiB7QXJyYXl9IG9mIHtEb2N1bWVudEhpZ2hsaWdodH1zIHRoYXQgY2FuIGJlIHVzZWQgdG8gaGlnaGxpZ2h0IHRoaXMgc3ltYm9sLlxuICAgKi9cbiAgcHVibGljIGRvY3VtZW50SGlnaGxpZ2h0KHBhcmFtczogbHNwLlRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTogUHJvbWlzZTxsc3AuRG9jdW1lbnRIaWdobGlnaHRbXSB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QobHNwLkRvY3VtZW50SGlnaGxpZ2h0UmVxdWVzdC50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHRleHREb2N1bWVudC9kb2N1bWVudFN5bWJvbGAgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUge0RvY3VtZW50U3ltYm9sUGFyYW1zfSB0aGF0IGlkZW50aWZpZXMgdGhlIGRvY3VtZW50IGZvciB3aGljaCBzeW1ib2xzIGFyZSBkZXNpcmVkLlxuICAgKiBAcGFyYW0gY2FuY2VsbGF0aW9uVG9rZW4gVGhlIHtDYW5jZWxsYXRpb25Ub2tlbn0gdGhhdCBpcyB1c2VkIHRvIGNhbmNlbCB0aGlzIHJlcXVlc3QgaWYgbmVjZXNzYXJ5LlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIGFuIHtBcnJheX0gb2Yge1N5bWJvbEluZm9ybWF0aW9ufXMgdGhhdCBjYW4gYmUgdXNlZCB0byBuYXZpZ2F0ZSB0aGlzIGRvY3VtZW50LlxuICAgKi9cbiAgcHVibGljIGRvY3VtZW50U3ltYm9sKFxuICAgIHBhcmFtczogbHNwLkRvY3VtZW50U3ltYm9sUGFyYW1zLFxuICAgIF9jYW5jZWxsYXRpb25Ub2tlbj86IGpzb25ycGMuQ2FuY2VsbGF0aW9uVG9rZW5cbiAgKTogUHJvbWlzZTxsc3AuU3ltYm9sSW5mb3JtYXRpb25bXSB8IGxzcC5Eb2N1bWVudFN5bWJvbFtdIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuRG9jdW1lbnRTeW1ib2xSZXF1ZXN0LnR5cGUsIHBhcmFtcylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFNlbmQgYSBgd29ya3NwYWNlL3N5bWJvbGAgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUge1dvcmtzcGFjZVN5bWJvbFBhcmFtc30gY29udGFpbmluZyB0aGUgcXVlcnkgc3RyaW5nIHRvIHNlYXJjaCB0aGUgd29ya3NwYWNlIGZvci5cbiAgICogQHJldHVybnMgQSB7UHJvbWlzZX0gY29udGFpbmluZyBhbiB7QXJyYXl9IG9mIHtTeW1ib2xJbmZvcm1hdGlvbn1zIHRoYXQgaWRlbnRpZnkgd2hlcmUgdGhlIHF1ZXJ5IHN0cmluZyBvY2N1cnNcbiAgICogICB3aXRoaW4gdGhlIHdvcmtzcGFjZS5cbiAgICovXG4gIHB1YmxpYyB3b3Jrc3BhY2VTeW1ib2wocGFyYW1zOiBsc3AuV29ya3NwYWNlU3ltYm9sUGFyYW1zKTogUHJvbWlzZTxsc3AuU3ltYm9sSW5mb3JtYXRpb25bXSB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QobHNwLldvcmtzcGFjZVN5bWJvbFJlcXVlc3QudHlwZSwgcGFyYW1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGB0ZXh0RG9jdW1lbnQvY29kZUFjdGlvbmAgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUge0NvZGVBY3Rpb25QYXJhbXN9IGlkZW50aWZ5aW5nIHRoZSBkb2N1bWVudCwgcmFuZ2UgYW5kIGNvbnRleHQgZm9yIHRoZSBjb2RlIGFjdGlvbi5cbiAgICogQHJldHVybnMgQSB7UHJvbWlzZX0gY29udGFpbmluZyBhbiB7QXJyYXl9IG9mIHtDb21tYW5kfXMgb3Ige0NvZGVBY3Rpb259cyB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgYWdhaW5zdCB0aGUgZ2l2ZW5cbiAgICogICBkb2N1bWVudHMgcmFuZ2UuXG4gICAqL1xuICBwdWJsaWMgY29kZUFjdGlvbihwYXJhbXM6IGxzcC5Db2RlQWN0aW9uUGFyYW1zKTogUHJvbWlzZTxBcnJheTxsc3AuQ29tbWFuZCB8IGxzcC5Db2RlQWN0aW9uPiB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QobHNwLkNvZGVBY3Rpb25SZXF1ZXN0LnR5cGUsIHBhcmFtcylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFNlbmQgYSBgY29kZUFjdGlvbi9yZXNvbHZlYCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7Q29kZUFjdGlvbn0gd2hvc2UgcHJvcGVydGllcyAoZS5nLiBgZWRpdGApIGFyZSB0byBiZSByZXNvbHZlZC5cbiAgICogQHJldHVybnMgQSByZXNvbHZlZCB7Q29kZUFjdGlvbn0gdGhhdCBjYW4gYmUgYXBwbGllZCBpbW1lZGlhdGVseS5cbiAgICovXG4gIHB1YmxpYyBjb2RlQWN0aW9uUmVzb2x2ZShwYXJhbXM6IGxzcC5Db2RlQWN0aW9uKTogUHJvbWlzZTxsc3AuQ29kZUFjdGlvbj4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuQ29kZUFjdGlvblJlc29sdmVSZXF1ZXN0LnR5cGUsIHBhcmFtcylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFNlbmQgYSBgdGV4dERvY3VtZW50L2NvZGVMZW5zYCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7Q29kZUxlbnNQYXJhbXN9IGlkZW50aWZ5aW5nIHRoZSBkb2N1bWVudCBmb3Igd2hpY2ggY29kZSBsZW5zIGNvbW1hbmRzIGFyZSBkZXNpcmVkLlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIGFuIHtBcnJheX0gb2Yge0NvZGVMZW5zfXMgdGhhdCBhc3NvY2lhdGUgY29tbWFuZHMgYW5kIGRhdGEgd2l0aCBzcGVjaWZpZWQgcmFuZ2VzXG4gICAqICAgd2l0aGluIHRoZSBkb2N1bWVudC5cbiAgICovXG4gIHB1YmxpYyBjb2RlTGVucyhwYXJhbXM6IGxzcC5Db2RlTGVuc1BhcmFtcyk6IFByb21pc2U8bHNwLkNvZGVMZW5zW10gfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGxzcC5Db2RlTGVuc1JlcXVlc3QudHlwZSwgcGFyYW1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGBjb2RlTGVucy9yZXNvbHZlYCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7Q29kZUxlbnN9IGlkZW50aWZ5aW5nIHRoZSBjb2RlIGxlbnMgdG8gYmUgcmVzb2x2ZWQgd2l0aCBmdWxsIGRldGFpbC5cbiAgICogQHJldHVybnMgQSB7UHJvbWlzZX0gY29udGFpbmluZyB0aGUge0NvZGVMZW5zfSBmdWxseSByZXNvbHZlZC5cbiAgICovXG4gIHB1YmxpYyBjb2RlTGVuc1Jlc29sdmUocGFyYW1zOiBsc3AuQ29kZUxlbnMpOiBQcm9taXNlPGxzcC5Db2RlTGVucz4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuQ29kZUxlbnNSZXNvbHZlUmVxdWVzdC50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHRleHREb2N1bWVudC9kb2N1bWVudExpbmtgIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgVGhlIHtEb2N1bWVudExpbmtQYXJhbXN9IGlkZW50aWZ5aW5nIHRoZSBkb2N1bWVudCBmb3Igd2hpY2ggbGlua3Mgc2hvdWxkIGJlIGlkZW50aWZpZWQuXG4gICAqIEByZXR1cm5zIEEge1Byb21pc2V9IGNvbnRhaW5pbmcgYW4ge0FycmF5fSBvZiB7RG9jdW1lbnRMaW5rfXMgcmVsYXRpbmcgdXJpJ3MgdG8gc3BlY2lmaWMgcmFuZ2VzIHdpdGhpbiB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBwdWJsaWMgZG9jdW1lbnRMaW5rKHBhcmFtczogbHNwLkRvY3VtZW50TGlua1BhcmFtcyk6IFByb21pc2U8bHNwLkRvY3VtZW50TGlua1tdIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuRG9jdW1lbnRMaW5rUmVxdWVzdC50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYGRvY3VtZW50TGluay9yZXNvbHZlYCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7RG9jdW1lbnRMaW5rfSBpZGVudGlmeWluZyB0aGUgZG9jdW1lbnQgbGluayB0byBiZSByZXNvbHZlZCB3aXRoIGZ1bGwgZGV0YWlsLlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIHRoZSB7RG9jdW1lbnRMaW5rfSBmdWxseSByZXNvbHZlZC5cbiAgICovXG4gIHB1YmxpYyBkb2N1bWVudExpbmtSZXNvbHZlKHBhcmFtczogbHNwLkRvY3VtZW50TGluayk6IFByb21pc2U8bHNwLkRvY3VtZW50TGluaz4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuRG9jdW1lbnRMaW5rUmVzb2x2ZVJlcXVlc3QudHlwZSwgcGFyYW1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGB0ZXh0RG9jdW1lbnQvZm9ybWF0dGluZ2AgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUge0RvY3VtZW50Rm9ybWF0dGluZ1BhcmFtc30gaWRlbnRpZnlpbmcgdGhlIGRvY3VtZW50IHRvIGJlIGZvcm1hdHRlZCBhcyB3ZWxsIGFzIGFkZGl0aW9uYWxcbiAgICogICBmb3JtYXR0aW5nIHByZWZlcmVuY2VzLlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIGFuIHtBcnJheX0gb2Yge1RleHRFZGl0fXMgdG8gYmUgYXBwbGllZCB0byB0aGUgZG9jdW1lbnQgdG8gY29ycmVjdGx5IHJlZm9ybWF0IGl0LlxuICAgKi9cbiAgcHVibGljIGRvY3VtZW50Rm9ybWF0dGluZyhwYXJhbXM6IGxzcC5Eb2N1bWVudEZvcm1hdHRpbmdQYXJhbXMpOiBQcm9taXNlPGxzcC5UZXh0RWRpdFtdIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuRG9jdW1lbnRGb3JtYXR0aW5nUmVxdWVzdC50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHRleHREb2N1bWVudC9yYW5nZUZvcm1hdHRpbmdgIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgVGhlIHtEb2N1bWVudFJhbmdlRm9ybWF0dGluZ1BhcmFtc30gaWRlbnRpZnlpbmcgdGhlIGRvY3VtZW50IGFuZCByYW5nZSB0byBiZSBmb3JtYXR0ZWQgYXMgd2VsbCBhc1xuICAgKiAgIGFkZGl0aW9uYWwgZm9ybWF0dGluZyBwcmVmZXJlbmNlcy5cbiAgICogQHJldHVybnMgQSB7UHJvbWlzZX0gY29udGFpbmluZyBhbiB7QXJyYXl9IG9mIHtUZXh0RWRpdH1zIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGRvY3VtZW50IHRvIGNvcnJlY3RseSByZWZvcm1hdCBpdC5cbiAgICovXG4gIHB1YmxpYyBkb2N1bWVudFJhbmdlRm9ybWF0dGluZyhwYXJhbXM6IGxzcC5Eb2N1bWVudFJhbmdlRm9ybWF0dGluZ1BhcmFtcyk6IFByb21pc2U8bHNwLlRleHRFZGl0W10gfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGxzcC5Eb2N1bWVudFJhbmdlRm9ybWF0dGluZ1JlcXVlc3QudHlwZSwgcGFyYW1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYzogU2VuZCBhIGB0ZXh0RG9jdW1lbnQvb25UeXBlRm9ybWF0dGluZ2AgcmVxdWVzdC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmFtcyBUaGUge0RvY3VtZW50T25UeXBlRm9ybWF0dGluZ1BhcmFtc30gaWRlbnRpZnlpbmcgdGhlIGRvY3VtZW50IHRvIGJlIGZvcm1hdHRlZCwgdGhlIGNoYXJhY3RlciB0aGF0IHdhc1xuICAgKiAgIHR5cGVkIGFuZCBhdCB3aGF0IHBvc2l0aW9uIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBmb3JtYXR0aW5nIHByZWZlcmVuY2VzLlxuICAgKiBAcmV0dXJucyBBIHtQcm9taXNlfSBjb250YWluaW5nIGFuIHtBcnJheX0gb2Yge1RleHRFZGl0fXMgdG8gYmUgYXBwbGllZCB0byB0aGUgZG9jdW1lbnQgdG8gY29ycmVjdGx5IHJlZm9ybWF0IGl0LlxuICAgKi9cbiAgcHVibGljIGRvY3VtZW50T25UeXBlRm9ybWF0dGluZyhwYXJhbXM6IGxzcC5Eb2N1bWVudE9uVHlwZUZvcm1hdHRpbmdQYXJhbXMpOiBQcm9taXNlPGxzcC5UZXh0RWRpdFtdIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChsc3AuRG9jdW1lbnRPblR5cGVGb3JtYXR0aW5nUmVxdWVzdC50eXBlLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUHVibGljOiBTZW5kIGEgYHRleHREb2N1bWVudC9yZW5hbWVgIHJlcXVlc3QuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJhbXMgVGhlIHtSZW5hbWVQYXJhbXN9IGlkZW50aWZ5aW5nIHRoZSBkb2N1bWVudCBjb250YWluaW5nIHRoZSBzeW1ib2wgdG8gYmUgcmVuYW1lZCwgYXMgd2VsbCBhcyB0aGVcbiAgICogICBwb3NpdGlvbiBhbmQgbmV3IG5hbWUuXG4gICAqIEByZXR1cm5zIEEge1Byb21pc2V9IGNvbnRhaW5pbmcgYW4ge1dvcmtzcGFjZUVkaXR9IHRoYXQgY29udGFpbnMgYSBsaXN0IG9mIHtUZXh0RWRpdH1zIGVpdGhlciBvbiB0aGUgY2hhbmdlc1xuICAgKiAgIHByb3BlcnR5IChrZXllZCBieSB1cmkpIG9yIHRoZSBkb2N1bWVudENoYW5nZXMgcHJvcGVydHkgY29udGFpbmluZyBhbiB7QXJyYXl9IG9mIHtUZXh0RG9jdW1lbnRFZGl0fXMgKHByZWZlcnJlZCkuXG4gICAqL1xuICBwdWJsaWMgcmVuYW1lKHBhcmFtczogbHNwLlJlbmFtZVBhcmFtcyk6IFByb21pc2U8bHNwLldvcmtzcGFjZUVkaXQgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGxzcC5SZW5hbWVSZXF1ZXN0LnR5cGUsIHBhcmFtcylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWM6IFNlbmQgYSBgd29ya3NwYWNlL2V4ZWN1dGVDb21tYW5kYCByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyYW1zIFRoZSB7RXhlY3V0ZUNvbW1hbmRQYXJhbXN9IHNwZWNpZnlpbmcgdGhlIGNvbW1hbmQgYW5kIGFyZ3VtZW50cyB0aGUgbGFuZ3VhZ2Ugc2VydmVyIHNob3VsZCBleGVjdXRlXG4gICAqICAgKHRoZXNlIGNvbW1hbmRzIGFyZSB1c3VhbGx5IGZyb20ge0NvZGVMZW5zfSBvciB7Q29kZUFjdGlvbn0gcmVzcG9uc2VzKS5cbiAgICogQHJldHVybnMgQSB7UHJvbWlzZX0gY29udGFpbmluZyBhbnl0aGluZy5cbiAgICovXG4gIHB1YmxpYyBleGVjdXRlQ29tbWFuZChwYXJhbXM6IGxzcC5FeGVjdXRlQ29tbWFuZFBhcmFtcyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGxzcC5FeGVjdXRlQ29tbWFuZFJlcXVlc3QudHlwZSwgcGFyYW1zKVxuICB9XG5cbiAgcHJpdmF0ZSBfb25SZXF1ZXN0PFQgZXh0ZW5kcyBFeHRyYWN0PGtleW9mIEtub3duUmVxdWVzdHMsIHN0cmluZz4+KFxuICAgIHR5cGU6IHsgbWV0aG9kOiBUIH0sXG4gICAgY2FsbGJhY2s6IFJlcXVlc3RDYWxsYmFjazxUPlxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9ycGMub25SZXF1ZXN0KHR5cGUubWV0aG9kLCAodmFsdWUpID0+IHtcbiAgICAgIHRoaXMuX2xvZy5kZWJ1ZyhgcnBjLm9uUmVxdWVzdCAke3R5cGUubWV0aG9kfWAsIHZhbHVlKVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKHZhbHVlKVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIF9vbk5vdGlmaWNhdGlvbjxUIGV4dGVuZHMgRXh0cmFjdDxrZXlvZiBLbm93bk5vdGlmaWNhdGlvbnMsIHN0cmluZz4+KFxuICAgIHR5cGU6IHsgbWV0aG9kOiBUIH0sXG4gICAgY2FsbGJhY2s6IChvYmo6IEtub3duTm90aWZpY2F0aW9uc1tUXSkgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICB0aGlzLl9ycGMub25Ob3RpZmljYXRpb24odHlwZS5tZXRob2QsICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICB0aGlzLl9sb2cuZGVidWcoYHJwYy5vbk5vdGlmaWNhdGlvbiAke3R5cGUubWV0aG9kfWAsIHZhbHVlKVxuICAgICAgY2FsbGJhY2sodmFsdWUpXG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgX3NlbmROb3RpZmljYXRpb248UCwgUk8+KFxuICAgIHByb3RvY29sOiBsc3AuUHJvdG9jb2xOb3RpZmljYXRpb25UeXBlPFAsIFJPPiB8IGxzcC5Qcm90b2NvbE5vdGlmaWNhdGlvblR5cGUwPFJPPixcbiAgICBhcmdzPzogUFxuICApOiB2b2lkIHtcbiAgICBjb25zdCB7IG1ldGhvZCB9ID0gcHJvdG9jb2xcbiAgICB0aGlzLl9sb2cuZGVidWcoYHJwYy5zZW5kTm90aWZpY2F0aW9uICR7bWV0aG9kfWAsIGFyZ3MpXG4gICAgdGhpcy5fcnBjLnNlbmROb3RpZmljYXRpb24obWV0aG9kLCBhcmdzKVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfc2VuZFJlcXVlc3Q8UCwgUiwgUFIsIEUsIFJPPihcbiAgICBwcm90b2NvbDogbHNwLlByb3RvY29sUmVxdWVzdFR5cGU8UCwgUiwgUFIsIEUsIFJPPiB8IGxzcC5Qcm90b2NvbFJlcXVlc3RUeXBlMDxSLCBQUiwgRSwgUk8+LFxuICAgIGFyZ3M/OiBQLFxuICAgIGNhbmNlbGxhdGlvblRva2VuPzoganNvbnJwYy5DYW5jZWxsYXRpb25Ub2tlblxuICApOiBQcm9taXNlPFI+IHtcbiAgICBjb25zdCB7IG1ldGhvZCB9ID0gcHJvdG9jb2xcbiAgICB0aGlzLl9sb2cuZGVidWcoYHJwYy5zZW5kUmVxdWVzdCAke21ldGhvZH0gc2VuZGluZ2AsIGFyZ3MpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGxldCByZXN1bHQ6IFJcbiAgICAgIGlmIChjYW5jZWxsYXRpb25Ub2tlbikge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9ycGMuc2VuZFJlcXVlc3QobWV0aG9kLCBhcmdzLCBjYW5jZWxsYXRpb25Ub2tlbilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIGNhbmNlbGxhdGlvblRva2VuIGlzIG51bGwgb3IgdW5kZWZpbmVkLCBkb24ndCBhZGQgdGhlIHRoaXJkXG4gICAgICAgIC8vIGFyZ3VtZW50IG90aGVyd2lzZSB2c2NvZGUtanNvbnJwYyB3aWxsIHNlbmQgYW4gYWRkaXRpb25hbCwgbnVsbFxuICAgICAgICAvLyBtZXNzYWdlIHBhcmFtZXRlciB0byB0aGUgcmVxdWVzdFxuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9ycGMuc2VuZFJlcXVlc3QobWV0aG9kLCBhcmdzKVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0b29rID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFxuICAgICAgdGhpcy5fbG9nLmRlYnVnKGBycGMuc2VuZFJlcXVlc3QgJHttZXRob2R9IHJlY2VpdmVkICgke01hdGguZmxvb3IodG9vayl9bXMpYCwgcmVzdWx0KVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRXJyb3IgPSBlIGFzIGpzb25ycGMuUmVzcG9uc2VFcnJvcjxhbnk+XG4gICAgICBpZiAoY2FuY2VsbGF0aW9uVG9rZW4gJiYgcmVzcG9uc2VFcnJvci5jb2RlID09PSBsc3AuTFNQRXJyb3JDb2Rlcy5SZXF1ZXN0Q2FuY2VsbGVkKSB7XG4gICAgICAgIHRoaXMuX2xvZy5kZWJ1ZyhgcnBjLnNlbmRSZXF1ZXN0ICR7bWV0aG9kfSB3YXMgY2FuY2VsbGVkYClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xvZy5lcnJvcihgcnBjLnNlbmRSZXF1ZXN0ICR7bWV0aG9kfSB0aHJld2AsIGUpXG4gICAgICB9XG5cbiAgICAgIHRocm93IGVcbiAgICB9XG4gIH1cbn1cblxuLyoqIENvbnRhaW5zIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbnRleHQgaW4gd2hpY2ggYSBjb21wbGV0aW9uIHJlcXVlc3QgaXMgdHJpZ2dlcmVkLiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ29udGV4dCB7XG4gIC8qKiBIb3cgdGhlIGNvbXBsZXRpb24gd2FzIHRyaWdnZXJlZC4gKi9cbiAgdHJpZ2dlcktpbmQ6IGxzcC5Db21wbGV0aW9uVHJpZ2dlcktpbmRcblxuICAvKipcbiAgICogVGhlIHRyaWdnZXIgY2hhcmFjdGVyIChhIHNpbmdsZSBjaGFyYWN0ZXIpIHRoYXQgaGFzIHRyaWdnZXIgY29kZSBjb21wbGV0ZS4gSXMgdW5kZWZpbmVkIGlmIGB0cmlnZ2VyS2luZCAhPT1cbiAgICogQ29tcGxldGlvblRyaWdnZXJLaW5kLlRyaWdnZXJDaGFyYWN0ZXJgXG4gICAqL1xuICB0cmlnZ2VyQ2hhcmFjdGVyPzogc3RyaW5nXG59XG5cbi8qKiBDb21wbGV0aW9uIHBhcmFtZXRlcnMgKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvblBhcmFtcyBleHRlbmRzIGxzcC5UZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgY29tcGxldGlvbiBjb250ZXh0LiBUaGlzIGlzIG9ubHkgYXZhaWxhYmxlIGl0IHRoZSBjbGllbnQgc3BlY2lmaWVzIHRvIHNlbmQgdGhpcyB1c2luZ1xuICAgKiBgQ2xpZW50Q2FwYWJpbGl0aWVzLnRleHREb2N1bWVudC5jb21wbGV0aW9uLmNvbnRleHRTdXBwb3J0ID09PSB0cnVlYFxuICAgKi9cbiAgY29udGV4dD86IENvbXBsZXRpb25Db250ZXh0XG59XG4iXX0=