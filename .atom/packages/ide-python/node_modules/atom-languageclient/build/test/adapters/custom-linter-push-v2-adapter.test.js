var _linterPushV2Adapter = require('../../lib/adapters/linter-push-v2-adapter');

var _linterPushV2Adapter2 = _interopRequireDefault(_linterPushV2Adapter);

var _languageclient = require('../../lib/languageclient');

var ls = _interopRequireWildcard(_languageclient);

var _chai = require('chai');

var _atom = require('atom');

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const messageUrl = 'dummy';
const messageSolutions = ['dummy'];

class CustomLinterPushV2Adapter extends _linterPushV2Adapter2.default {
  diagnosticToV2Message(path, diagnostic) {
    const message = super.diagnosticToV2Message(path, diagnostic);
    message.url = messageUrl;
    message.solutions = messageSolutions;
    return message;
  }
}

describe('CustomLinterPushV2Adapter', () => {
  describe('diagnosticToMessage', () => {
    it('converts Diagnostic and path to a linter$Message', () => {
      const filePath = '/a/b/c/d';
      const diagnostic = {
        message: 'This is a message',
        range: {
          start: { line: 1, character: 2 },
          end: { line: 3, character: 4 }
        },
        source: 'source',
        code: 'code',
        severity: ls.DiagnosticSeverity.Information,
        type: ls.DiagnosticSeverity.Information
      };

      const connection = { onPublishDiagnostics() {} };
      const adapter = new CustomLinterPushV2Adapter(connection);
      const result = adapter.diagnosticToV2Message(filePath, diagnostic);

      (0, _chai.expect)(result.excerpt).equals(diagnostic.message);
      (0, _chai.expect)(result.linterName).equals(diagnostic.source);
      (0, _chai.expect)(result.location.file).equals(filePath);
      (0, _chai.expect)(result.location.position).deep.equals(new _atom.Range(new _atom.Point(1, 2), new _atom.Point(3, 4)));
      (0, _chai.expect)(result.severity).equals('info');
      (0, _chai.expect)(result.url).equals(messageUrl);
      (0, _chai.expect)(result.solutions).deep.equals(messageSolutions);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Rlc3QvYWRhcHRlcnMvY3VzdG9tLWxpbnRlci1wdXNoLXYyLWFkYXB0ZXIudGVzdC5qcyJdLCJuYW1lcyI6WyJscyIsIm1lc3NhZ2VVcmwiLCJtZXNzYWdlU29sdXRpb25zIiwiQ3VzdG9tTGludGVyUHVzaFYyQWRhcHRlciIsImRpYWdub3N0aWNUb1YyTWVzc2FnZSIsInBhdGgiLCJkaWFnbm9zdGljIiwibWVzc2FnZSIsInVybCIsInNvbHV0aW9ucyIsImRlc2NyaWJlIiwiaXQiLCJmaWxlUGF0aCIsInJhbmdlIiwic3RhcnQiLCJsaW5lIiwiY2hhcmFjdGVyIiwiZW5kIiwic291cmNlIiwiY29kZSIsInNldmVyaXR5IiwiRGlhZ25vc3RpY1NldmVyaXR5IiwiSW5mb3JtYXRpb24iLCJ0eXBlIiwiY29ubmVjdGlvbiIsIm9uUHVibGlzaERpYWdub3N0aWNzIiwiYWRhcHRlciIsInJlc3VsdCIsImV4Y2VycHQiLCJlcXVhbHMiLCJsaW50ZXJOYW1lIiwibG9jYXRpb24iLCJmaWxlIiwicG9zaXRpb24iLCJkZWVwIl0sIm1hcHBpbmdzIjoiQUFFQTs7OztBQUNBOztJQUFZQSxFOztBQUNaOztBQUNBOzs7Ozs7QUFFQSxNQUFNQyxhQUFhLE9BQW5CO0FBQ0EsTUFBTUMsbUJBQStCLENBQUMsT0FBRCxDQUFyQzs7QUFFQSxNQUFNQyx5QkFBTix1Q0FBNEQ7QUFDMURDLHdCQUFzQkMsSUFBdEIsRUFBNEJDLFVBQTVCLEVBQXdDO0FBQ3RDLFVBQU1DLFVBQVUsTUFBTUgscUJBQU4sQ0FBNEJDLElBQTVCLEVBQWtDQyxVQUFsQyxDQUFoQjtBQUNBQyxZQUFRQyxHQUFSLEdBQWNQLFVBQWQ7QUFDQU0sWUFBUUUsU0FBUixHQUFvQlAsZ0JBQXBCO0FBQ0EsV0FBT0ssT0FBUDtBQUNEO0FBTnlEOztBQVM1REcsU0FBUywyQkFBVCxFQUFzQyxNQUFNO0FBQzFDQSxXQUFTLHFCQUFULEVBQWdDLE1BQU07QUFDcENDLE9BQUcsa0RBQUgsRUFBdUQsTUFBTTtBQUMzRCxZQUFNQyxXQUFXLFVBQWpCO0FBQ0EsWUFBTU4sYUFBNEI7QUFDaENDLGlCQUFTLG1CQUR1QjtBQUVoQ00sZUFBTztBQUNMQyxpQkFBTyxFQUFDQyxNQUFNLENBQVAsRUFBVUMsV0FBVyxDQUFyQixFQURGO0FBRUxDLGVBQUssRUFBQ0YsTUFBTSxDQUFQLEVBQVVDLFdBQVcsQ0FBckI7QUFGQSxTQUZ5QjtBQU1oQ0UsZ0JBQVEsUUFOd0I7QUFPaENDLGNBQU0sTUFQMEI7QUFRaENDLGtCQUFVcEIsR0FBR3FCLGtCQUFILENBQXNCQyxXQVJBO0FBU2hDQyxjQUFNdkIsR0FBR3FCLGtCQUFILENBQXNCQztBQVRJLE9BQWxDOztBQVlBLFlBQU1FLGFBQWtCLEVBQUNDLHVCQUF1QixDQUFFLENBQTFCLEVBQXhCO0FBQ0EsWUFBTUMsVUFBVSxJQUFJdkIseUJBQUosQ0FBOEJxQixVQUE5QixDQUFoQjtBQUNBLFlBQU1HLFNBQVNELFFBQVF0QixxQkFBUixDQUE4QlEsUUFBOUIsRUFBd0NOLFVBQXhDLENBQWY7O0FBRUEsd0JBQU9xQixPQUFPQyxPQUFkLEVBQXVCQyxNQUF2QixDQUE4QnZCLFdBQVdDLE9BQXpDO0FBQ0Esd0JBQU9vQixPQUFPRyxVQUFkLEVBQTBCRCxNQUExQixDQUFpQ3ZCLFdBQVdZLE1BQTVDO0FBQ0Esd0JBQU9TLE9BQU9JLFFBQVAsQ0FBZ0JDLElBQXZCLEVBQTZCSCxNQUE3QixDQUFvQ2pCLFFBQXBDO0FBQ0Esd0JBQU9lLE9BQU9JLFFBQVAsQ0FBZ0JFLFFBQXZCLEVBQWlDQyxJQUFqQyxDQUFzQ0wsTUFBdEMsQ0FBNkMsZ0JBQVUsZ0JBQVUsQ0FBVixFQUFhLENBQWIsQ0FBVixFQUEyQixnQkFBVSxDQUFWLEVBQWEsQ0FBYixDQUEzQixDQUE3QztBQUNBLHdCQUFPRixPQUFPUCxRQUFkLEVBQXdCUyxNQUF4QixDQUErQixNQUEvQjtBQUNBLHdCQUFPRixPQUFPbkIsR0FBZCxFQUFtQnFCLE1BQW5CLENBQTBCNUIsVUFBMUI7QUFDQSx3QkFBTzBCLE9BQU9sQixTQUFkLEVBQXlCeUIsSUFBekIsQ0FBOEJMLE1BQTlCLENBQXFDM0IsZ0JBQXJDO0FBQ0QsS0F6QkQ7QUEwQkQsR0EzQkQ7QUE0QkQsQ0E3QkQiLCJmaWxlIjoiY3VzdG9tLWxpbnRlci1wdXNoLXYyLWFkYXB0ZXIudGVzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5cbmltcG9ydCBMaW50ZXJQdXNoVjJBZGFwdGVyIGZyb20gJy4uLy4uL2xpYi9hZGFwdGVycy9saW50ZXItcHVzaC12Mi1hZGFwdGVyJztcbmltcG9ydCAqIGFzIGxzIGZyb20gJy4uLy4uL2xpYi9sYW5ndWFnZWNsaWVudCc7XG5pbXBvcnQge2V4cGVjdH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQge1BvaW50LCBSYW5nZX0gZnJvbSAnYXRvbSc7XG5cbmNvbnN0IG1lc3NhZ2VVcmwgPSAnZHVtbXknO1xuY29uc3QgbWVzc2FnZVNvbHV0aW9uczogQXJyYXk8YW55PiA9IFsnZHVtbXknXTtcblxuY2xhc3MgQ3VzdG9tTGludGVyUHVzaFYyQWRhcHRlciBleHRlbmRzIExpbnRlclB1c2hWMkFkYXB0ZXIge1xuICBkaWFnbm9zdGljVG9WMk1lc3NhZ2UocGF0aCwgZGlhZ25vc3RpYykge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBzdXBlci5kaWFnbm9zdGljVG9WMk1lc3NhZ2UocGF0aCwgZGlhZ25vc3RpYyk7XG4gICAgbWVzc2FnZS51cmwgPSBtZXNzYWdlVXJsO1xuICAgIG1lc3NhZ2Uuc29sdXRpb25zID0gbWVzc2FnZVNvbHV0aW9ucztcbiAgICByZXR1cm4gbWVzc2FnZTtcbiAgfVxufVxuXG5kZXNjcmliZSgnQ3VzdG9tTGludGVyUHVzaFYyQWRhcHRlcicsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2RpYWdub3N0aWNUb01lc3NhZ2UnLCAoKSA9PiB7XG4gICAgaXQoJ2NvbnZlcnRzIERpYWdub3N0aWMgYW5kIHBhdGggdG8gYSBsaW50ZXIkTWVzc2FnZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gJy9hL2IvYy9kJztcbiAgICAgIGNvbnN0IGRpYWdub3N0aWM6IGxzLkRpYWdub3N0aWMgPSB7XG4gICAgICAgIG1lc3NhZ2U6ICdUaGlzIGlzIGEgbWVzc2FnZScsXG4gICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgc3RhcnQ6IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDJ9LFxuICAgICAgICAgIGVuZDoge2xpbmU6IDMsIGNoYXJhY3RlcjogNH0sXG4gICAgICAgIH0sXG4gICAgICAgIHNvdXJjZTogJ3NvdXJjZScsXG4gICAgICAgIGNvZGU6ICdjb2RlJyxcbiAgICAgICAgc2V2ZXJpdHk6IGxzLkRpYWdub3N0aWNTZXZlcml0eS5JbmZvcm1hdGlvbixcbiAgICAgICAgdHlwZTogbHMuRGlhZ25vc3RpY1NldmVyaXR5LkluZm9ybWF0aW9uLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgY29ubmVjdGlvbjogYW55ID0ge29uUHVibGlzaERpYWdub3N0aWNzKCkge319O1xuICAgICAgY29uc3QgYWRhcHRlciA9IG5ldyBDdXN0b21MaW50ZXJQdXNoVjJBZGFwdGVyKGNvbm5lY3Rpb24pO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYWRhcHRlci5kaWFnbm9zdGljVG9WMk1lc3NhZ2UoZmlsZVBhdGgsIGRpYWdub3N0aWMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmV4Y2VycHQpLmVxdWFscyhkaWFnbm9zdGljLm1lc3NhZ2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5saW50ZXJOYW1lKS5lcXVhbHMoZGlhZ25vc3RpYy5zb3VyY2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5sb2NhdGlvbi5maWxlKS5lcXVhbHMoZmlsZVBhdGgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5sb2NhdGlvbi5wb3NpdGlvbikuZGVlcC5lcXVhbHMobmV3IFJhbmdlKG5ldyBQb2ludCgxLCAyKSwgbmV3IFBvaW50KDMsIDQpKSk7XG4gICAgICBleHBlY3QocmVzdWx0LnNldmVyaXR5KS5lcXVhbHMoJ2luZm8nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudXJsKS5lcXVhbHMobWVzc2FnZVVybCk7XG4gICAgICBleHBlY3QocmVzdWx0LnNvbHV0aW9ucykuZGVlcC5lcXVhbHMobWVzc2FnZVNvbHV0aW9ucyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=