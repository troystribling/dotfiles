"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const linter_push_v2_adapter_1 = require("../../lib/adapters/linter-push-v2-adapter");
const ls = require("../../lib/languageclient");
const chai_1 = require("chai");
const atom_1 = require("atom");
const messageUrl = 'dummy';
const messageSolutions = ['dummy'];
class CustomLinterPushV2Adapter extends linter_push_v2_adapter_1.default {
    diagnosticToV2Message(path, diagnostic) {
        const message = super.diagnosticToV2Message(path, diagnostic);
        message.url = messageUrl;
        message.solutions = messageSolutions;
        return message;
    }
}
describe('CustomLinterPushV2Adapter', () => {
    describe('diagnosticToMessage', () => {
        it('converts Diagnostic and path to a linter$Message', () => {
            const filePath = '/a/b/c/d';
            const diagnostic = {
                message: 'This is a message',
                range: {
                    start: { line: 1, character: 2 },
                    end: { line: 3, character: 4 },
                },
                source: 'source',
                code: 'code',
                severity: ls.DiagnosticSeverity.Information,
            };
            const connection = { onPublishDiagnostics() { } };
            const adapter = new CustomLinterPushV2Adapter(connection);
            const result = adapter.diagnosticToV2Message(filePath, diagnostic);
            chai_1.expect(result.excerpt).equals(diagnostic.message);
            chai_1.expect(result.linterName).equals(diagnostic.source);
            chai_1.expect(result.location.file).equals(filePath);
            chai_1.expect(result.location.position).deep.equals(new atom_1.Range(new atom_1.Point(1, 2), new atom_1.Point(3, 4)));
            chai_1.expect(result.severity).equals('info');
            chai_1.expect(result.url).equals(messageUrl);
            chai_1.expect(result.solutions).deep.equals(messageSolutions);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tLWxpbnRlci1wdXNoLXYyLWFkYXB0ZXIudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Rlc3QvYWRhcHRlcnMvY3VzdG9tLWxpbnRlci1wdXNoLXYyLWFkYXB0ZXIudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNGQUE0RTtBQUM1RSwrQ0FBK0M7QUFDL0MsK0JBQThCO0FBQzlCLCtCQUFvQztBQUVwQyxNQUFNLFVBQVUsR0FBRyxPQUFPLENBQUM7QUFDM0IsTUFBTSxnQkFBZ0IsR0FBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBRTFDLCtCQUFnQyxTQUFRLGdDQUFtQjtJQUNsRCxxQkFBcUIsQ0FBQyxJQUFZLEVBQUUsVUFBeUI7UUFDbEUsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLHFCQUFxQixDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztRQUM5RCxPQUFPLENBQUMsR0FBRyxHQUFHLFVBQVUsQ0FBQztRQUN6QixPQUFPLENBQUMsU0FBUyxHQUFHLGdCQUFnQixDQUFDO1FBQ3JDLE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFDakIsQ0FBQztDQUNGO0FBRUQsUUFBUSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtJQUN6QyxRQUFRLENBQUMscUJBQXFCLEVBQUUsR0FBRyxFQUFFO1FBQ25DLEVBQUUsQ0FBQyxrREFBa0QsRUFBRSxHQUFHLEVBQUU7WUFDMUQsTUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDO1lBQzVCLE1BQU0sVUFBVSxHQUFrQjtnQkFDaEMsT0FBTyxFQUFFLG1CQUFtQjtnQkFDNUIsS0FBSyxFQUFFO29CQUNMLEtBQUssRUFBRSxFQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBQztvQkFDOUIsR0FBRyxFQUFFLEVBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFDO2lCQUM3QjtnQkFDRCxNQUFNLEVBQUUsUUFBUTtnQkFDaEIsSUFBSSxFQUFFLE1BQU07Z0JBQ1osUUFBUSxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxXQUFXO2FBQzVDLENBQUM7WUFFRixNQUFNLFVBQVUsR0FBUSxFQUFDLG9CQUFvQixLQUFJLENBQUMsRUFBQyxDQUFDO1lBQ3BELE1BQU0sT0FBTyxHQUFHLElBQUkseUJBQXlCLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDMUQsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUVuRSxhQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDbEQsYUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3BELGFBQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM5QyxhQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksWUFBSyxDQUFDLElBQUksWUFBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLFlBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFGLGFBQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3ZDLGFBQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3RDLGFBQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3pELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMaW50ZXJQdXNoVjJBZGFwdGVyIGZyb20gJy4uLy4uL2xpYi9hZGFwdGVycy9saW50ZXItcHVzaC12Mi1hZGFwdGVyJztcclxuaW1wb3J0ICogYXMgbHMgZnJvbSAnLi4vLi4vbGliL2xhbmd1YWdlY2xpZW50JztcclxuaW1wb3J0IHsgZXhwZWN0IH0gZnJvbSAnY2hhaSc7XHJcbmltcG9ydCB7IFBvaW50LCBSYW5nZSB9IGZyb20gJ2F0b20nO1xyXG5cclxuY29uc3QgbWVzc2FnZVVybCA9ICdkdW1teSc7XHJcbmNvbnN0IG1lc3NhZ2VTb2x1dGlvbnM6IGFueVtdID0gWydkdW1teSddO1xyXG5cclxuY2xhc3MgQ3VzdG9tTGludGVyUHVzaFYyQWRhcHRlciBleHRlbmRzIExpbnRlclB1c2hWMkFkYXB0ZXIge1xyXG4gIHB1YmxpYyBkaWFnbm9zdGljVG9WMk1lc3NhZ2UocGF0aDogc3RyaW5nLCBkaWFnbm9zdGljOiBscy5EaWFnbm9zdGljKSB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gc3VwZXIuZGlhZ25vc3RpY1RvVjJNZXNzYWdlKHBhdGgsIGRpYWdub3N0aWMpO1xyXG4gICAgbWVzc2FnZS51cmwgPSBtZXNzYWdlVXJsO1xyXG4gICAgbWVzc2FnZS5zb2x1dGlvbnMgPSBtZXNzYWdlU29sdXRpb25zO1xyXG4gICAgcmV0dXJuIG1lc3NhZ2U7XHJcbiAgfVxyXG59XHJcblxyXG5kZXNjcmliZSgnQ3VzdG9tTGludGVyUHVzaFYyQWRhcHRlcicsICgpID0+IHtcclxuICBkZXNjcmliZSgnZGlhZ25vc3RpY1RvTWVzc2FnZScsICgpID0+IHtcclxuICAgIGl0KCdjb252ZXJ0cyBEaWFnbm9zdGljIGFuZCBwYXRoIHRvIGEgbGludGVyJE1lc3NhZ2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gJy9hL2IvYy9kJztcclxuICAgICAgY29uc3QgZGlhZ25vc3RpYzogbHMuRGlhZ25vc3RpYyA9IHtcclxuICAgICAgICBtZXNzYWdlOiAnVGhpcyBpcyBhIG1lc3NhZ2UnLFxyXG4gICAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgICBzdGFydDoge2xpbmU6IDEsIGNoYXJhY3RlcjogMn0sXHJcbiAgICAgICAgICBlbmQ6IHtsaW5lOiAzLCBjaGFyYWN0ZXI6IDR9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc291cmNlOiAnc291cmNlJyxcclxuICAgICAgICBjb2RlOiAnY29kZScsXHJcbiAgICAgICAgc2V2ZXJpdHk6IGxzLkRpYWdub3N0aWNTZXZlcml0eS5JbmZvcm1hdGlvbixcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb246IGFueSA9IHtvblB1Ymxpc2hEaWFnbm9zdGljcygpIHt9fTtcclxuICAgICAgY29uc3QgYWRhcHRlciA9IG5ldyBDdXN0b21MaW50ZXJQdXNoVjJBZGFwdGVyKGNvbm5lY3Rpb24pO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhZGFwdGVyLmRpYWdub3N0aWNUb1YyTWVzc2FnZShmaWxlUGF0aCwgZGlhZ25vc3RpYyk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0LmV4Y2VycHQpLmVxdWFscyhkaWFnbm9zdGljLm1lc3NhZ2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmxpbnRlck5hbWUpLmVxdWFscyhkaWFnbm9zdGljLnNvdXJjZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubG9jYXRpb24uZmlsZSkuZXF1YWxzKGZpbGVQYXRoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5sb2NhdGlvbi5wb3NpdGlvbikuZGVlcC5lcXVhbHMobmV3IFJhbmdlKG5ldyBQb2ludCgxLCAyKSwgbmV3IFBvaW50KDMsIDQpKSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc2V2ZXJpdHkpLmVxdWFscygnaW5mbycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnVybCkuZXF1YWxzKG1lc3NhZ2VVcmwpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnNvbHV0aW9ucykuZGVlcC5lcXVhbHMobWVzc2FnZVNvbHV0aW9ucyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdfQ==