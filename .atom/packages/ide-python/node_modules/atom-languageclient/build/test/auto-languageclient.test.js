"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const auto_languageclient_1 = require("../lib/auto-languageclient");
const chai_1 = require("chai");
describe('AutoLanguageClient', () => {
    describe('shouldSyncForEditor', () => {
        class CustomAutoLanguageClient extends auto_languageclient_1.default {
            getGrammarScopes() {
                return ['Java', 'Python'];
            }
        }
        const client = new CustomAutoLanguageClient();
        function mockEditor(uri, scopeName) {
            return {
                getPath: () => uri,
                getGrammar: () => {
                    return { scopeName };
                },
            };
        }
        it('selects documents in project and in supported language', () => {
            const editor = mockEditor('/path/to/somewhere', client.getGrammarScopes()[0]);
            chai_1.expect(client.shouldSyncForEditor(editor, '/path/to/somewhere')).equals(true);
        });
        it('does not select documents outside of project', () => {
            const editor = mockEditor('/path/to/elsewhere/file', client.getGrammarScopes()[0]);
            chai_1.expect(client.shouldSyncForEditor(editor, '/path/to/somewhere')).equals(false);
        });
        it('does not select documents in unsupported language', () => {
            const editor = mockEditor('/path/to/somewhere', client.getGrammarScopes()[0] + '-dummy');
            chai_1.expect(client.shouldSyncForEditor(editor, '/path/to/somewhere')).equals(false);
        });
        it('does not select documents in unsupported language outside of project', () => {
            const editor = mockEditor('/path/to/elsewhere/file', client.getGrammarScopes()[0] + '-dummy');
            chai_1.expect(client.shouldSyncForEditor(editor, '/path/to/somewhere')).equals(false);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0by1sYW5ndWFnZWNsaWVudC50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vdGVzdC9hdXRvLWxhbmd1YWdlY2xpZW50LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxvRUFBNEQ7QUFDNUQsK0JBQThCO0FBRTlCLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7SUFDbEMsUUFBUSxDQUFDLHFCQUFxQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxNQUFNLHdCQUF5QixTQUFRLDZCQUFrQjtZQUNoRCxnQkFBZ0I7Z0JBQ3JCLE9BQU8sQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDNUIsQ0FBQztTQUNGO1FBRUQsTUFBTSxNQUFNLEdBQUcsSUFBSSx3QkFBd0IsRUFBRSxDQUFDO1FBRTlDLFNBQVMsVUFBVSxDQUFDLEdBQVcsRUFBRSxTQUFpQjtZQUNoRCxPQUFPO2dCQUNMLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHO2dCQUNsQixVQUFVLEVBQUUsR0FBRyxFQUFFO29CQUNmLE9BQU8sRUFBQyxTQUFTLEVBQUMsQ0FBQztnQkFDckIsQ0FBQzthQUNGLENBQUM7UUFDSixDQUFDO1FBRUQsRUFBRSxDQUFDLHdEQUF3RCxFQUFFLEdBQUcsRUFBRTtZQUNoRSxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsb0JBQW9CLEVBQUUsTUFBTSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5RSxhQUFNLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hGLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDhDQUE4QyxFQUFFLEdBQUcsRUFBRTtZQUN0RCxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMseUJBQXlCLEVBQUUsTUFBTSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuRixhQUFNLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pGLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG1EQUFtRCxFQUFFLEdBQUcsRUFBRTtZQUMzRCxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsb0JBQW9CLEVBQUUsTUFBTSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUM7WUFDekYsYUFBTSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLEVBQUUsb0JBQW9CLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNqRixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxzRUFBc0UsRUFBRSxHQUFHLEVBQUU7WUFDOUUsTUFBTSxNQUFNLEdBQUcsVUFBVSxDQUFDLHlCQUF5QixFQUFFLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDO1lBQzlGLGFBQU0sQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDakYsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEF1dG9MYW5ndWFnZUNsaWVudCBmcm9tICcuLi9saWIvYXV0by1sYW5ndWFnZWNsaWVudCc7XHJcbmltcG9ydCB7IGV4cGVjdCB9IGZyb20gJ2NoYWknO1xyXG5cclxuZGVzY3JpYmUoJ0F1dG9MYW5ndWFnZUNsaWVudCcsICgpID0+IHtcclxuICBkZXNjcmliZSgnc2hvdWxkU3luY0ZvckVkaXRvcicsICgpID0+IHtcclxuICAgIGNsYXNzIEN1c3RvbUF1dG9MYW5ndWFnZUNsaWVudCBleHRlbmRzIEF1dG9MYW5ndWFnZUNsaWVudCB7XHJcbiAgICAgIHB1YmxpYyBnZXRHcmFtbWFyU2NvcGVzKCkge1xyXG4gICAgICAgIHJldHVybiBbJ0phdmEnLCAnUHl0aG9uJ107XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjbGllbnQgPSBuZXcgQ3VzdG9tQXV0b0xhbmd1YWdlQ2xpZW50KCk7XHJcblxyXG4gICAgZnVuY3Rpb24gbW9ja0VkaXRvcih1cmk6IHN0cmluZywgc2NvcGVOYW1lOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldFBhdGg6ICgpID0+IHVyaSxcclxuICAgICAgICBnZXRHcmFtbWFyOiAoKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4ge3Njb3BlTmFtZX07XHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBpdCgnc2VsZWN0cyBkb2N1bWVudHMgaW4gcHJvamVjdCBhbmQgaW4gc3VwcG9ydGVkIGxhbmd1YWdlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlZGl0b3IgPSBtb2NrRWRpdG9yKCcvcGF0aC90by9zb21ld2hlcmUnLCBjbGllbnQuZ2V0R3JhbW1hclNjb3BlcygpWzBdKTtcclxuICAgICAgZXhwZWN0KGNsaWVudC5zaG91bGRTeW5jRm9yRWRpdG9yKGVkaXRvciwgJy9wYXRoL3RvL3NvbWV3aGVyZScpKS5lcXVhbHModHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZG9lcyBub3Qgc2VsZWN0IGRvY3VtZW50cyBvdXRzaWRlIG9mIHByb2plY3QnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVkaXRvciA9IG1vY2tFZGl0b3IoJy9wYXRoL3RvL2Vsc2V3aGVyZS9maWxlJywgY2xpZW50LmdldEdyYW1tYXJTY29wZXMoKVswXSk7XHJcbiAgICAgIGV4cGVjdChjbGllbnQuc2hvdWxkU3luY0ZvckVkaXRvcihlZGl0b3IsICcvcGF0aC90by9zb21ld2hlcmUnKSkuZXF1YWxzKGZhbHNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkb2VzIG5vdCBzZWxlY3QgZG9jdW1lbnRzIGluIHVuc3VwcG9ydGVkIGxhbmd1YWdlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlZGl0b3IgPSBtb2NrRWRpdG9yKCcvcGF0aC90by9zb21ld2hlcmUnLCBjbGllbnQuZ2V0R3JhbW1hclNjb3BlcygpWzBdICsgJy1kdW1teScpO1xyXG4gICAgICBleHBlY3QoY2xpZW50LnNob3VsZFN5bmNGb3JFZGl0b3IoZWRpdG9yLCAnL3BhdGgvdG8vc29tZXdoZXJlJykpLmVxdWFscyhmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZG9lcyBub3Qgc2VsZWN0IGRvY3VtZW50cyBpbiB1bnN1cHBvcnRlZCBsYW5ndWFnZSBvdXRzaWRlIG9mIHByb2plY3QnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVkaXRvciA9IG1vY2tFZGl0b3IoJy9wYXRoL3RvL2Vsc2V3aGVyZS9maWxlJywgY2xpZW50LmdldEdyYW1tYXJTY29wZXMoKVswXSArICctZHVtbXknKTtcclxuICAgICAgZXhwZWN0KGNsaWVudC5zaG91bGRTeW5jRm9yRWRpdG9yKGVkaXRvciwgJy9wYXRoL3RvL3NvbWV3aGVyZScpKS5lcXVhbHMoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXX0=