var _languageclient = require('../lib/languageclient');

var ls = _interopRequireWildcard(_languageclient);

var _logger = require('../lib/logger');

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _chai = require('chai');

var _helpers = require('./helpers.js');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

describe('LanguageClientConnection', () => {
  beforeEach(() => {
    global.sinon = _sinon2.default.sandbox.create();
  });
  afterEach(() => {
    global.sinon.restore();
  });

  it('listens to the RPC connection it is given', () => {
    const rpc = (0, _helpers.createSpyConnection)();

    new ls.LanguageClientConnection(rpc, new _logger.NullLogger());
    (0, _chai.expect)(rpc.listen.called).equals(true);
  });

  it('disposes of the connection when it is disposed', () => {
    const rpc = (0, _helpers.createSpyConnection)();
    const lc = new ls.LanguageClientConnection(rpc, new _logger.NullLogger());
    (0, _chai.expect)(rpc.dispose.called).equals(false);
    lc.dispose();
    (0, _chai.expect)(rpc.dispose.called).equals(true);
  });

  describe('send requests', () => {
    const textDocumentPositionParams = {
      textDocument: { uri: 'file:///1/z80.asm' },
      position: { line: 24, character: 32 }
    };
    let lc;

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.spy(lc, '_sendRequest');
    });

    it('sends a request for initialize', _asyncToGenerator(function* () {
      const params = { capabilities: {} };
      yield lc.initialize(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('initialize');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for shutdown', _asyncToGenerator(function* () {
      yield lc.shutdown();

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('shutdown');
    }));

    it('sends a request for completion', _asyncToGenerator(function* () {
      yield lc.completion(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/completion');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for completionItemResolve', _asyncToGenerator(function* () {
      const completionItem = { label: 'abc' };
      yield lc.completionItemResolve(completionItem);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('completionItem/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(completionItem);
    }));

    it('sends a request for hover', _asyncToGenerator(function* () {
      yield lc.hover(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/hover');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for signatureHelp', _asyncToGenerator(function* () {
      yield lc.signatureHelp(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/signatureHelp');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for gotoDefinition', _asyncToGenerator(function* () {
      yield lc.gotoDefinition(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/definition');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for findReferences', _asyncToGenerator(function* () {
      yield lc.findReferences(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/references');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for documentHighlight', _asyncToGenerator(function* () {
      yield lc.documentHighlight(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentHighlight');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for documentSymbol', _asyncToGenerator(function* () {
      yield lc.documentSymbol(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentSymbol');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for workspaceSymbol', _asyncToGenerator(function* () {
      const params = { query: 'something' };
      yield lc.workspaceSymbol(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('workspace/symbol');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for codeAction', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        },
        context: { diagnostics: [] }
      };
      yield lc.codeAction(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/codeAction');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for codeLens', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument
      };
      yield lc.codeLens(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/codeLens');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for codeLensResolve', _asyncToGenerator(function* () {
      const params = {
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        }
      };
      yield lc.codeLensResolve(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('codeLens/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentLink', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument
      };
      yield lc.documentLink(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentLink');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentLinkResolve', _asyncToGenerator(function* () {
      const params = {
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        },
        target: 'abc.def.ghi'
      };
      yield lc.documentLinkResolve(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('documentLink/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentFormatting', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      yield lc.documentFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/formatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentRangeFormatting', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        },
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      yield lc.documentRangeFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/rangeFormatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentOnTypeFormatting', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        position: { line: 1, character: 1 },
        ch: '}',
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      yield lc.documentOnTypeFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/onTypeFormatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for rename', _asyncToGenerator(function* () {
      const params = {
        textDocument: { uri: 'file:///a/b.txt' },
        position: { line: 1, character: 2 },
        newName: 'abstractConstructorFactory'
      };
      yield lc.rename(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/rename');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));
  });

  describe('send notifications', () => {
    const textDocumentItem = {
      uri: 'file:///best/bits.js',
      languageId: 'javascript',
      text: 'function a() { return "b"; };',
      version: 1
    };
    const versionedTextDocumentIdentifier = {
      uri: 'file:///best/bits.js',
      languageId: 'javascript',
      text: 'function a() { return "b"; };',
      version: 1
    };

    let lc;

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.stub(lc, '_sendNotification');
    });

    it('exit sends notification', () => {
      lc.exit();

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('exit');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args.length).equals(1);
    });

    it('didChangeConfiguration sends notification', () => {
      const params = {
        settings: { a: { b: 'c' } }
      };
      lc.didChangeConfiguration(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('workspace/didChangeConfiguration');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didOpenTextDocument sends notification', () => {
      const params = {
        textDocument: textDocumentItem
      };
      lc.didOpenTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didOpen');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didChangeTextDocument sends notification', () => {
      const params = {
        textDocument: versionedTextDocumentIdentifier,
        contentChanges: []
      };
      lc.didChangeTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didChange');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didCloseTextDocument sends notification', () => {
      const params = {
        textDocument: textDocumentItem
      };
      lc.didCloseTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didClose');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didSaveTextDocument sends notification', () => {
      const params = {
        textDocument: textDocumentItem
      };
      lc.didSaveTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didSave');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didChangeWatchedFiles sends notification', () => {
      const params = { changes: [] };
      lc.didChangeWatchedFiles(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('workspace/didChangeWatchedFiles');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });
  });

  describe('notification methods', () => {
    let lc;
    const eventMap = {};

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.stub(lc, '_onNotification').callsFake((message, callback) => {
        eventMap[message.method] = callback;
      });
    });

    it('onShowMessage calls back on window/showMessage', () => {
      let called = false;
      lc.onShowMessage(() => {
        called = true;
      });
      eventMap['window/showMessage']();
      (0, _chai.expect)(called).equals(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3QvbGFuZ3VhZ2VjbGllbnQudGVzdC5qcyJdLCJuYW1lcyI6WyJscyIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImdsb2JhbCIsInNpbm9uIiwic2FuZGJveCIsImNyZWF0ZSIsImFmdGVyRWFjaCIsInJlc3RvcmUiLCJpdCIsInJwYyIsIkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbiIsImxpc3RlbiIsImNhbGxlZCIsImVxdWFscyIsImxjIiwiZGlzcG9zZSIsInRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zIiwidGV4dERvY3VtZW50IiwidXJpIiwicG9zaXRpb24iLCJsaW5lIiwiY2hhcmFjdGVyIiwic3B5IiwicGFyYW1zIiwiY2FwYWJpbGl0aWVzIiwiaW5pdGlhbGl6ZSIsIl9zZW5kUmVxdWVzdCIsImdldENhbGwiLCJhcmdzIiwic2h1dGRvd24iLCJjb21wbGV0aW9uIiwiY29tcGxldGlvbkl0ZW0iLCJsYWJlbCIsImNvbXBsZXRpb25JdGVtUmVzb2x2ZSIsImhvdmVyIiwic2lnbmF0dXJlSGVscCIsImdvdG9EZWZpbml0aW9uIiwiZmluZFJlZmVyZW5jZXMiLCJkb2N1bWVudEhpZ2hsaWdodCIsImRvY3VtZW50U3ltYm9sIiwicXVlcnkiLCJ3b3Jrc3BhY2VTeW1ib2wiLCJyYW5nZSIsInN0YXJ0IiwiZW5kIiwiY29udGV4dCIsImRpYWdub3N0aWNzIiwiY29kZUFjdGlvbiIsImNvZGVMZW5zIiwiY29kZUxlbnNSZXNvbHZlIiwiZG9jdW1lbnRMaW5rIiwidGFyZ2V0IiwiZG9jdW1lbnRMaW5rUmVzb2x2ZSIsIm9wdGlvbnMiLCJ0YWJTaXplIiwiaW5zZXJ0U3BhY2VzIiwic29tZVZhbHVlIiwiZG9jdW1lbnRGb3JtYXR0aW5nIiwiZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmciLCJjaCIsImRvY3VtZW50T25UeXBlRm9ybWF0dGluZyIsIm5ld05hbWUiLCJyZW5hbWUiLCJ0ZXh0RG9jdW1lbnRJdGVtIiwibGFuZ3VhZ2VJZCIsInRleHQiLCJ2ZXJzaW9uIiwidmVyc2lvbmVkVGV4dERvY3VtZW50SWRlbnRpZmllciIsInN0dWIiLCJleGl0IiwiX3NlbmROb3RpZmljYXRpb24iLCJsZW5ndGgiLCJzZXR0aW5ncyIsImEiLCJiIiwiZGlkQ2hhbmdlQ29uZmlndXJhdGlvbiIsImRpZE9wZW5UZXh0RG9jdW1lbnQiLCJjb250ZW50Q2hhbmdlcyIsImRpZENoYW5nZVRleHREb2N1bWVudCIsImRpZENsb3NlVGV4dERvY3VtZW50IiwiZGlkU2F2ZVRleHREb2N1bWVudCIsImNoYW5nZXMiLCJkaWRDaGFuZ2VXYXRjaGVkRmlsZXMiLCJldmVudE1hcCIsImNhbGxzRmFrZSIsIm1lc3NhZ2UiLCJjYWxsYmFjayIsIm1ldGhvZCIsIm9uU2hvd01lc3NhZ2UiXSwibWFwcGluZ3MiOiJBQUVBOztJQUFZQSxFOztBQUNaOztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUFDLFNBQVMsMEJBQVQsRUFBcUMsTUFBTTtBQUN6Q0MsYUFBVyxNQUFNO0FBQ2ZDLFdBQU9DLEtBQVAsR0FBZSxnQkFBTUMsT0FBTixDQUFjQyxNQUFkLEVBQWY7QUFDRCxHQUZEO0FBR0FDLFlBQVUsTUFBTTtBQUNkSixXQUFPQyxLQUFQLENBQWFJLE9BQWI7QUFDRCxHQUZEOztBQUlBQyxLQUFHLDJDQUFILEVBQWdELE1BQU07QUFDcEQsVUFBTUMsTUFBTSxtQ0FBWjs7QUFFQSxRQUFJVixHQUFHVyx3QkFBUCxDQUFnQ0QsR0FBaEMsRUFBcUMsd0JBQXJDO0FBQ0Esc0JBQU9BLElBQUlFLE1BQUosQ0FBV0MsTUFBbEIsRUFBMEJDLE1BQTFCLENBQWlDLElBQWpDO0FBQ0QsR0FMRDs7QUFPQUwsS0FBRyxnREFBSCxFQUFxRCxNQUFNO0FBQ3pELFVBQU1DLE1BQU0sbUNBQVo7QUFDQSxVQUFNSyxLQUFLLElBQUlmLEdBQUdXLHdCQUFQLENBQWdDRCxHQUFoQyxFQUFxQyx3QkFBckMsQ0FBWDtBQUNBLHNCQUFPQSxJQUFJTSxPQUFKLENBQVlILE1BQW5CLEVBQTJCQyxNQUEz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QU9DLEdBQUd3RCxpQkFBSCxDQUFxQjNDLE9BQXJCLENBQTZCLENBQTdCLEVBQWdDQyxJQUFoQyxDQUFxQyxDQUFyQyxDQUFQLEVBQWdEZixNQUFoRCxDQUF1RCxpQ0FBdkQ7QUFDQSx3QkFBT0MsR0FBR3dELGlCQUFILENBQXFCM0MsT0FBckIsQ0FBNkIsQ0FBN0IsRUFBZ0NDLElBQWhDLENBQXFDLENBQXJDLENBQVAsRUFBZ0RmLE1BQWhELENBQXVEVSxNQUF2RDtBQUNELEtBUEQ7QUFRRCxHQTdGRDs7QUErRkF2QixXQUFTLHNCQUFULEVBQWlDLE1BQU07QUFDckMsUUFBSWMsRUFBSjtBQUNBLFVBQU1xRSxXQUFXLEVBQWpCOztBQUVBbEYsZUFBVyxNQUFNO0FBQ2ZhLFdBQUssSUFBSWYsR0FBR1csd0JBQVAsQ0FBZ0MsbUNBQWhDLEVBQXVELHdCQUF2RCxDQUFMO0FBQ0Esc0JBQU0wRCxJQUFOLENBQVd0RCxFQUFYLEVBQWUsaUJBQWYsRUFBa0NzRSxTQUFsQyxDQUE0QyxDQUFDQyxPQUFELEVBQVVDLFFBQVYsS0FBdUI7QUFDakVILGlCQUFTRSxRQUFRRSxNQUFqQixJQUEyQkQsUUFBM0I7QUFDRCxPQUZEO0FBR0QsS0FMRDs7QUFPQTlFLE9BQUcsZ0RBQUgsRUFBcUQsTUFBTTtBQUN6RCxVQUFJSSxTQUFTLEtBQWI7QUFDQUUsU0FBRzBFLGFBQUgsQ0FBaUIsTUFBTTtBQUNyQjVFLGlCQUFTLElBQVQ7QUFDRCxPQUZEO0FBR0F1RSxlQUFTLG9CQUFUO0FBQ0Esd0JBQU92RSxNQUFQLEVBQWVDLE1BQWYsQ0FBc0IsSUFBdEI7QUFDRCxLQVBEO0FBUUQsR0FuQkQ7QUFvQkQsQ0EzV0QiLCJmaWxlIjoibGFuZ3VhZ2VjbGllbnQudGVzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XHJcblxyXG5pbXBvcnQgKiBhcyBscyBmcm9tICcuLi9saWIvbGFuZ3VhZ2VjbGllbnQnO1xyXG5pbXBvcnQge051bGxMb2dnZXJ9IGZyb20gJy4uL2xpYi9sb2dnZXInO1xyXG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xyXG5pbXBvcnQge2V4cGVjdH0gZnJvbSAnY2hhaSc7XHJcbmltcG9ydCB7Y3JlYXRlU3B5Q29ubmVjdGlvbn0gZnJvbSAnLi9oZWxwZXJzLmpzJztcclxuXHJcbmRlc2NyaWJlKCdMYW5ndWFnZUNsaWVudENvbm5lY3Rpb24nLCAoKSA9PiB7XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBnbG9iYWwuc2lub24gPSBzaW5vbi5zYW5kYm94LmNyZWF0ZSgpO1xyXG4gIH0pO1xyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBnbG9iYWwuc2lub24ucmVzdG9yZSgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnbGlzdGVucyB0byB0aGUgUlBDIGNvbm5lY3Rpb24gaXQgaXMgZ2l2ZW4nLCAoKSA9PiB7XHJcbiAgICBjb25zdCBycGMgPSBjcmVhdGVTcHlDb25uZWN0aW9uKCk7XHJcblxyXG4gICAgbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihycGMsIG5ldyBOdWxsTG9nZ2VyKCkpO1xyXG4gICAgZXhwZWN0KHJwYy5saXN0ZW4uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdkaXNwb3NlcyBvZiB0aGUgY29ubmVjdGlvbiB3aGVuIGl0IGlzIGRpc3Bvc2VkJywgKCkgPT4ge1xyXG4gICAgY29uc3QgcnBjID0gY3JlYXRlU3B5Q29ubmVjdGlvbigpO1xyXG4gICAgY29uc3QgbGMgPSBuZXcgbHMuTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uKHJwYywgbmV3IE51bGxMb2dnZXIoKSk7XHJcbiAgICBleHBlY3QocnBjLmRpc3Bvc2UuY2FsbGVkKS5lcXVhbHMoZmFsc2UpO1xyXG4gICAgbGMuZGlzcG9zZSgpO1xyXG4gICAgZXhwZWN0KHJwYy5kaXNwb3NlLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2VuZCByZXF1ZXN0cycsICgpID0+IHtcclxuICAgIGNvbnN0IHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zOiBscy5UZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyA9IHtcclxuICAgICAgdGV4dERvY3VtZW50OiB7dXJpOiAnZmlsZTovLy8xL3o4MC5hc20nfSxcclxuICAgICAgcG9zaXRpb246IHtsaW5lOiAyNCwgY2hhcmFjdGVyOiAzMn0sXHJcbiAgICB9O1xyXG4gICAgbGV0IGxjO1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBsYyA9IG5ldyBscy5MYW5ndWFnZUNsaWVudENvbm5lY3Rpb24oY3JlYXRlU3B5Q29ubmVjdGlvbigpLCBuZXcgTnVsbExvZ2dlcigpKTtcclxuICAgICAgc2lub24uc3B5KGxjLCAnX3NlbmRSZXF1ZXN0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBpbml0aWFsaXplJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkluaXRpYWxpemVQYXJhbXMgPSB7Y2FwYWJpbGl0aWVzOiB7fX07XHJcbiAgICAgIGF3YWl0IGxjLmluaXRpYWxpemUocGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ2luaXRpYWxpemUnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3Igc2h1dGRvd24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGxjLnNodXRkb3duKCk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCdzaHV0ZG93bicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgY29tcGxldGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbGMuY29tcGxldGlvbih0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvY29tcGxldGlvbicpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGNvbXBsZXRpb25JdGVtUmVzb2x2ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY29tcGxldGlvbkl0ZW06IGxzLkNvbXBsZXRpb25JdGVtID0ge2xhYmVsOiAnYWJjJ307XHJcbiAgICAgIGF3YWl0IGxjLmNvbXBsZXRpb25JdGVtUmVzb2x2ZShjb21wbGV0aW9uSXRlbSk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCdjb21wbGV0aW9uSXRlbS9yZXNvbHZlJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMoY29tcGxldGlvbkl0ZW0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgaG92ZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGxjLmhvdmVyKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9ob3ZlcicpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIHNpZ25hdHVyZUhlbHAnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGxjLnNpZ25hdHVyZUhlbHAodGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L3NpZ25hdHVyZUhlbHAnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBnb3RvRGVmaW5pdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbGMuZ290b0RlZmluaXRpb24odGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RlZmluaXRpb24nKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBmaW5kUmVmZXJlbmNlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbGMuZmluZFJlZmVyZW5jZXModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L3JlZmVyZW5jZXMnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBkb2N1bWVudEhpZ2hsaWdodCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbGMuZG9jdW1lbnRIaWdobGlnaHQodGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RvY3VtZW50SGlnaGxpZ2h0Jyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgZG9jdW1lbnRTeW1ib2wnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGxjLmRvY3VtZW50U3ltYm9sKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9kb2N1bWVudFN5bWJvbCcpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIHdvcmtzcGFjZVN5bWJvbCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5Xb3Jrc3BhY2VTeW1ib2xQYXJhbXMgPSB7cXVlcnk6ICdzb21ldGhpbmcnfTtcclxuICAgICAgYXdhaXQgbGMud29ya3NwYWNlU3ltYm9sKHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd3b3Jrc3BhY2Uvc3ltYm9sJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGNvZGVBY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuQ29kZUFjdGlvblBhcmFtcyA9IHtcclxuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zLnRleHREb2N1bWVudCxcclxuICAgICAgICByYW5nZToge1xyXG4gICAgICAgICAgc3RhcnQ6IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDF9LFxyXG4gICAgICAgICAgZW5kOiB7bGluZTogMjQsIGNoYXJhY3RlcjogMzJ9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udGV4dDoge2RpYWdub3N0aWNzOiBbXX0sXHJcbiAgICAgIH07XHJcbiAgICAgIGF3YWl0IGxjLmNvZGVBY3Rpb24ocGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9jb2RlQWN0aW9uJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGNvZGVMZW5zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkNvZGVMZW5zUGFyYW1zID0ge1xyXG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxyXG4gICAgICB9O1xyXG4gICAgICBhd2FpdCBsYy5jb2RlTGVucyhwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2NvZGVMZW5zJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGNvZGVMZW5zUmVzb2x2ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5Db2RlTGVucyA9IHtcclxuICAgICAgICByYW5nZToge1xyXG4gICAgICAgICAgc3RhcnQ6IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDF9LFxyXG4gICAgICAgICAgZW5kOiB7bGluZTogMjQsIGNoYXJhY3RlcjogMzJ9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICAgIGF3YWl0IGxjLmNvZGVMZW5zUmVzb2x2ZShwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnY29kZUxlbnMvcmVzb2x2ZScpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBkb2N1bWVudExpbmsnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRG9jdW1lbnRMaW5rUGFyYW1zID0ge1xyXG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxyXG4gICAgICB9O1xyXG4gICAgICBhd2FpdCBsYy5kb2N1bWVudExpbmsocGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9kb2N1bWVudExpbmsnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgZG9jdW1lbnRMaW5rUmVzb2x2ZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5Eb2N1bWVudExpbmsgPSB7XHJcbiAgICAgICAgcmFuZ2U6IHtcclxuICAgICAgICAgIHN0YXJ0OiB7bGluZTogMSwgY2hhcmFjdGVyOiAxfSxcclxuICAgICAgICAgIGVuZDoge2xpbmU6IDI0LCBjaGFyYWN0ZXI6IDMyfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRhcmdldDogJ2FiYy5kZWYuZ2hpJyxcclxuICAgICAgfTtcclxuICAgICAgYXdhaXQgbGMuZG9jdW1lbnRMaW5rUmVzb2x2ZShwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnZG9jdW1lbnRMaW5rL3Jlc29sdmUnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgZG9jdW1lbnRGb3JtYXR0aW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRvY3VtZW50Rm9ybWF0dGluZ1BhcmFtcyA9IHtcclxuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zLnRleHREb2N1bWVudCxcclxuICAgICAgICBvcHRpb25zOiB7dGFiU2l6ZTogNiwgaW5zZXJ0U3BhY2VzOiB0cnVlLCBzb21lVmFsdWU6ICdvcHRpb25hbCd9LFxyXG4gICAgICB9O1xyXG4gICAgICBhd2FpdCBsYy5kb2N1bWVudEZvcm1hdHRpbmcocGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9mb3JtYXR0aW5nJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nUGFyYW1zID0ge1xyXG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxyXG4gICAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgICBzdGFydDoge2xpbmU6IDEsIGNoYXJhY3RlcjogMX0sXHJcbiAgICAgICAgICBlbmQ6IHtsaW5lOiAyNCwgY2hhcmFjdGVyOiAzMn0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcHRpb25zOiB7dGFiU2l6ZTogNiwgaW5zZXJ0U3BhY2VzOiB0cnVlLCBzb21lVmFsdWU6ICdvcHRpb25hbCd9LFxyXG4gICAgICB9O1xyXG4gICAgICBhd2FpdCBsYy5kb2N1bWVudFJhbmdlRm9ybWF0dGluZyhwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L3JhbmdlRm9ybWF0dGluZycpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBkb2N1bWVudE9uVHlwZUZvcm1hdHRpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRG9jdW1lbnRPblR5cGVGb3JtYXR0aW5nUGFyYW1zID0ge1xyXG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxyXG4gICAgICAgIHBvc2l0aW9uOiB7bGluZTogMSwgY2hhcmFjdGVyOiAxfSxcclxuICAgICAgICBjaDogJ30nLFxyXG4gICAgICAgIG9wdGlvbnM6IHt0YWJTaXplOiA2LCBpbnNlcnRTcGFjZXM6IHRydWUsIHNvbWVWYWx1ZTogJ29wdGlvbmFsJ30sXHJcbiAgICAgIH07XHJcbiAgICAgIGF3YWl0IGxjLmRvY3VtZW50T25UeXBlRm9ybWF0dGluZyhwYXJhbXMpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L29uVHlwZUZvcm1hdHRpbmcnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgcmVuYW1lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLlJlbmFtZVBhcmFtcyA9IHtcclxuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHt1cmk6ICdmaWxlOi8vL2EvYi50eHQnfSxcclxuICAgICAgICBwb3NpdGlvbjoge2xpbmU6IDEsIGNoYXJhY3RlcjogMn0sXHJcbiAgICAgICAgbmV3TmFtZTogJ2Fic3RyYWN0Q29uc3RydWN0b3JGYWN0b3J5JyxcclxuICAgICAgfTtcclxuICAgICAgYXdhaXQgbGMucmVuYW1lKHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvcmVuYW1lJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnc2VuZCBub3RpZmljYXRpb25zJywgKCkgPT4ge1xyXG4gICAgY29uc3QgdGV4dERvY3VtZW50SXRlbTogbHMuVGV4dERvY3VtZW50SXRlbSA9IHtcclxuICAgICAgdXJpOiAnZmlsZTovLy9iZXN0L2JpdHMuanMnLFxyXG4gICAgICBsYW5ndWFnZUlkOiAnamF2YXNjcmlwdCcsXHJcbiAgICAgIHRleHQ6ICdmdW5jdGlvbiBhKCkgeyByZXR1cm4gXCJiXCI7IH07JyxcclxuICAgICAgdmVyc2lvbjogMSxcclxuICAgIH07XHJcbiAgICBjb25zdCB2ZXJzaW9uZWRUZXh0RG9jdW1lbnRJZGVudGlmaWVyOiBscy5WZXJzaW9uZWRUZXh0RG9jdW1lbnRJZGVudGlmaWVyID0ge1xyXG4gICAgICB1cmk6ICdmaWxlOi8vL2Jlc3QvYml0cy5qcycsXHJcbiAgICAgIGxhbmd1YWdlSWQ6ICdqYXZhc2NyaXB0JyxcclxuICAgICAgdGV4dDogJ2Z1bmN0aW9uIGEoKSB7IHJldHVybiBcImJcIjsgfTsnLFxyXG4gICAgICB2ZXJzaW9uOiAxLFxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgbGM7XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIGxjID0gbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihjcmVhdGVTcHlDb25uZWN0aW9uKCksIG5ldyBOdWxsTG9nZ2VyKCkpO1xyXG4gICAgICBzaW5vbi5zdHViKGxjLCAnX3NlbmROb3RpZmljYXRpb24nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdleGl0IHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcclxuICAgICAgbGMuZXhpdCgpO1xyXG5cclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ2V4aXQnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJncy5sZW5ndGgpLmVxdWFscygxKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkaWRDaGFuZ2VDb25maWd1cmF0aW9uIHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5EaWRDaGFuZ2VDb25maWd1cmF0aW9uUGFyYW1zID0ge1xyXG4gICAgICAgIHNldHRpbmdzOiB7YToge2I6ICdjJ319LFxyXG4gICAgICB9O1xyXG4gICAgICBsYy5kaWRDaGFuZ2VDb25maWd1cmF0aW9uKHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnd29ya3NwYWNlL2RpZENoYW5nZUNvbmZpZ3VyYXRpb24nKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGlkT3BlblRleHREb2N1bWVudCBzZW5kcyBub3RpZmljYXRpb24nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRGlkT3BlblRleHREb2N1bWVudFBhcmFtcyA9IHtcclxuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudEl0ZW0sXHJcbiAgICAgIH07XHJcbiAgICAgIGxjLmRpZE9wZW5UZXh0RG9jdW1lbnQocGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvZGlkT3BlbicpO1xyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdkaWRDaGFuZ2VUZXh0RG9jdW1lbnQgc2VuZHMgbm90aWZpY2F0aW9uJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRpZENoYW5nZVRleHREb2N1bWVudFBhcmFtcyA9IHtcclxuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIsXHJcbiAgICAgICAgY29udGVudENoYW5nZXM6IFtdLFxyXG4gICAgICB9O1xyXG4gICAgICBsYy5kaWRDaGFuZ2VUZXh0RG9jdW1lbnQocGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvZGlkQ2hhbmdlJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RpZENsb3NlVGV4dERvY3VtZW50IHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5EaWRDbG9zZVRleHREb2N1bWVudFBhcmFtcyA9IHtcclxuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudEl0ZW0sXHJcbiAgICAgIH07XHJcbiAgICAgIGxjLmRpZENsb3NlVGV4dERvY3VtZW50KHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RpZENsb3NlJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2RpZFNhdmVUZXh0RG9jdW1lbnQgc2VuZHMgbm90aWZpY2F0aW9uJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRpZFNhdmVUZXh0RG9jdW1lbnRQYXJhbXMgPSB7XHJcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRJdGVtLFxyXG4gICAgICB9O1xyXG4gICAgICBsYy5kaWRTYXZlVGV4dERvY3VtZW50KHBhcmFtcyk7XHJcblxyXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RpZFNhdmUnKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnZGlkQ2hhbmdlV2F0Y2hlZEZpbGVzIHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgcGFyYW1zOiBscy5EaWRDaGFuZ2VXYXRjaGVkRmlsZXNQYXJhbXMgPSB7Y2hhbmdlczogW119O1xyXG4gICAgICBsYy5kaWRDaGFuZ2VXYXRjaGVkRmlsZXMocGFyYW1zKTtcclxuXHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcclxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd3b3Jrc3BhY2UvZGlkQ2hhbmdlV2F0Y2hlZEZpbGVzJyk7XHJcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdub3RpZmljYXRpb24gbWV0aG9kcycsICgpID0+IHtcclxuICAgIGxldCBsYztcclxuICAgIGNvbnN0IGV2ZW50TWFwID0ge307XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIGxjID0gbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihjcmVhdGVTcHlDb25uZWN0aW9uKCksIG5ldyBOdWxsTG9nZ2VyKCkpO1xyXG4gICAgICBzaW5vbi5zdHViKGxjLCAnX29uTm90aWZpY2F0aW9uJykuY2FsbHNGYWtlKChtZXNzYWdlLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICAgIGV2ZW50TWFwW21lc3NhZ2UubWV0aG9kXSA9IGNhbGxiYWNrO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdvblNob3dNZXNzYWdlIGNhbGxzIGJhY2sgb24gd2luZG93L3Nob3dNZXNzYWdlJywgKCkgPT4ge1xyXG4gICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XHJcbiAgICAgIGxjLm9uU2hvd01lc3NhZ2UoKCkgPT4ge1xyXG4gICAgICAgIGNhbGxlZCA9IHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgICBldmVudE1hcFsnd2luZG93L3Nob3dNZXNzYWdlJ10oKTtcclxuICAgICAgZXhwZWN0KGNhbGxlZCkuZXF1YWxzKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXX0=