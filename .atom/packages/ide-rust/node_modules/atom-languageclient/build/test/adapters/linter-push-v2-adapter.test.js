var _linterPushV2Adapter = require('../../lib/adapters/linter-push-v2-adapter');

var _linterPushV2Adapter2 = _interopRequireDefault(_linterPushV2Adapter);

var _languageclient = require('../../lib/languageclient');

var ls = _interopRequireWildcard(_languageclient);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _chai = require('chai');

var _convert = require('../../lib/convert');

var _convert2 = _interopRequireDefault(_convert);

var _atom = require('atom');

var _helpers = require('../helpers.js');

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

describe('LinterPushV2Adapter', () => {
  beforeEach(() => {
    global.sinon = _sinon2.default.sandbox.create();
  });
  afterEach(() => {
    global.sinon.restore();
  });

  const flatMap = (source, lambda) => Array.prototype.concat.apply([], source.map(lambda));
  const defaultLanguageClient = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)());
  const compareLinter = (a, b) => {
    if (a == null) {
      return 1;
    }
    if (b == null) {
      return -1;
    }
    if ((a.location.file || '') < (b.location.file || '')) {
      return -1;
    }
    if ((a.location.file || '') > (b.location.file || '')) {
      return 1;
    }
    if ((a.location.position.start || 0) < (b.location.position.start || 0)) {
      return -1;
    }
    if ((a.location.position.start || 0) > (b.location.position.start || 0)) {
      return 1;
    }
    return 0;
  };

  describe('constructor', () => {
    it('subscribes to onPublishDiagnostics', () => {
      const languageClient = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)());
      _sinon2.default.spy(languageClient, 'onPublishDiagnostics');
      new _linterPushV2Adapter2.default(languageClient);
      (0, _chai.expect)(languageClient.onPublishDiagnostics.called).equals(true);
    });
  });

  describe('diagnosticToMessage', () => {
    it('converts Diagnostic and path to a linter$Message', () => {
      const filePath = '/a/b/c/d';
      const diagnostic = {
        message: 'This is a message',
        range: { start: { line: 1, character: 2 }, end: { line: 3, character: 4 } },
        source: 'source',
        code: 'code',
        severity: ls.DiagnosticSeverity.Information,
        type: ls.DiagnosticSeverity.Information
      };
      const result = _linterPushV2Adapter2.default.diagnosticToV2Message(filePath, diagnostic);
      (0, _chai.expect)(result.excerpt).equals(diagnostic.message);
      (0, _chai.expect)(result.linterName).equals(diagnostic.source);
      (0, _chai.expect)(result.location.file).equals(filePath);
      (0, _chai.expect)(result.location.position).deep.equals(new _atom.Range(new _atom.Point(1, 2), new _atom.Point(3, 4)));
      (0, _chai.expect)(result.severity).equals('info');
    });
  });

  describe('diagnosticSeverityToSeverity', () => {
    it('converts DiagnosticSeverity.Error to "error"', () => {
      const severity = _linterPushV2Adapter2.default.diagnosticSeverityToSeverity(ls.DiagnosticSeverity.Error);
      (0, _chai.expect)(severity).equals('error');
    });

    it('converts DiagnosticSeverity.Warning to "warning"', () => {
      const severity = _linterPushV2Adapter2.default.diagnosticSeverityToSeverity(ls.DiagnosticSeverity.Warning);
      (0, _chai.expect)(severity).equals('warning');
    });

    it('converts DiagnosticSeverity.Information to "info"', () => {
      const severity = _linterPushV2Adapter2.default.diagnosticSeverityToSeverity(ls.DiagnosticSeverity.Information);
      (0, _chai.expect)(severity).equals('info');
    });

    it('converts DiagnosticSeverity.Hint to "info"', () => {
      const severity = _linterPushV2Adapter2.default.diagnosticSeverityToSeverity(ls.DiagnosticSeverity.Hint);
      (0, _chai.expect)(severity).equals('info');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Rlc3QvYWRhcHRlcnMvbGludGVyLXB1c2gtdjItYWRhcHRlci50ZXN0LmpzIl0sIm5hbWVzIjpbImxzIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiZ2xvYmFsIiwic2lub24iLCJzYW5kYm94IiwiY3JlYXRlIiwiYWZ0ZXJFYWNoIiwicmVzdG9yZSIsImZsYXRNYXAiLCJzb3VyY2UiLCJsYW1iZGEiLCJBcnJheSIsInByb3RvdHlwZSIsImNvbmNhdCIsImFwcGx5IiwibWFwIiwiZGVmYXVsdExhbmd1YWdlQ2xpZW50IiwiTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uIiwiY29tcGFyZUxpbnRlciIsImEiLCJiIiwibG9jYXRpb24iLCJmaWxlIiwicG9zaXRpb24iLCJzdGFydCIsIml0IiwibGFuZ3VhZ2VDbGllbnQiLCJzcHkiLCJvblB1Ymxpc2hEaWFnbm9zdGljcyIsImNhbGxlZCIsImVxdWFscyIsImZpbGVQYXRoIiwiZGlhZ25vc3RpYyIsIm1lc3NhZ2UiLCJyYW5nZSIsImxpbmUiLCJjaGFyYWN0ZXIiLCJlbmQiLCJjb2RlIiwic2V2ZXJpdHkiLCJEaWFnbm9zdGljU2V2ZXJpdHkiLCJJbmZvcm1hdGlvbiIsInR5cGUiLCJyZXN1bHQiLCJkaWFnbm9zdGljVG9WMk1lc3NhZ2UiLCJleGNlcnB0IiwibGludGVyTmFtZSIsImRlZXAiLCJkaWFnbm9zdGljU2V2ZXJpdHlUb1NldmVyaXR5IiwiRXJyb3IiLCJXYXJuaW5nIiwiSGludCJdLCJtYXBwaW5ncyI6IkFBRUE7Ozs7QUFDQTs7SUFBWUEsRTs7QUFDWjs7OztBQUNBOztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBQyxTQUFTLHFCQUFULEVBQWdDLE1BQU07QUFDcENDLGFBQVcsTUFBTTtBQUFFQyxXQUFPQyxLQUFQLEdBQWUsZ0JBQU1DLE9BQU4sQ0FBY0MsTUFBZCxFQUFmO0FBQXdDLEdBQTNEO0FBQ0FDLFlBQVUsTUFBTTtBQUFFSixXQUFPQyxLQUFQLENBQWFJLE9BQWI7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ZXIudGVzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5cbmltcG9ydCBMaW50ZXJQdXNoVjJBZGFwdGVyIGZyb20gJy4uLy4uL2xpYi9hZGFwdGVycy9saW50ZXItcHVzaC12Mi1hZGFwdGVyJztcbmltcG9ydCAqIGFzIGxzIGZyb20gJy4uLy4uL2xpYi9sYW5ndWFnZWNsaWVudCc7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuaW1wb3J0IHtleHBlY3R9IGZyb20gJ2NoYWknO1xuaW1wb3J0IENvbnZlcnQgZnJvbSAnLi4vLi4vbGliL2NvbnZlcnQnO1xuaW1wb3J0IHtQb2ludCwgUmFuZ2V9IGZyb20gJ2F0b20nO1xuaW1wb3J0IHtjcmVhdGVTcHlDb25uZWN0aW9ufSBmcm9tICcuLi9oZWxwZXJzLmpzJztcblxuZGVzY3JpYmUoJ0xpbnRlclB1c2hWMkFkYXB0ZXInLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4geyBnbG9iYWwuc2lub24gPSBzaW5vbi5zYW5kYm94LmNyZWF0ZSgpOyB9KTtcbiAgYWZ0ZXJFYWNoKCgpID0+IHsgZ2xvYmFsLnNpbm9uLnJlc3RvcmUoKTsgfSk7XG5cbiAgY29uc3QgZmxhdE1hcCA9IChzb3VyY2UsIGxhbWJkYSkgPT4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgc291cmNlLm1hcChsYW1iZGEpKTtcbiAgY29uc3QgZGVmYXVsdExhbmd1YWdlQ2xpZW50ID0gbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihjcmVhdGVTcHlDb25uZWN0aW9uKCkpO1xuICBjb25zdCBjb21wYXJlTGludGVyID0gKGE6IGxpbnRlciRWMk1lc3NhZ2UsIGI6IGxpbnRlciRWMk1lc3NhZ2UpOiBudW1iZXIgPT4ge1xuICAgIGlmIChhID09IG51bGwpIHsgcmV0dXJuIDE7IH1cbiAgICBpZiAoYiA9PSBudWxsKSB7IHJldHVybiAtMTsgfVxuICAgIGlmICgoYS5sb2NhdGlvbi5maWxlIHx8ICcnKSA8IChiLmxvY2F0aW9uLmZpbGUgfHwgJycpKSB7IHJldHVybiAtMTsgfVxuICAgIGlmICgoYS5sb2NhdGlvbi5maWxlIHx8ICcnKSA+IChiLmxvY2F0aW9uLmZpbGUgfHwgJycpKSB7IHJldHVybiAxOyB9XG4gICAgaWYgKChhLmxvY2F0aW9uLnBvc2l0aW9uLnN0YXJ0IHx8IDApIDwgKGIubG9jYXRpb24ucG9zaXRpb24uc3RhcnQgfHwgMCkpIHsgcmV0dXJuIC0xOyB9XG4gICAgaWYgKChhLmxvY2F0aW9uLnBvc2l0aW9uLnN0YXJ0IHx8IDApID4gKGIubG9jYXRpb24ucG9zaXRpb24uc3RhcnQgfHwgMCkpIHsgcmV0dXJuIDE7IH1cbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICBkZXNjcmliZSgnY29uc3RydWN0b3InLCAoKSA9PiB7XG4gICAgaXQoJ3N1YnNjcmliZXMgdG8gb25QdWJsaXNoRGlhZ25vc3RpY3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsYW5ndWFnZUNsaWVudCA9IG5ldyBscy5MYW5ndWFnZUNsaWVudENvbm5lY3Rpb24oY3JlYXRlU3B5Q29ubmVjdGlvbigpKTtcbiAgICAgIHNpbm9uLnNweShsYW5ndWFnZUNsaWVudCwgJ29uUHVibGlzaERpYWdub3N0aWNzJyk7XG4gICAgICBuZXcgTGludGVyUHVzaFYyQWRhcHRlcihsYW5ndWFnZUNsaWVudCk7XG4gICAgICBleHBlY3QobGFuZ3VhZ2VDbGllbnQub25QdWJsaXNoRGlhZ25vc3RpY3MuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkaWFnbm9zdGljVG9NZXNzYWdlJywgKCkgPT4ge1xuICAgIGl0KCdjb252ZXJ0cyBEaWFnbm9zdGljIGFuZCBwYXRoIHRvIGEgbGludGVyJE1lc3NhZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9ICcvYS9iL2MvZCc7XG4gICAgICBjb25zdCBkaWFnbm9zdGljOiBscy5EaWFnbm9zdGljID0ge1xuICAgICAgICBtZXNzYWdlOiAnVGhpcyBpcyBhIG1lc3NhZ2UnLFxuICAgICAgICByYW5nZToge3N0YXJ0OiB7bGluZTogMSwgY2hhcmFjdGVyOiAyfSwgZW5kOiB7bGluZTogMywgY2hhcmFjdGVyOiA0fX0sXG4gICAgICAgIHNvdXJjZTogJ3NvdXJjZScsXG4gICAgICAgIGNvZGU6ICdjb2RlJyxcbiAgICAgICAgc2V2ZXJpdHk6IGxzLkRpYWdub3N0aWNTZXZlcml0eS5JbmZvcm1hdGlvbixcbiAgICAgICAgdHlwZTogbHMuRGlhZ25vc3RpY1NldmVyaXR5LkluZm9ybWF0aW9uLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IExpbnRlclB1c2hWMkFkYXB0ZXIuZGlhZ25vc3RpY1RvVjJNZXNzYWdlKGZpbGVQYXRoLCBkaWFnbm9zdGljKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXhjZXJwdCkuZXF1YWxzKGRpYWdub3N0aWMubWVzc2FnZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmxpbnRlck5hbWUpLmVxdWFscyhkaWFnbm9zdGljLnNvdXJjZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmxvY2F0aW9uLmZpbGUpLmVxdWFscyhmaWxlUGF0aCk7XG4gICAgICBleHBlY3QocmVzdWx0LmxvY2F0aW9uLnBvc2l0aW9uKS5kZWVwLmVxdWFscyhuZXcgUmFuZ2UobmV3IFBvaW50KDEsIDIpLCBuZXcgUG9pbnQoMywgNCkpKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc2V2ZXJpdHkpLmVxdWFscygnaW5mbycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGlhZ25vc3RpY1NldmVyaXR5VG9TZXZlcml0eScsICgpID0+IHtcbiAgICBpdCgnY29udmVydHMgRGlhZ25vc3RpY1NldmVyaXR5LkVycm9yIHRvIFwiZXJyb3JcIicsICgpID0+IHtcbiAgICAgIGNvbnN0IHNldmVyaXR5ID0gTGludGVyUHVzaFYyQWRhcHRlci5kaWFnbm9zdGljU2V2ZXJpdHlUb1NldmVyaXR5KGxzLkRpYWdub3N0aWNTZXZlcml0eS5FcnJvcik7XG4gICAgICBleHBlY3Qoc2V2ZXJpdHkpLmVxdWFscygnZXJyb3InKTtcbiAgICB9KTtcblxuICAgIGl0KCdjb252ZXJ0cyBEaWFnbm9zdGljU2V2ZXJpdHkuV2FybmluZyB0byBcIndhcm5pbmdcIicsICgpID0+IHtcbiAgICAgIGNvbnN0IHNldmVyaXR5ID0gTGludGVyUHVzaFYyQWRhcHRlci5kaWFnbm9zdGljU2V2ZXJpdHlUb1NldmVyaXR5KGxzLkRpYWdub3N0aWNTZXZlcml0eS5XYXJuaW5nKTtcbiAgICAgIGV4cGVjdChzZXZlcml0eSkuZXF1YWxzKCd3YXJuaW5nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnY29udmVydHMgRGlhZ25vc3RpY1NldmVyaXR5LkluZm9ybWF0aW9uIHRvIFwiaW5mb1wiJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2V2ZXJpdHkgPSBMaW50ZXJQdXNoVjJBZGFwdGVyLmRpYWdub3N0aWNTZXZlcml0eVRvU2V2ZXJpdHkobHMuRGlhZ25vc3RpY1NldmVyaXR5LkluZm9ybWF0aW9uKTtcbiAgICAgIGV4cGVjdChzZXZlcml0eSkuZXF1YWxzKCdpbmZvJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnY29udmVydHMgRGlhZ25vc3RpY1NldmVyaXR5LkhpbnQgdG8gXCJpbmZvXCInLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXZlcml0eSA9IExpbnRlclB1c2hWMkFkYXB0ZXIuZGlhZ25vc3RpY1NldmVyaXR5VG9TZXZlcml0eShscy5EaWFnbm9zdGljU2V2ZXJpdHkuSGludCk7XG4gICAgICBleHBlY3Qoc2V2ZXJpdHkpLmVxdWFscygnaW5mbycpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19