var _languageclient = require('../lib/languageclient');

var ls = _interopRequireWildcard(_languageclient);

var _logger = require('../lib/logger');

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _chai = require('chai');

var _helpers = require('./helpers.js');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

describe('LanguageClientConnection', () => {
  beforeEach(() => {
    global.sinon = _sinon2.default.sandbox.create();
  });
  afterEach(() => {
    global.sinon.restore();
  });

  it('listens to the RPC connection it is given', () => {
    const rpc = (0, _helpers.createSpyConnection)();

    new ls.LanguageClientConnection(rpc, new _logger.NullLogger());
    (0, _chai.expect)(rpc.listen.called).equals(true);
  });

  it('disposes of the connection when it is disposed', () => {
    const rpc = (0, _helpers.createSpyConnection)();
    const lc = new ls.LanguageClientConnection(rpc, new _logger.NullLogger());
    (0, _chai.expect)(rpc.dispose.called).equals(false);
    lc.dispose();
    (0, _chai.expect)(rpc.dispose.called).equals(true);
  });

  describe('send requests', () => {
    const textDocumentPositionParams = {
      textDocument: { uri: 'file:///1/z80.asm' },
      position: { line: 24, character: 32 }
    };
    let lc;

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.spy(lc, '_sendRequest');
    });

    it('sends a request for initialize', async () => {
      const params = { capabilities: {} };
      await lc.initialize(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('initialize');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for shutdown', async () => {
      await lc.shutdown();

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('shutdown');
    });

    it('sends a request for completion', async () => {
      await lc.completion(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/completion');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for completionItemResolve', async () => {
      const completionItem = { label: 'abc' };
      await lc.completionItemResolve(completionItem);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('completionItem/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(completionItem);
    });

    it('sends a request for hover', async () => {
      await lc.hover(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/hover');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for signatureHelp', async () => {
      await lc.signatureHelp(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/signatureHelp');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for gotoDefinition', async () => {
      await lc.gotoDefinition(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/definition');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for findReferences', async () => {
      await lc.findReferences(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/references');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for documentHighlight', async () => {
      await lc.documentHighlight(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentHighlight');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for documentSymbol', async () => {
      await lc.documentSymbol(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentSymbol');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    });

    it('sends a request for workspaceSymbol', async () => {
      const params = { query: 'something' };
      await lc.workspaceSymbol(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('workspace/symbol');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for codeAction', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        },
        context: { diagnostics: [] }
      };
      await lc.codeAction(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/codeAction');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for codeLens', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument
      };
      await lc.codeLens(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/codeLens');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for codeLensResolve', async () => {
      const params = {
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        }
      };
      await lc.codeLensResolve(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('codeLens/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentLink', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument
      };
      await lc.documentLink(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentLink');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentLinkResolve', async () => {
      const params = {
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        },
        target: 'abc.def.ghi'
      };
      await lc.documentLinkResolve(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('documentLink/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentFormatting', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      await lc.documentFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/formatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentRangeFormatting', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        range: {
          start: { line: 1, character: 1 },
          end: { line: 24, character: 32 }
        },
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      await lc.documentRangeFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/rangeFormatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for documentOnTypeFormatting', async () => {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        position: { line: 1, character: 1 },
        ch: '}',
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      await lc.documentOnTypeFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/onTypeFormatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });

    it('sends a request for rename', async () => {
      const params = {
        textDocument: { uri: 'file:///a/b.txt' },
        position: { line: 1, character: 2 },
        newName: 'abstractConstructorFactory'
      };
      await lc.rename(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/rename');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    });
  });

  describe('send notifications', () => {
    const textDocumentItem = {
      uri: 'file:///best/bits.js',
      languageId: 'javascript',
      text: 'function a() { return "b"; };',
      version: 1
    };
    const versionedTextDocumentIdentifier = {
      uri: 'file:///best/bits.js',
      languageId: 'javascript',
      text: 'function a() { return "b"; };',
      version: 1
    };

    let lc;

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.stub(lc, '_sendNotification');
    });

    it('exit sends notification', () => {
      lc.exit();

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('exit');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args.length).equals(1);
    });

    it('initialized sends notification', () => {
      lc.initialized();

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('initialized');
      const expected = {};
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).to.deep.equal(expected);
    });

    it('didChangeConfiguration sends notification', () => {
      const params = {
        settings: { a: { b: 'c' } }
      };
      lc.didChangeConfiguration(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('workspace/didChangeConfiguration');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didOpenTextDocument sends notification', () => {
      const params = {
        textDocument: textDocumentItem
      };
      lc.didOpenTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didOpen');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didChangeTextDocument sends notification', () => {
      const params = {
        textDocument: versionedTextDocumentIdentifier,
        contentChanges: []
      };
      lc.didChangeTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didChange');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didCloseTextDocument sends notification', () => {
      const params = {
        textDocument: textDocumentItem
      };
      lc.didCloseTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didClose');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didSaveTextDocument sends notification', () => {
      const params = {
        textDocument: textDocumentItem
      };
      lc.didSaveTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didSave');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didChangeWatchedFiles sends notification', () => {
      const params = { changes: [] };
      lc.didChangeWatchedFiles(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('workspace/didChangeWatchedFiles');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });
  });

  describe('notification methods', () => {
    let lc;
    const eventMap = {};

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.stub(lc, '_onNotification').callsFake((message, callback) => {
        eventMap[message.method] = callback;
      });
    });

    it('onShowMessage calls back on window/showMessage', () => {
      let called = false;
      lc.onShowMessage(() => {
        called = true;
      });
      eventMap['window/showMessage']();
      (0, _chai.expect)(called).equals(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3QvbGFuZ3VhZ2VjbGllbnQudGVzdC5qcyJdLCJuYW1lcyI6WyJscyIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImdsb2JhbCIsInNpbm9uIiwic2FuZGJveCIsImNyZWF0ZSIsImFmdGVyRWFjaCIsInJlc3RvcmUiLCJpdCIsInJwYyIsIkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbiIsImxpc3RlbiIsImNhbGxlZCIsImVxdWFscyIsImxjIiwiZGlzcG9zZSIsInRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zIiwidGV4dERvY3VtZW50IiwidXJpIiwicG9zaXRpb24iLCJsaW5lIiwiY2hhcmFjdGVyIiwic3B5IiwicGFyYW1zIiwiY2FwYWJpbGl0aWVzIiwiaW5pdGlhbGl6ZSIsIl9zZW5kUmVxdWVzdCIsImdldENhbGwiLCJhcmdzIiwic2h1dGRvd24iLCJjb21wbGV0aW9uIiwiY29tcGxldGlvbkl0ZW0iLCJsYWJlbCIsImNvbXBsZXRpb25JdGVtUmVzb2x2ZSIsImhvdmVyIiwic2lnbmF0dXJlSGVscCIsImdvdG9EZWZpbml0aW9uIiwiZmluZFJlZmVyZW5jZXMiLCJkb2N1bWVudEhpZ2hsaWdodCIsImRvY3VtZW50U3ltYm9sIiwicXVlcnkiLCJ3b3Jrc3BhY2VTeW1ib2wiLCJyYW5nZSIsInN0YXJ0IiwiZW5kIiwiY29udGV4dCIsImRpYWdub3N0aWNzIiwiY29kZUFjdGlvbiIsImNvZGVMZW5zIiwiY29kZUxlbnNSZXNvbHZlIiwiZG9jdW1lbnRMaW5rIiwidGFyZ2V0IiwiZG9jdW1lbnRMaW5rUmVzb2x2ZSIsIm9wdGlvbnMiLCJ0YWJTaXplIiwiaW5zZXJ0U3BhY2VzIiwic29tZVZhbHVlIiwiZG9jdW1lbnRGb3JtYXR0aW5nIiwiZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmciLCJjaCIsImRvY3VtZW50T25UeXBlRm9ybWF0dGluZyIsIm5ld05hbWUiLCJyZW5hbWUiLCJ0ZXh0RG9jdW1lbnRJdGVtIiwibGFuZ3VhZ2VJZCIsInRleHQiLCJ2ZXJzaW9uIiwidmVyc2lvbmVkVGV4dERvY3VtZW50SWRlbnRpZmllciIsInN0dWIiLCJleGl0IiwiX3NlbmROb3RpZmljYXRpb24iLCJsZW5ndGgiLCJpbml0aWFsaXplZCIsImV4cGVjdGVkIiwidG8iLCJkZWVwIiwiZXF1YWwiLCJzZXR0aW5ncyIsImEiLCJiIiwiZGlkQ2hhbmdlQ29uZmlndXJhdGlvbiIsImRpZE9wZW5UZXh0RG9jdW1lbnQiLCJjb250ZW50Q2hhbmdlcyIsImRpZENoYW5nZVRleHREb2N1bWVudCIsImRpZENsb3NlVGV4dERvY3VtZW50IiwiZGlkU2F2ZVRleHREb2N1bWVudCIsImNoYW5nZXMiLCJkaWRDaGFuZ2VXYXRjaGVkRmlsZXMiLCJldmVudE1hcCIsImNhbGxzRmFrZSIsIm1lc3NhZ2UiLCJjYWxsYmFjayIsIm1ldGhvZCIsIm9uU2hvd01lc3NhZ2UiXSwibWFwcGluZ3MiOiJBQUVBOztJQUFZQSxFOztBQUNaOztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBQyxTQUFTLDBCQUFULEVBQXFDLE1BQU07QUFDekNDLGFBQVcsTUFBTTtBQUNmQyxXQUFPQyxLQUFQLEdBQWUsZ0JBQU1DLE9BQU4sQ0FBY0MsTUFBZCxFQUFmO0FBQ0QsR0FGRDtBQUdBQyxZQUFVLE1BQU07QUFDZEosV0FBT0MsS0FBUCxDQUFhSSxPQUFiO0FBQ0QsR0FGRDs7QUFJQUMsS0FBRywyQ0FBSCxFQUFnRCxNQUFNO0FBQ3BELFVBQU1DLE1BQU0sbUNBQVo7O0FBRUEsUUFBSVYsR0FBR1csd0JBQVAsQ0FBZ0NELEdBQWhDLEVBQXFDLHdCQUFyQztBQUNBLHNCQUFPQSxJQUFJRSxNQUFKLENBQVdDLE1BQWxCLEVBQTBCQyxNQUExQixDQUFpQyxJQUFqQztBQUNELEdBTEQ7O0FBT0FMLEtBQUcsZ0RBQUgsRUFBcUQsTUFBTTtBQUN6RCxVQUFNQyxNQUFNLG1DQUFaO0FBQ0EsVUFBTUssS0FBSyxJQUFJZixHQUFHVyx3QkFBUCxDQUFnQ0QsR0FBaEMsRUFBcUMsd0JBQXJDLENBQVg7QUFD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QWpCLElBQTJCRCxRQUEzQjtBQUNELE9BRkQ7QUFHRCxLQUxEOztBQU9BbkYsT0FBRyxnREFBSCxFQUFxRCxNQUFNO0FBQ3pELFVBQUlJLFNBQVMsS0FBYjtBQUNBRSxTQUFHK0UsYUFBSCxDQUFpQixNQUFNO0FBQ3JCakYsaUJBQVMsSUFBVDtBQUNELE9BRkQ7QUFHQTRFLGVBQVMsb0JBQVQ7QUFDQSx3QkFBTzVFLE1BQVAsRUFBZUMsTUFBZixDQUFzQixJQUF0QjtBQUNELEtBUEQ7QUFRRCxHQW5CRDtBQW9CRCxDQXBYRCIsImZpbGUiOiJsYW5ndWFnZWNsaWVudC50ZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcblxuaW1wb3J0ICogYXMgbHMgZnJvbSAnLi4vbGliL2xhbmd1YWdlY2xpZW50JztcbmltcG9ydCB7TnVsbExvZ2dlcn0gZnJvbSAnLi4vbGliL2xvZ2dlcic7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuaW1wb3J0IHtleHBlY3R9IGZyb20gJ2NoYWknO1xuaW1wb3J0IHtjcmVhdGVTcHlDb25uZWN0aW9ufSBmcm9tICcuL2hlbHBlcnMuanMnO1xuXG5kZXNjcmliZSgnTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBnbG9iYWwuc2lub24gPSBzaW5vbi5zYW5kYm94LmNyZWF0ZSgpO1xuICB9KTtcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBnbG9iYWwuc2lub24ucmVzdG9yZSgpO1xuICB9KTtcblxuICBpdCgnbGlzdGVucyB0byB0aGUgUlBDIGNvbm5lY3Rpb24gaXQgaXMgZ2l2ZW4nLCAoKSA9PiB7XG4gICAgY29uc3QgcnBjID0gY3JlYXRlU3B5Q29ubmVjdGlvbigpO1xuXG4gICAgbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihycGMsIG5ldyBOdWxsTG9nZ2VyKCkpO1xuICAgIGV4cGVjdChycGMubGlzdGVuLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICB9KTtcblxuICBpdCgnZGlzcG9zZXMgb2YgdGhlIGNvbm5lY3Rpb24gd2hlbiBpdCBpcyBkaXNwb3NlZCcsICgpID0+IHtcbiAgICBjb25zdCBycGMgPSBjcmVhdGVTcHlDb25uZWN0aW9uKCk7XG4gICAgY29uc3QgbGMgPSBuZXcgbHMuTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uKHJwYywgbmV3IE51bGxMb2dnZXIoKSk7XG4gICAgZXhwZWN0KHJwYy5kaXNwb3NlLmNhbGxlZCkuZXF1YWxzKGZhbHNlKTtcbiAgICBsYy5kaXNwb3NlKCk7XG4gICAgZXhwZWN0KHJwYy5kaXNwb3NlLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2VuZCByZXF1ZXN0cycsICgpID0+IHtcbiAgICBjb25zdCB0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtczogbHMuVGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMgPSB7XG4gICAgICB0ZXh0RG9jdW1lbnQ6IHt1cmk6ICdmaWxlOi8vLzEvejgwLmFzbSd9LFxuICAgICAgcG9zaXRpb246IHtsaW5lOiAyNCwgY2hhcmFjdGVyOiAzMn0sXG4gICAgfTtcbiAgICBsZXQgbGM7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGxjID0gbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihjcmVhdGVTcHlDb25uZWN0aW9uKCksIG5ldyBOdWxsTG9nZ2VyKCkpO1xuICAgICAgc2lub24uc3B5KGxjLCAnX3NlbmRSZXF1ZXN0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBpbml0aWFsaXplJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zOiBscy5Jbml0aWFsaXplUGFyYW1zID0ge2NhcGFiaWxpdGllczoge319O1xuICAgICAgYXdhaXQgbGMuaW5pdGlhbGl6ZShwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnaW5pdGlhbGl6ZScpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3Igc2h1dGRvd24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBsYy5zaHV0ZG93bigpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnc2h1dGRvd24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGNvbXBsZXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBsYy5jb21wbGV0aW9uKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9jb21wbGV0aW9uJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGNvbXBsZXRpb25JdGVtUmVzb2x2ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBsZXRpb25JdGVtOiBscy5Db21wbGV0aW9uSXRlbSA9IHtsYWJlbDogJ2FiYyd9O1xuICAgICAgYXdhaXQgbGMuY29tcGxldGlvbkl0ZW1SZXNvbHZlKGNvbXBsZXRpb25JdGVtKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ2NvbXBsZXRpb25JdGVtL3Jlc29sdmUnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMoY29tcGxldGlvbkl0ZW0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgaG92ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBsYy5ob3Zlcih0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvaG92ZXInKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3Igc2lnbmF0dXJlSGVscCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGxjLnNpZ25hdHVyZUhlbHAodGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L3NpZ25hdHVyZUhlbHAnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgZ290b0RlZmluaXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBsYy5nb3RvRGVmaW5pdGlvbih0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvZGVmaW5pdGlvbicpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBmaW5kUmVmZXJlbmNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGxjLmZpbmRSZWZlcmVuY2VzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9yZWZlcmVuY2VzJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50SGlnaGxpZ2h0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbGMuZG9jdW1lbnRIaWdobGlnaHQodGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RvY3VtZW50SGlnaGxpZ2h0Jyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50U3ltYm9sJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbGMuZG9jdW1lbnRTeW1ib2wodGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RvY3VtZW50U3ltYm9sJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIHdvcmtzcGFjZVN5bWJvbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuV29ya3NwYWNlU3ltYm9sUGFyYW1zID0ge3F1ZXJ5OiAnc29tZXRoaW5nJ307XG4gICAgICBhd2FpdCBsYy53b3Jrc3BhY2VTeW1ib2wocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3dvcmtzcGFjZS9zeW1ib2wnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGNvZGVBY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkNvZGVBY3Rpb25QYXJhbXMgPSB7XG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxuICAgICAgICByYW5nZToge1xuICAgICAgICAgIHN0YXJ0OiB7bGluZTogMSwgY2hhcmFjdGVyOiAxfSxcbiAgICAgICAgICBlbmQ6IHtsaW5lOiAyNCwgY2hhcmFjdGVyOiAzMn0sXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRleHQ6IHtkaWFnbm9zdGljczogW119LFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGxjLmNvZGVBY3Rpb24ocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9jb2RlQWN0aW9uJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBjb2RlTGVucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuQ29kZUxlbnNQYXJhbXMgPSB7XG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGxjLmNvZGVMZW5zKHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvY29kZUxlbnMnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGNvZGVMZW5zUmVzb2x2ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuQ29kZUxlbnMgPSB7XG4gICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgc3RhcnQ6IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDF9LFxuICAgICAgICAgIGVuZDoge2xpbmU6IDI0LCBjaGFyYWN0ZXI6IDMyfSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5jb2RlTGVuc1Jlc29sdmUocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ2NvZGVMZW5zL3Jlc29sdmUnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50TGluaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRG9jdW1lbnRMaW5rUGFyYW1zID0ge1xuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zLnRleHREb2N1bWVudCxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5kb2N1bWVudExpbmsocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9kb2N1bWVudExpbmsnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50TGlua1Jlc29sdmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRvY3VtZW50TGluayA9IHtcbiAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICBzdGFydDoge2xpbmU6IDEsIGNoYXJhY3RlcjogMX0sXG4gICAgICAgICAgZW5kOiB7bGluZTogMjQsIGNoYXJhY3RlcjogMzJ9LFxuICAgICAgICB9LFxuICAgICAgICB0YXJnZXQ6ICdhYmMuZGVmLmdoaScsXG4gICAgICB9O1xuICAgICAgYXdhaXQgbGMuZG9jdW1lbnRMaW5rUmVzb2x2ZShwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnZG9jdW1lbnRMaW5rL3Jlc29sdmUnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50Rm9ybWF0dGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRG9jdW1lbnRGb3JtYXR0aW5nUGFyYW1zID0ge1xuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zLnRleHREb2N1bWVudCxcbiAgICAgICAgb3B0aW9uczoge3RhYlNpemU6IDYsIGluc2VydFNwYWNlczogdHJ1ZSwgc29tZVZhbHVlOiAnb3B0aW9uYWwnfSxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5kb2N1bWVudEZvcm1hdHRpbmcocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9mb3JtYXR0aW5nJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBkb2N1bWVudFJhbmdlRm9ybWF0dGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdQYXJhbXMgPSB7XG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxuICAgICAgICByYW5nZToge1xuICAgICAgICAgIHN0YXJ0OiB7bGluZTogMSwgY2hhcmFjdGVyOiAxfSxcbiAgICAgICAgICBlbmQ6IHtsaW5lOiAyNCwgY2hhcmFjdGVyOiAzMn0sXG4gICAgICAgIH0sXG4gICAgICAgIG9wdGlvbnM6IHt0YWJTaXplOiA2LCBpbnNlcnRTcGFjZXM6IHRydWUsIHNvbWVWYWx1ZTogJ29wdGlvbmFsJ30sXG4gICAgICB9O1xuICAgICAgYXdhaXQgbGMuZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmcocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9yYW5nZUZvcm1hdHRpbmcnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50T25UeXBlRm9ybWF0dGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRG9jdW1lbnRPblR5cGVGb3JtYXR0aW5nUGFyYW1zID0ge1xuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zLnRleHREb2N1bWVudCxcbiAgICAgICAgcG9zaXRpb246IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDF9LFxuICAgICAgICBjaDogJ30nLFxuICAgICAgICBvcHRpb25zOiB7dGFiU2l6ZTogNiwgaW5zZXJ0U3BhY2VzOiB0cnVlLCBzb21lVmFsdWU6ICdvcHRpb25hbCd9LFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGxjLmRvY3VtZW50T25UeXBlRm9ybWF0dGluZyhwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L29uVHlwZUZvcm1hdHRpbmcnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIHJlbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuUmVuYW1lUGFyYW1zID0ge1xuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHt1cmk6ICdmaWxlOi8vL2EvYi50eHQnfSxcbiAgICAgICAgcG9zaXRpb246IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDJ9LFxuICAgICAgICBuZXdOYW1lOiAnYWJzdHJhY3RDb25zdHJ1Y3RvckZhY3RvcnknLFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGxjLnJlbmFtZShwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L3JlbmFtZScpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2VuZCBub3RpZmljYXRpb25zJywgKCkgPT4ge1xuICAgIGNvbnN0IHRleHREb2N1bWVudEl0ZW06IGxzLlRleHREb2N1bWVudEl0ZW0gPSB7XG4gICAgICB1cmk6ICdmaWxlOi8vL2Jlc3QvYml0cy5qcycsXG4gICAgICBsYW5ndWFnZUlkOiAnamF2YXNjcmlwdCcsXG4gICAgICB0ZXh0OiAnZnVuY3Rpb24gYSgpIHsgcmV0dXJuIFwiYlwiOyB9OycsXG4gICAgICB2ZXJzaW9uOiAxLFxuICAgIH07XG4gICAgY29uc3QgdmVyc2lvbmVkVGV4dERvY3VtZW50SWRlbnRpZmllcjogbHMuVmVyc2lvbmVkVGV4dERvY3VtZW50SWRlbnRpZmllciA9IHtcbiAgICAgIHVyaTogJ2ZpbGU6Ly8vYmVzdC9iaXRzLmpzJyxcbiAgICAgIGxhbmd1YWdlSWQ6ICdqYXZhc2NyaXB0JyxcbiAgICAgIHRleHQ6ICdmdW5jdGlvbiBhKCkgeyByZXR1cm4gXCJiXCI7IH07JyxcbiAgICAgIHZlcnNpb246IDEsXG4gICAgfTtcblxuICAgIGxldCBsYztcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbGMgPSBuZXcgbHMuTGFuZ3VhZ2VDbGllbnRDb25uZWN0aW9uKGNyZWF0ZVNweUNvbm5lY3Rpb24oKSwgbmV3IE51bGxMb2dnZXIoKSk7XG4gICAgICBzaW5vbi5zdHViKGxjLCAnX3NlbmROb3RpZmljYXRpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdleGl0IHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcbiAgICAgIGxjLmV4aXQoKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCdleGl0Jyk7XG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzLmxlbmd0aCkuZXF1YWxzKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2luaXRpYWxpemVkIHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcbiAgICAgIGxjLmluaXRpYWxpemVkKCk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnaW5pdGlhbGl6ZWQnKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkOiBscy5Jbml0aWFsaXplZFBhcmFtcyA9IHt9O1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkudG8uZGVlcC5lcXVhbChleHBlY3RlZCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlkQ2hhbmdlQ29uZmlndXJhdGlvbiBzZW5kcyBub3RpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRpZENoYW5nZUNvbmZpZ3VyYXRpb25QYXJhbXMgPSB7XG4gICAgICAgIHNldHRpbmdzOiB7YToge2I6ICdjJ319LFxuICAgICAgfTtcbiAgICAgIGxjLmRpZENoYW5nZUNvbmZpZ3VyYXRpb24ocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd3b3Jrc3BhY2UvZGlkQ2hhbmdlQ29uZmlndXJhdGlvbicpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlkT3BlblRleHREb2N1bWVudCBzZW5kcyBub3RpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRpZE9wZW5UZXh0RG9jdW1lbnRQYXJhbXMgPSB7XG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50SXRlbSxcbiAgICAgIH07XG4gICAgICBsYy5kaWRPcGVuVGV4dERvY3VtZW50KHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RpZE9wZW4nKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RpZENoYW5nZVRleHREb2N1bWVudCBzZW5kcyBub3RpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRpZENoYW5nZVRleHREb2N1bWVudFBhcmFtcyA9IHtcbiAgICAgICAgdGV4dERvY3VtZW50OiB2ZXJzaW9uZWRUZXh0RG9jdW1lbnRJZGVudGlmaWVyLFxuICAgICAgICBjb250ZW50Q2hhbmdlczogW10sXG4gICAgICB9O1xuICAgICAgbGMuZGlkQ2hhbmdlVGV4dERvY3VtZW50KHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RpZENoYW5nZScpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlkQ2xvc2VUZXh0RG9jdW1lbnQgc2VuZHMgbm90aWZpY2F0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zOiBscy5EaWRDbG9zZVRleHREb2N1bWVudFBhcmFtcyA9IHtcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRJdGVtLFxuICAgICAgfTtcbiAgICAgIGxjLmRpZENsb3NlVGV4dERvY3VtZW50KHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RpZENsb3NlJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdkaWRTYXZlVGV4dERvY3VtZW50IHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRGlkU2F2ZVRleHREb2N1bWVudFBhcmFtcyA9IHtcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRJdGVtLFxuICAgICAgfTtcbiAgICAgIGxjLmRpZFNhdmVUZXh0RG9jdW1lbnQocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvZGlkU2F2ZScpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlkQ2hhbmdlV2F0Y2hlZEZpbGVzIHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRGlkQ2hhbmdlV2F0Y2hlZEZpbGVzUGFyYW1zID0ge2NoYW5nZXM6IFtdfTtcbiAgICAgIGxjLmRpZENoYW5nZVdhdGNoZWRGaWxlcyhwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3dvcmtzcGFjZS9kaWRDaGFuZ2VXYXRjaGVkRmlsZXMnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbm90aWZpY2F0aW9uIG1ldGhvZHMnLCAoKSA9PiB7XG4gICAgbGV0IGxjO1xuICAgIGNvbnN0IGV2ZW50TWFwID0ge307XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGxjID0gbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihjcmVhdGVTcHlDb25uZWN0aW9uKCksIG5ldyBOdWxsTG9nZ2VyKCkpO1xuICAgICAgc2lub24uc3R1YihsYywgJ19vbk5vdGlmaWNhdGlvbicpLmNhbGxzRmFrZSgobWVzc2FnZSwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgZXZlbnRNYXBbbWVzc2FnZS5tZXRob2RdID0gY2FsbGJhY2s7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdvblNob3dNZXNzYWdlIGNhbGxzIGJhY2sgb24gd2luZG93L3Nob3dNZXNzYWdlJywgKCkgPT4ge1xuICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICAgICAgbGMub25TaG93TWVzc2FnZSgoKSA9PiB7XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIGV2ZW50TWFwWyd3aW5kb3cvc2hvd01lc3NhZ2UnXSgpO1xuICAgICAgZXhwZWN0KGNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19