var _languageclient = require('../lib/languageclient');

var ls = _interopRequireWildcard(_languageclient);

var _logger = require('../lib/logger');

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _chai = require('chai');

var _helpers = require('./helpers.js');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }

describe('LanguageClientConnection', () => {
  beforeEach(() => {
    global.sinon = _sinon2.default.sandbox.create();
  });
  afterEach(() => {
    global.sinon.restore();
  });

  it('listens to the RPC connection it is given', () => {
    const rpc = (0, _helpers.createSpyConnection)();

    new ls.LanguageClientConnection(rpc, new _logger.NullLogger());
    (0, _chai.expect)(rpc.listen.called).equals(true);
  });

  it('disposes of the connection when it is disposed', () => {
    const rpc = (0, _helpers.createSpyConnection)();
    const lc = new ls.LanguageClientConnection(rpc, new _logger.NullLogger());
    (0, _chai.expect)(rpc.dispose.called).equals(false);
    lc.dispose();
    (0, _chai.expect)(rpc.dispose.called).equals(true);
  });

  describe('send requests', () => {
    const textDocumentPositionParams = {
      textDocument: { uri: 'file:///1/z80.asm' },
      position: { line: 24, character: 32 }
    };
    let lc;

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.spy(lc, '_sendRequest');
    });

    it('sends a request for initialize', _asyncToGenerator(function* () {
      const params = { capabilities: {} };
      yield lc.initialize(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('initialize');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for shutdown', _asyncToGenerator(function* () {
      yield lc.shutdown();

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('shutdown');
    }));

    it('sends a request for completion', _asyncToGenerator(function* () {
      yield lc.completion(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/completion');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for completionItemResolve', _asyncToGenerator(function* () {
      const completionItem = { label: 'abc' };
      yield lc.completionItemResolve(completionItem);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('completionItem/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(completionItem);
    }));

    it('sends a request for hover', _asyncToGenerator(function* () {
      yield lc.hover(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/hover');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for signatureHelp', _asyncToGenerator(function* () {
      yield lc.signatureHelp(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/signatureHelp');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for gotoDefinition', _asyncToGenerator(function* () {
      yield lc.gotoDefinition(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/definition');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for findReferences', _asyncToGenerator(function* () {
      yield lc.findReferences(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/references');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for documentHighlight', _asyncToGenerator(function* () {
      yield lc.documentHighlight(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentHighlight');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for documentSymbol', _asyncToGenerator(function* () {
      yield lc.documentSymbol(textDocumentPositionParams);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentSymbol');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(textDocumentPositionParams);
    }));

    it('sends a request for workspaceSymbol', _asyncToGenerator(function* () {
      const params = { query: 'something' };
      yield lc.workspaceSymbol(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('workspace/symbol');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for codeAction', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        range: { start: { line: 1, character: 1 }, end: { line: 24, character: 32 } },
        context: { diagnostics: [] }
      };
      yield lc.codeAction(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/codeAction');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for codeLens', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument
      };
      yield lc.codeLens(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/codeLens');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for codeLensResolve', _asyncToGenerator(function* () {
      const params = {
        range: { start: { line: 1, character: 1 }, end: { line: 24, character: 32 } }
      };
      yield lc.codeLensResolve(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('codeLens/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentLink', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument
      };
      yield lc.documentLink(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/documentLink');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentLinkResolve', _asyncToGenerator(function* () {
      const params = {
        range: { start: { line: 1, character: 1 }, end: { line: 24, character: 32 } },
        target: 'abc.def.ghi'
      };
      yield lc.documentLinkResolve(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('documentLink/resolve');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentFormatting', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      yield lc.documentFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/formatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentRangeFormatting', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        range: { start: { line: 1, character: 1 }, end: { line: 24, character: 32 } },
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      yield lc.documentRangeFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/rangeFormatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for documentOnTypeFormatting', _asyncToGenerator(function* () {
      const params = {
        textDocument: textDocumentPositionParams.textDocument,
        position: { line: 1, character: 1 },
        ch: '}',
        options: { tabSize: 6, insertSpaces: true, someValue: 'optional' }
      };
      yield lc.documentOnTypeFormatting(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/onTypeFormatting');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));

    it('sends a request for rename', _asyncToGenerator(function* () {
      const params = {
        textDocument: { uri: 'file:///a/b.txt' },
        position: { line: 1, character: 2 },
        newName: 'abstractConstructorFactory'
      };
      yield lc.rename(params);

      (0, _chai.expect)(lc._sendRequest.called).equals(true);
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[0]).equals('textDocument/rename');
      (0, _chai.expect)(lc._sendRequest.getCall(0).args[1]).equals(params);
    }));
  });

  describe('send notifications', () => {
    const textDocumentItem = {
      uri: 'file:///best/bits.js',
      languageId: 'javascript',
      text: 'function a() { return "b"; };',
      version: 1
    };
    const versionedTextDocumentIdentifier = {
      uri: 'file:///best/bits.js',
      languageId: 'javascript',
      text: 'function a() { return "b"; };',
      version: 1
    };

    let lc;

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.stub(lc, '_sendNotification');
    });

    it('didChangeConfiguration sends notification', () => {
      const params = { settings: { a: { b: 'c' } } };
      lc.didChangeConfiguration(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('workspace/didChangeConfiguration');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didOpenTextDocument sends notification', () => {
      const params = { textDocument: textDocumentItem };
      lc.didOpenTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didOpen');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didChangeTextDocument sends notification', () => {
      const params = {
        textDocument: versionedTextDocumentIdentifier,
        contentChanges: []
      };
      lc.didChangeTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didChange');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didCloseTextDocument sends notification', () => {
      const params = { textDocument: textDocumentItem };
      lc.didCloseTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didClose');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didSaveTextDocument sends notification', () => {
      const params = { textDocument: textDocumentItem };
      lc.didSaveTextDocument(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('textDocument/didSave');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });

    it('didChangeWatchedFiles sends notification', () => {
      const params = { changes: [] };
      lc.didChangeWatchedFiles(params);

      (0, _chai.expect)(lc._sendNotification.called).equals(true);
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[0]).equals('workspace/didChangeWatchedFiles');
      (0, _chai.expect)(lc._sendNotification.getCall(0).args[1]).equals(params);
    });
  });

  describe('notification methods', () => {
    let lc;
    const eventMap = {};

    beforeEach(() => {
      lc = new ls.LanguageClientConnection((0, _helpers.createSpyConnection)(), new _logger.NullLogger());
      _sinon2.default.stub(lc, '_onNotification').callsFake((message, callback) => {
        eventMap[message.method] = callback;
      });
    });

    it('onExit calls back on exit', () => {
      let called = false;
      lc.onExit(() => {
        called = true;
      });
      eventMap.exit();
      (0, _chai.expect)(called).equals(true);
    });

    it('onShowMessage calls back on window/showMessage', () => {
      let called = false;
      lc.onShowMessage(() => {
        called = true;
      });
      eventMap['window/showMessage']();
      (0, _chai.expect)(called).equals(true);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3QvbGFuZ3VhZ2VjbGllbnQudGVzdC5qcyJdLCJuYW1lcyI6WyJscyIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImdsb2JhbCIsInNpbm9uIiwic2FuZGJveCIsImNyZWF0ZSIsImFmdGVyRWFjaCIsInJlc3RvcmUiLCJpdCIsInJwYyIsIkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbiIsImxpc3RlbiIsImNhbGxlZCIsImVxdWFscyIsImxjIiwiZGlzcG9zZSIsInRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zIiwidGV4dERvY3VtZW50IiwidXJpIiwicG9zaXRpb24iLCJsaW5lIiwiY2hhcmFjdGVyIiwic3B5IiwicGFyYW1zIiwiY2FwYWJpbGl0aWVzIiwiaW5pdGlhbGl6ZSIsIl9zZW5kUmVxdWVzdCIsImdldENhbGwiLCJhcmdzIiwic2h1dGRvd24iLCJjb21wbGV0aW9uIiwiY29tcGxldGlvbkl0ZW0iLCJsYWJlbCIsImNvbXBsZXRpb25JdGVtUmVzb2x2ZSIsImhvdmVyIiwic2lnbmF0dXJlSGVscCIsImdvdG9EZWZpbml0aW9uIiwiZmluZFJlZmVyZW5jZXMiLCJkb2N1bWVudEhpZ2hsaWdodCIsImRvY3VtZW50U3ltYm9sIiwicXVlcnkiLCJ3b3Jrc3BhY2VTeW1ib2wiLCJyYW5nZSIsInN0YXJ0IiwiZW5kIiwiY29udGV4dCIsImRpYWdub3N0aWNzIiwiY29kZUFjdGlvbiIsImNvZGVMZW5zIiwiY29kZUxlbnNSZXNvbHZlIiwiZG9jdW1lbnRMaW5rIiwidGFyZ2V0IiwiZG9jdW1lbnRMaW5rUmVzb2x2ZSIsIm9wdGlvbnMiLCJ0YWJTaXplIiwiaW5zZXJ0U3BhY2VzIiwic29tZVZhbHVlIiwiZG9jdW1lbnRGb3JtYXR0aW5nIiwiZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmciLCJjaCIsImRvY3VtZW50T25UeXBlRm9ybWF0dGluZyIsIm5ld05hbWUiLCJyZW5hbWUiLCJ0ZXh0RG9jdW1lbnRJdGVtIiwibGFuZ3VhZ2VJZCIsInRleHQiLCJ2ZXJzaW9uIiwidmVyc2lvbmVkVGV4dERvY3VtZW50SWRlbnRpZmllciIsInN0dWIiLCJzZXR0aW5ncyIsImEiLCJiIiwiZGlkQ2hhbmdlQ29uZmlndXJhdGlvbiIsIl9zZW5kTm90aWZpY2F0aW9uIiwiZGlkT3BlblRleHREb2N1bWVudCIsImNvbnRlbnRDaGFuZ2VzIiwiZGlkQ2hhbmdlVGV4dERvY3VtZW50IiwiZGlkQ2xvc2VUZXh0RG9jdW1lbnQiLCJkaWRTYXZlVGV4dERvY3VtZW50IiwiY2hhbmdlcyIsImRpZENoYW5nZVdhdGNoZWRGaWxlcyIsImV2ZW50TWFwIiwiY2FsbHNGYWtlIiwibWVzc2FnZSIsImNhbGxiYWNrIiwibWV0aG9kIiwib25FeGl0IiwiZXhpdCIsIm9uU2hvd01lc3NhZ2UiXSwibWFwcGluZ3MiOiJBQUVBOztJQUFZQSxFOztBQUNaOztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUFDLFNBQVMsMEJBQVQsRUFBcUMsTUFBTTtBQUN6Q0MsYUFBVyxNQUFNO0FBQUVDLFdBQU9DLEtBQVAsR0FBZSxnQkFBTUMsT0FBTixDQUFjQyxNQUFkLEVBQWY7QUFBd0MsR0FBM0Q7QUFDQUMsWUFBVSxNQUFNO0FBQUVKLFdBQU9DLEtBQVAsQ0FBYUksT0FBYjtBQUF5QixHQUEzQzs7QUFFQUMsS0FBRywyQ0FBSCxFQUFnRCxNQUFNO0FBQ3BELFVBQU1DLE1BQU0sbUNBQVo7O0FBRUEsUUFBSVYsR0FBR1csd0JBQVAsQ0FBZ0NELEdBQWhDLEVBQXFDLHdCQUFyQztBQUNBLHNCQUFPQSxJQUFJRSxNQUFKLENBQVdDLE1BQWxCLEVBQTBCQyxNQUExQixDQUFpQyxJQUFqQztBQUNELEdBTEQ7O0FBT0FMLEtBQUcsZ0RBQUgsRUFBcUQsTUFBTTtBQUN6RCxVQUFNQyxNQUFNLG1DQUFaO0FBQ0EsVUFBTUssS0FBSyxJQUFJZixHQUFHVyx3QkFBUCxDQUFnQ0QsR0FBaEMsRUFBcUMsd0JBQXJDLENBQVg7QUFDQSxzQkFBT0EsSUFBSU0sT0FBSixDQUFZSCxNQUFuQixFQUEyQkMs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Vyx3QkFBUCxDQUFnQyxtQ0FBaEMsRUFBdUQsd0JBQXZELENBQUw7QUFDQSxzQkFBTTBELElBQU4sQ0FBV3RELEVBQVgsRUFBZSxpQkFBZixFQUFrQ29FLFNBQWxDLENBQTRDLENBQUNDLE9BQUQsRUFBVUMsUUFBVixLQUF1QjtBQUNqRUgsaUJBQVNFLFFBQVFFLE1BQWpCLElBQTJCRCxRQUEzQjtBQUNELE9BRkQ7QUFHRCxLQUxEOztBQU9BNUUsT0FBRywyQkFBSCxFQUFnQyxNQUFNO0FBQ3BDLFVBQUlJLFNBQVMsS0FBYjtBQUNBRSxTQUFHd0UsTUFBSCxDQUFVLE1BQU07QUFBRTFFLGlCQUFTLElBQVQ7QUFBZ0IsT0FBbEM7QUFDQXFFLGVBQVNNLElBQVQ7QUFDQSx3QkFBTzNFLE1BQVAsRUFBZUMsTUFBZixDQUFzQixJQUF0QjtBQUNELEtBTEQ7O0FBT0FMLE9BQUcsZ0RBQUgsRUFBcUQsTUFBTTtBQUN6RCxVQUFJSSxTQUFTLEtBQWI7QUFDQUUsU0FBRzBFLGFBQUgsQ0FBaUIsTUFBTTtBQUFFNUUsaUJBQVMsSUFBVDtBQUFnQixPQUF6QztBQUNBcUUsZUFBUyxvQkFBVDtBQUNBLHdCQUFPckUsTUFBUCxFQUFlQyxNQUFmLENBQXNCLElBQXRCO0FBQ0QsS0FMRDtBQU1ELEdBeEJEO0FBeUJELENBaFZEIiwiZmlsZSI6Imxhbmd1YWdlY2xpZW50LnRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuXG5pbXBvcnQgKiBhcyBscyBmcm9tICcuLi9saWIvbGFuZ3VhZ2VjbGllbnQnO1xuaW1wb3J0IHtOdWxsTG9nZ2VyfSBmcm9tICcuLi9saWIvbG9nZ2VyJztcbmltcG9ydCBzaW5vbiBmcm9tICdzaW5vbic7XG5pbXBvcnQge2V4cGVjdH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQge2NyZWF0ZVNweUNvbm5lY3Rpb259IGZyb20gJy4vaGVscGVycy5qcyc7XG5cbmRlc2NyaWJlKCdMYW5ndWFnZUNsaWVudENvbm5lY3Rpb24nLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4geyBnbG9iYWwuc2lub24gPSBzaW5vbi5zYW5kYm94LmNyZWF0ZSgpOyB9KTtcbiAgYWZ0ZXJFYWNoKCgpID0+IHsgZ2xvYmFsLnNpbm9uLnJlc3RvcmUoKTsgfSk7XG5cbiAgaXQoJ2xpc3RlbnMgdG8gdGhlIFJQQyBjb25uZWN0aW9uIGl0IGlzIGdpdmVuJywgKCkgPT4ge1xuICAgIGNvbnN0IHJwYyA9IGNyZWF0ZVNweUNvbm5lY3Rpb24oKTtcblxuICAgIG5ldyBscy5MYW5ndWFnZUNsaWVudENvbm5lY3Rpb24ocnBjLCBuZXcgTnVsbExvZ2dlcigpKTtcbiAgICBleHBlY3QocnBjLmxpc3Rlbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgfSk7XG5cbiAgaXQoJ2Rpc3Bvc2VzIG9mIHRoZSBjb25uZWN0aW9uIHdoZW4gaXQgaXMgZGlzcG9zZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgcnBjID0gY3JlYXRlU3B5Q29ubmVjdGlvbigpO1xuICAgIGNvbnN0IGxjID0gbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihycGMsIG5ldyBOdWxsTG9nZ2VyKCkpO1xuICAgIGV4cGVjdChycGMuZGlzcG9zZS5jYWxsZWQpLmVxdWFscyhmYWxzZSk7XG4gICAgbGMuZGlzcG9zZSgpO1xuICAgIGV4cGVjdChycGMuZGlzcG9zZS5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlbmQgcmVxdWVzdHMnLCAoKSA9PiB7XG4gICAgY29uc3QgdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXM6IGxzLlRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zID0ge1xuICAgICAgdGV4dERvY3VtZW50OiB7dXJpOiAnZmlsZTovLy8xL3o4MC5hc20nfSxcbiAgICAgIHBvc2l0aW9uOiB7bGluZTogMjQsIGNoYXJhY3RlcjogMzJ9LFxuICAgIH07XG4gICAgbGV0IGxjO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBsYyA9IG5ldyBscy5MYW5ndWFnZUNsaWVudENvbm5lY3Rpb24oY3JlYXRlU3B5Q29ubmVjdGlvbigpLCBuZXcgTnVsbExvZ2dlcigpKTtcbiAgICAgIHNpbm9uLnNweShsYywgJ19zZW5kUmVxdWVzdCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgaW5pdGlhbGl6ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuSW5pdGlhbGl6ZVBhcmFtcyA9IHtjYXBhYmlsaXRpZXM6IHsgfX07XG4gICAgICBhd2FpdCBsYy5pbml0aWFsaXplKHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCdpbml0aWFsaXplJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBzaHV0ZG93bicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGxjLnNodXRkb3duKCk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCdzaHV0ZG93bicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgY29tcGxldGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGxjLmNvbXBsZXRpb24odGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2NvbXBsZXRpb24nKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgY29tcGxldGlvbkl0ZW1SZXNvbHZlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcGxldGlvbkl0ZW06IGxzLkNvbXBsZXRpb25JdGVtID0ge2xhYmVsOiAnYWJjJ307XG4gICAgICBhd2FpdCBsYy5jb21wbGV0aW9uSXRlbVJlc29sdmUoY29tcGxldGlvbkl0ZW0pO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnY29tcGxldGlvbkl0ZW0vcmVzb2x2ZScpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhjb21wbGV0aW9uSXRlbSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBob3ZlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGxjLmhvdmVyKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9ob3ZlcicpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBzaWduYXR1cmVIZWxwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbGMuc2lnbmF0dXJlSGVscCh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvc2lnbmF0dXJlSGVscCcpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBnb3RvRGVmaW5pdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGxjLmdvdG9EZWZpbml0aW9uKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9kZWZpbml0aW9uJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGZpbmRSZWZlcmVuY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgbGMuZmluZFJlZmVyZW5jZXModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L3JlZmVyZW5jZXMnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgZG9jdW1lbnRIaWdobGlnaHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBsYy5kb2N1bWVudEhpZ2hsaWdodCh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvZG9jdW1lbnRIaWdobGlnaHQnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgZG9jdW1lbnRTeW1ib2wnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBsYy5kb2N1bWVudFN5bWJvbCh0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvZG9jdW1lbnRTeW1ib2wnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHModGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3Igd29ya3NwYWNlU3ltYm9sJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zOiBscy5Xb3Jrc3BhY2VTeW1ib2xQYXJhbXMgPSB7cXVlcnk6ICdzb21ldGhpbmcnfTtcbiAgICAgIGF3YWl0IGxjLndvcmtzcGFjZVN5bWJvbChwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnd29ya3NwYWNlL3N5bWJvbCcpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgY29kZUFjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuQ29kZUFjdGlvblBhcmFtcyA9IHtcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcy50ZXh0RG9jdW1lbnQsXG4gICAgICAgIHJhbmdlOiB7c3RhcnQ6IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDF9LCBlbmQ6IHtsaW5lOiAyNCwgY2hhcmFjdGVyOiAzMn19LFxuICAgICAgICBjb250ZXh0OiB7ZGlhZ25vc3RpY3M6IFtdfSxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5jb2RlQWN0aW9uKHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvY29kZUFjdGlvbicpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgY29kZUxlbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkNvZGVMZW5zUGFyYW1zID0ge1xuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zLnRleHREb2N1bWVudCxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5jb2RlTGVucyhwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2NvZGVMZW5zJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBjb2RlTGVuc1Jlc29sdmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkNvZGVMZW5zID0ge1xuICAgICAgICByYW5nZToge3N0YXJ0OiB7bGluZTogMSwgY2hhcmFjdGVyOiAxfSwgZW5kOiB7bGluZTogMjQsIGNoYXJhY3RlcjogMzJ9fSxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5jb2RlTGVuc1Jlc29sdmUocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ2NvZGVMZW5zL3Jlc29sdmUnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50TGluaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRG9jdW1lbnRMaW5rUGFyYW1zID0ge1xuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudFBvc2l0aW9uUGFyYW1zLnRleHREb2N1bWVudCxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5kb2N1bWVudExpbmsocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9kb2N1bWVudExpbmsnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50TGlua1Jlc29sdmUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRvY3VtZW50TGluayA9IHtcbiAgICAgICAgcmFuZ2U6IHtzdGFydDoge2xpbmU6IDEsIGNoYXJhY3RlcjogMX0sIGVuZDoge2xpbmU6IDI0LCBjaGFyYWN0ZXI6IDMyfX0sXG4gICAgICAgIHRhcmdldDogJ2FiYy5kZWYuZ2hpJyxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5kb2N1bWVudExpbmtSZXNvbHZlKHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCdkb2N1bWVudExpbmsvcmVzb2x2ZScpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NlbmRzIGEgcmVxdWVzdCBmb3IgZG9jdW1lbnRGb3JtYXR0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zOiBscy5Eb2N1bWVudEZvcm1hdHRpbmdQYXJhbXMgPSB7XG4gICAgICAgIHRleHREb2N1bWVudDogdGV4dERvY3VtZW50UG9zaXRpb25QYXJhbXMudGV4dERvY3VtZW50LFxuICAgICAgICBvcHRpb25zOiB7dGFiU2l6ZTogNiwgaW5zZXJ0U3BhY2VzOiB0cnVlLCBzb21lVmFsdWU6ICdvcHRpb25hbCd9LFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGxjLmRvY3VtZW50Rm9ybWF0dGluZyhwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2Zvcm1hdHRpbmcnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzZW5kcyBhIHJlcXVlc3QgZm9yIGRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zOiBscy5Eb2N1bWVudFJhbmdlRm9ybWF0dGluZ1BhcmFtcyA9IHtcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcy50ZXh0RG9jdW1lbnQsXG4gICAgICAgIHJhbmdlOiB7c3RhcnQ6IHtsaW5lOiAxLCBjaGFyYWN0ZXI6IDF9LCBlbmQ6IHtsaW5lOiAyNCwgY2hhcmFjdGVyOiAzMn19LFxuICAgICAgICBvcHRpb25zOiB7dGFiU2l6ZTogNiwgaW5zZXJ0U3BhY2VzOiB0cnVlLCBzb21lVmFsdWU6ICdvcHRpb25hbCd9LFxuICAgICAgfTtcbiAgICAgIGF3YWl0IGxjLmRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nKHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvcmFuZ2VGb3JtYXR0aW5nJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciBkb2N1bWVudE9uVHlwZUZvcm1hdHRpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRvY3VtZW50T25UeXBlRm9ybWF0dGluZ1BhcmFtcyA9IHtcbiAgICAgICAgdGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRQb3NpdGlvblBhcmFtcy50ZXh0RG9jdW1lbnQsXG4gICAgICAgIHBvc2l0aW9uOiB7bGluZTogMSwgY2hhcmFjdGVyOiAxfSxcbiAgICAgICAgY2g6ICd9JyxcbiAgICAgICAgb3B0aW9uczoge3RhYlNpemU6IDYsIGluc2VydFNwYWNlczogdHJ1ZSwgc29tZVZhbHVlOiAnb3B0aW9uYWwnfSxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5kb2N1bWVudE9uVHlwZUZvcm1hdHRpbmcocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9vblR5cGVGb3JtYXR0aW5nJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmRSZXF1ZXN0LmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2VuZHMgYSByZXF1ZXN0IGZvciByZW5hbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLlJlbmFtZVBhcmFtcyA9IHtcbiAgICAgICAgdGV4dERvY3VtZW50OiB7dXJpOiAnZmlsZTovLy9hL2IudHh0J30sXG4gICAgICAgIHBvc2l0aW9uOiB7bGluZTogMSwgY2hhcmFjdGVyOiAyfSxcbiAgICAgICAgbmV3TmFtZTogJ2Fic3RyYWN0Q29uc3RydWN0b3JGYWN0b3J5JyxcbiAgICAgIH07XG4gICAgICBhd2FpdCBsYy5yZW5hbWUocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kUmVxdWVzdC5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9yZW5hbWUnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZFJlcXVlc3QuZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NlbmQgbm90aWZpY2F0aW9ucycsICgpID0+IHtcbiAgICBjb25zdCB0ZXh0RG9jdW1lbnRJdGVtIDogbHMuVGV4dERvY3VtZW50SXRlbSA9IHtcbiAgICAgIHVyaTogJ2ZpbGU6Ly8vYmVzdC9iaXRzLmpzJyxcbiAgICAgIGxhbmd1YWdlSWQ6ICdqYXZhc2NyaXB0JyxcbiAgICAgIHRleHQ6ICdmdW5jdGlvbiBhKCkgeyByZXR1cm4gXCJiXCI7IH07JyxcbiAgICAgIHZlcnNpb246IDEsXG4gICAgfTtcbiAgICBjb25zdCB2ZXJzaW9uZWRUZXh0RG9jdW1lbnRJZGVudGlmaWVyOiBscy5WZXJzaW9uZWRUZXh0RG9jdW1lbnRJZGVudGlmaWVyID0ge1xuICAgICAgdXJpOiAnZmlsZTovLy9iZXN0L2JpdHMuanMnLFxuICAgICAgbGFuZ3VhZ2VJZDogJ2phdmFzY3JpcHQnLFxuICAgICAgdGV4dDogJ2Z1bmN0aW9uIGEoKSB7IHJldHVybiBcImJcIjsgfTsnLFxuICAgICAgdmVyc2lvbjogMSxcbiAgICB9O1xuXG4gICAgbGV0IGxjO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBsYyA9IG5ldyBscy5MYW5ndWFnZUNsaWVudENvbm5lY3Rpb24oY3JlYXRlU3B5Q29ubmVjdGlvbigpLCBuZXcgTnVsbExvZ2dlcigpKTtcbiAgICAgIHNpbm9uLnN0dWIobGMsICdfc2VuZE5vdGlmaWNhdGlvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RpZENoYW5nZUNvbmZpZ3VyYXRpb24gc2VuZHMgbm90aWZpY2F0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zOiBscy5EaWRDaGFuZ2VDb25maWd1cmF0aW9uUGFyYW1zID0ge3NldHRpbmdzOiB7YToge2I6ICdjJ319fTtcbiAgICAgIGxjLmRpZENoYW5nZUNvbmZpZ3VyYXRpb24ocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd3b3Jrc3BhY2UvZGlkQ2hhbmdlQ29uZmlndXJhdGlvbicpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlkT3BlblRleHREb2N1bWVudCBzZW5kcyBub3RpZmljYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJhbXM6IGxzLkRpZE9wZW5UZXh0RG9jdW1lbnRQYXJhbXMgPSB7dGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRJdGVtfTtcbiAgICAgIGxjLmRpZE9wZW5UZXh0RG9jdW1lbnQocGFyYW1zKTtcblxuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1swXSkuZXF1YWxzKCd0ZXh0RG9jdW1lbnQvZGlkT3BlbicpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlkQ2hhbmdlVGV4dERvY3VtZW50IHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRGlkQ2hhbmdlVGV4dERvY3VtZW50UGFyYW1zID0ge1xuICAgICAgICB0ZXh0RG9jdW1lbnQ6IHZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIsXG4gICAgICAgIGNvbnRlbnRDaGFuZ2VzOiBbXVxuICAgICAgfTtcbiAgICAgIGxjLmRpZENoYW5nZVRleHREb2N1bWVudChwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9kaWRDaGFuZ2UnKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMV0pLmVxdWFscyhwYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RpZENsb3NlVGV4dERvY3VtZW50IHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRGlkQ2xvc2VUZXh0RG9jdW1lbnRQYXJhbXMgPSB7dGV4dERvY3VtZW50OiB0ZXh0RG9jdW1lbnRJdGVtfTtcbiAgICAgIGxjLmRpZENsb3NlVGV4dERvY3VtZW50KHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygndGV4dERvY3VtZW50L2RpZENsb3NlJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdkaWRTYXZlVGV4dERvY3VtZW50IHNlbmRzIG5vdGlmaWNhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtczogbHMuRGlkU2F2ZVRleHREb2N1bWVudFBhcmFtcyA9IHt0ZXh0RG9jdW1lbnQ6IHRleHREb2N1bWVudEl0ZW19O1xuICAgICAgbGMuZGlkU2F2ZVRleHREb2N1bWVudChwYXJhbXMpO1xuXG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzBdKS5lcXVhbHMoJ3RleHREb2N1bWVudC9kaWRTYXZlJyk7XG4gICAgICBleHBlY3QobGMuX3NlbmROb3RpZmljYXRpb24uZ2V0Q2FsbCgwKS5hcmdzWzFdKS5lcXVhbHMocGFyYW1zKTtcbiAgICB9KTtcblxuICAgIGl0KCdkaWRDaGFuZ2VXYXRjaGVkRmlsZXMgc2VuZHMgbm90aWZpY2F0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1zOiBscy5EaWRDaGFuZ2VXYXRjaGVkRmlsZXNQYXJhbXMgPSB7Y2hhbmdlczogW119O1xuICAgICAgbGMuZGlkQ2hhbmdlV2F0Y2hlZEZpbGVzKHBhcmFtcyk7XG5cbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5jYWxsZWQpLmVxdWFscyh0cnVlKTtcbiAgICAgIGV4cGVjdChsYy5fc2VuZE5vdGlmaWNhdGlvbi5nZXRDYWxsKDApLmFyZ3NbMF0pLmVxdWFscygnd29ya3NwYWNlL2RpZENoYW5nZVdhdGNoZWRGaWxlcycpO1xuICAgICAgZXhwZWN0KGxjLl9zZW5kTm90aWZpY2F0aW9uLmdldENhbGwoMCkuYXJnc1sxXSkuZXF1YWxzKHBhcmFtcyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdub3RpZmljYXRpb24gbWV0aG9kcycsICgpID0+IHtcbiAgICBsZXQgbGM7XG4gICAgY29uc3QgZXZlbnRNYXAgPSB7IH07XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGxjID0gbmV3IGxzLkxhbmd1YWdlQ2xpZW50Q29ubmVjdGlvbihjcmVhdGVTcHlDb25uZWN0aW9uKCksIG5ldyBOdWxsTG9nZ2VyKCkpO1xuICAgICAgc2lub24uc3R1YihsYywgJ19vbk5vdGlmaWNhdGlvbicpLmNhbGxzRmFrZSgobWVzc2FnZSwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgZXZlbnRNYXBbbWVzc2FnZS5tZXRob2RdID0gY2FsbGJhY2s7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdvbkV4aXQgY2FsbHMgYmFjayBvbiBleGl0JywgKCkgPT4ge1xuICAgICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuICAgICAgbGMub25FeGl0KCgpID0+IHsgY2FsbGVkID0gdHJ1ZTsgfSk7XG4gICAgICBldmVudE1hcC5leGl0KCk7XG4gICAgICBleHBlY3QoY2FsbGVkKS5lcXVhbHModHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnb25TaG93TWVzc2FnZSBjYWxscyBiYWNrIG9uIHdpbmRvdy9zaG93TWVzc2FnZScsICgpID0+IHtcbiAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgIGxjLm9uU2hvd01lc3NhZ2UoKCkgPT4geyBjYWxsZWQgPSB0cnVlOyB9KTtcbiAgICAgIGV2ZW50TWFwWyd3aW5kb3cvc2hvd01lc3NhZ2UnXSgpO1xuICAgICAgZXhwZWN0KGNhbGxlZCkuZXF1YWxzKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19